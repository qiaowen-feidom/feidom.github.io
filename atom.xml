<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>feidom up up up</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://feidom-up.github.io/"/>
  <updated>2021-07-12T10:02:00.134Z</updated>
  <id>https://feidom-up.github.io/</id>
  
  <author>
    <name>ä¹”æ–‡é£</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ä»propsçš„childrenä¸­è·å–ref</title>
    <link href="https://feidom-up.github.io/2021/07/12/%E4%BB%8Eprops%E7%9A%84children%E4%B8%AD%E8%8E%B7%E5%8F%96ref/"/>
    <id>https://feidom-up.github.io/2021/07/12/%E4%BB%8Eprops%E7%9A%84children%E4%B8%AD%E8%8E%B7%E5%8F%96ref/</id>
    <published>2021-07-12T09:46:29.000Z</published>
    <updated>2021-07-12T10:02:00.134Z</updated>
    
    <content type="html"><![CDATA[<h4 id="ä»props-childrenä¸­å¤„ç†ref"><a href="#ä»props-childrenä¸­å¤„ç†ref" class="headerlink" title="ä»props.childrenä¸­å¤„ç†ref"></a>ä»<code>props.children</code>ä¸­å¤„ç†ref</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Child<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GetRef</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.ref);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> childElement = React.Children.only(<span class="keyword">this</span>.props.children);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> React.cloneElement(</span><br><span class="line">      childElement, </span><br><span class="line">      &#123; <span class="attr">ref</span>: <span class="function"><span class="params">el</span> =&gt;</span> <span class="keyword">this</span>.ref = el &#125;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">GetRef</span>&gt;</span><span class="tag">&lt;<span class="name">Child</span>/&gt;</span><span class="tag">&lt;/<span class="name">GetRef</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç»“åˆè½¬å‘refå°†refç»‘å®šåˆ°childrenç»„ä»¶ä¸­çš„divä¸­"><a href="#ç»“åˆè½¬å‘refå°†refç»‘å®šåˆ°childrenç»„ä»¶ä¸­çš„divä¸­" class="headerlink" title="ç»“åˆè½¬å‘refå°†refç»‘å®šåˆ°childrenç»„ä»¶ä¸­çš„divä¸­"></a>ç»“åˆè½¬å‘refå°†refç»‘å®šåˆ°childrenç»„ä»¶ä¸­çš„divä¸­</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Comç»„ä»¶</span></span><br><span class="line">interface Props &#123;</span><br><span class="line">  forwardedRef: ref | <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Com</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span>&lt;<span class="title">Props</span>, <span class="title">State</span>&gt; </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;forwardedRef&#125; = <span class="keyword">this</span>.props;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;div ref=&#123;forwardedRef&#125;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="xml">  &#125; </span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml">const forwardRefCom =  React.forwardRef((props, ref) =&gt; (</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">Com</span> <span class="attr">forwardedRef</span>=<span class="string">&#123;ref&#125;</span> &#123;<span class="attr">...props</span>&#125; /&gt;</span></span></span><br><span class="line"><span class="xml">  ));</span></span><br><span class="line"><span class="xml">return forwardRefCom;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;ä»props-childrenä¸­å¤„ç†ref&quot;&gt;&lt;a href=&quot;#ä»props-childrenä¸­å¤„ç†ref&quot; class=&quot;headerlink&quot; title=&quot;ä»props.childrenä¸­å¤„ç†ref&quot;&gt;&lt;/a&gt;ä»&lt;code&gt;props.children&lt;/
      
    
    </summary>
    
    
      <category term="react" scheme="https://feidom-up.github.io/categories/react/"/>
    
    
      <category term="react" scheme="https://feidom-up.github.io/tags/react/"/>
    
  </entry>
  
  <entry>
    <title>reactçš„è½¬å‘ref</title>
    <link href="https://feidom-up.github.io/2021/07/12/react%E7%9A%84%E8%BD%AC%E5%8F%91ref/"/>
    <id>https://feidom-up.github.io/2021/07/12/react%E7%9A%84%E8%BD%AC%E5%8F%91ref/</id>
    <published>2021-07-12T09:18:41.000Z</published>
    <updated>2021-07-12T09:41:20.988Z</updated>
    
    <content type="html"><![CDATA[<h4 id="ç®€å•ç†è§£"><a href="#ç®€å•ç†è§£" class="headerlink" title="ç®€å•ç†è§£"></a>ç®€å•ç†è§£</h4><p>ä½¿ç”¨é€šç”¨çš„é«˜é˜¶ç»„ä»¶æ—¶ï¼Œå¤–å±‚ç»„ä»¶refæ§åˆ¶é«˜é˜¶ç»„ä»¶ä¸­åŒ…è£¹çš„å­ç»„ä»¶ä¸­çš„å…ƒç´ ï¼Œæ­¤æ—¶å¤–å±‚ç»„ä»¶ä¼ å…¥çš„refå¹¶ä¸ä½œç”¨äºé«˜é˜¶ä¸Šï¼Œè¿™ä¸ªæ—¶å€™ï¼Œé«˜é˜¶ç»„ä»¶å°±è¦ç”¨åˆ°<code>React.forwardRef</code>è¿›è¡Œrefè½¬å‘ã€‚</p><h4 id="å®˜æ–¹æ–‡æ¡£"><a href="#å®˜æ–¹æ–‡æ¡£" class="headerlink" title="å®˜æ–¹æ–‡æ¡£"></a>å®˜æ–¹æ–‡æ¡£</h4><p><a class="link"   href="https://zh-hans.reactjs.org/docs/react-api.html#reactforwardref"  target="_blank" rel="noopener">React.forwardRef<i class="fas fa-external-link-alt"></i></a></p><h4 id="ç®€å•ä¸¾æ —ğŸŒ°"><a href="#ç®€å•ä¸¾æ —ğŸŒ°" class="headerlink" title="ç®€å•ä¸¾æ —ğŸŒ°"></a>ç®€å•ä¸¾æ —ğŸŒ°</h4><p>ğŸŒ°æ —å­ æ¥è‡ª<a class="link"   href="https://www.jianshu.com/p/ea89610dbbfd"  target="_blank" rel="noopener">JamesSawyerâ€”-React ä¸­çš„è½¬å‘ref<i class="fas fa-external-link-alt"></i></a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// é«˜é˜¶ç»„ä»¶</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logProps</span>(<span class="params">Component</span>) </span>&#123;</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">LogProps</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    componentDidUpdate(prevProps) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'å…ˆå‰çš„å±æ€§ï¼š'</span>, prevProps);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'å½“å‰å±æ€§ï¼š'</span>, <span class="keyword">this</span>.props);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    render() &#123;</span><br><span class="line">      <span class="comment">// ä½¿ç”¨forwardedRefä½œä¸ºä¸€ä¸ªrefå±æ€§ä¼ å…¥ç»„ä»¶ä¸­</span></span><br><span class="line">      <span class="keyword">const</span> &#123; forwardedRef, ...rest &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        &lt;Component ref=&#123;forwardedRef&#125; &#123;...rest&#125; /&gt;</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ä½¿ç”¨React.forwardRefå¯¹LogPropsç»„ä»¶è¿›è¡Œè½¬å‘</span></span><br><span class="line">  <span class="keyword">return</span> React.forwardRef(<span class="function">(<span class="params">props, ref</span>) =&gt;</span> (</span><br><span class="line">    &#123;<span class="string">' ä¸Šé¢å®šä¹‰çš„LogPropsç»„ä»¶æ¥å—ä¸€ä¸ªforwardedå±æ€§ '</span>&#125;</span><br><span class="line">    &lt;LogProps forwardedRef=&#123;ref&#125; &#123;...props&#125; /&gt;</span><br><span class="line">  ));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// FancyButton.js å­ç»„ä»¶</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> logProps <span class="keyword">from</span> <span class="string">'./logProps'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¥å—propså’Œrefä½œä¸ºå‚æ•°</span></span><br><span class="line"><span class="comment">// è¿”å›ä¸€ä¸ªReact ç»„ä»¶</span></span><br><span class="line"><span class="keyword">const</span> FancyButton = React.forwardRef(<span class="function">(<span class="params">props, ref</span>) =&gt;</span> (</span><br><span class="line">    &lt;button <span class="class"><span class="keyword">class</span></span>=<span class="string">"fancybutton"</span> ref=&#123;ref&#125;&gt;</span><br><span class="line">    &#123;props.children&#125;</span><br><span class="line">  &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">));</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ ä½¿ç”¨é«˜é˜¶ç»„ä»¶å¯¹å…¶è¿›è¡Œå°è£…</span></span><br><span class="line"><span class="regexp">export default logProps(FancyButton);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ çˆ¶ç»„ä»¶</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ app.js</span></span><br><span class="line"><span class="regexp">class App extends React.Component &#123;</span></span><br><span class="line"><span class="regexp">  </span></span><br><span class="line"><span class="regexp">  constructor(props) &#123;</span></span><br><span class="line"><span class="regexp">    super(props);</span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/ åˆ›å»ºä¸€ä¸ªref åå­—éšæ„</span></span><br><span class="line"><span class="regexp">    this.ref = React.createRef();</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">  </span></span><br><span class="line"><span class="regexp">  componentDidMount() &#123;</span></span><br><span class="line"><span class="regexp">    console.log('ref', this.ref);</span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/ this.ref.current è¡¨ç¤ºè·å–refæŒ‡å‘çš„DOMå…ƒç´ </span></span><br><span class="line"><span class="regexp">    this.ref.current.classList.add('primary'); /</span><span class="regexp">/ ç»™FancyButtonä¸­çš„buttonæ·»åŠ ä¸€ä¸ªclass</span></span><br><span class="line"><span class="regexp">    this.ref.current.focus(); /</span><span class="regexp">/ focusåˆ°buttonå…ƒç´ ä¸Š</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">  </span></span><br><span class="line"><span class="regexp">  render() &#123;</span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/ ç›´æ¥ä½¿ç”¨ref=&#123;this.fancyButtonRef&#125;</span></span><br><span class="line"><span class="regexp">    return (</span></span><br><span class="line"><span class="regexp">        &lt;FancyButton ref=&#123;this.fancyButtonRef&#125;&gt;å­ç»„ä»¶&lt;/</span>FancyButton&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;ç®€å•ç†è§£&quot;&gt;&lt;a href=&quot;#ç®€å•ç†è§£&quot; class=&quot;headerlink&quot; title=&quot;ç®€å•ç†è§£&quot;&gt;&lt;/a&gt;ç®€å•ç†è§£&lt;/h4&gt;&lt;p&gt;ä½¿ç”¨é€šç”¨çš„é«˜é˜¶ç»„ä»¶æ—¶ï¼Œå¤–å±‚ç»„ä»¶refæ§åˆ¶é«˜é˜¶ç»„ä»¶ä¸­åŒ…è£¹çš„å­ç»„ä»¶ä¸­çš„å…ƒç´ ï¼Œæ­¤æ—¶å¤–å±‚ç»„ä»¶ä¼ å…¥çš„refå¹¶ä¸ä½œç”¨äºé«˜é˜¶ä¸Šï¼Œè¿™ä¸ªæ—¶å€™ï¼Œ
      
    
    </summary>
    
    
      <category term="react" scheme="https://feidom-up.github.io/categories/react/"/>
    
    
      <category term="react" scheme="https://feidom-up.github.io/tags/react/"/>
    
  </entry>
  
  <entry>
    <title>React-é˜²æ­¢å†…å­˜æ³„æ¼å¤„ç†</title>
    <link href="https://feidom-up.github.io/2021/06/18/React-%E9%98%B2%E6%AD%A2%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%E5%A4%84%E7%90%86/"/>
    <id>https://feidom-up.github.io/2021/06/18/React-%E9%98%B2%E6%AD%A2%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%E5%A4%84%E7%90%86/</id>
    <published>2021-06-18T05:40:49.000Z</published>
    <updated>2021-06-18T06:22:36.488Z</updated>
    
    <content type="html"><![CDATA[<p>ç”¨Reactå†™äº†ä¸€æ®µä»£ç ï¼Œæµè§ˆå™¨çš„æ§åˆ¶å°<font color=red size=5>Error </font>å¦‚ä¸‹ï¼š<br><font color=red>Warning: Canâ€™t perform a React state update on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in a useEffect cleanup function.</font></p><p>å•¥æ„æ€å‘¢ï¼šä¸èƒ½åœ¨æœªæŒ‚è½½çš„ç»„ä»¶ä¸Šæ‰§è¡ŒReactçŠ¶æ€æ›´æ–°ã€‚è¿™æ˜¯ä¸€ä¸ªæ— ç”¨åŠŸï¼Œä½†å®ƒè¡¨æ˜ä½ çš„åº”ç”¨ç¨‹åºä¸­å­˜åœ¨å†…å­˜æ³„æ¼ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåœ¨useEffectæ¸…ç†å‡½æ•°ä¸­å–æ¶ˆæ‰€æœ‰çš„è®¢é˜…å’Œå¼‚æ­¥ä»»åŠ¡ã€‚</p><p>ä»¥ä¸‹æ˜¯è¿™æ®µé—®é¢˜ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Component = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; itemId &#125; = props;</span><br><span class="line">  <span class="keyword">const</span> [ isRemoveing, setIsRemoveing ] = useState(<span class="literal">false</span>);</span><br><span class="line">  <span class="keyword">const</span> handlerRemove = <span class="keyword">async</span>() =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span>(isRemoveing) <span class="keyword">return</span>;</span><br><span class="line">    setIsRemoveing(<span class="literal">true</span>);</span><br><span class="line">    <span class="keyword">await</span> removeItem(itemId); <span class="comment">// åˆ é™¤å½“å‰è¿™ä¸ªç»„ä»¶çš„æ•°æ®ï¼Œè¿™ä¸ªç»„ä»¶å¸è½½</span></span><br><span class="line">    setIsRemoveing(<span class="literal">false</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;div class_name=&#123; !isRemoveing ? <span class="string">'class1'</span> : <span class="string">'class2'</span> &#125; onClick=&#123;handlerRemove&#125; &gt;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>åŸå› æ˜¯å•¥å‘¢</strong>ï¼šawaitç­‰å¾…ä¸€ä¸ªå¼‚æ­¥è¯·æ±‚çš„è¿”å›å†<code>setIsRemoveing</code>ã€‚å‡å¦‚è¿™ä¸ªç»„ä»¶unmountedä¹‹åï¼Œè¯·æ±‚è¿˜æ²¡å›æ¥ï¼Œä½ è¿˜åœ¨è¿™setStateï¼Œä¸å°±ç‚¸äº†ã€‚</p><p>å¥½å§ï¼Œé‚£è§£å†³æ–¹å¼æ˜¯ä¸æ˜¯åœ¨<code>useEffect</code>ä¸­å®šä¹‰ä¸€ä¸ªå¸è½½æ—¶çš„å˜é‡<code>unmounted</code>ï¼Œç„¶ååœ¨setIsRemoveingæ—¶åˆ¤æ–­å¸è½½çŠ¶æ€ï¼Ÿ</p><p>å—¯ï¼ŒåŸºæœ¬æ˜¯è¿™ä¸ªæ€è·¯ã€‚é‚£è¿™ä¸ª<code>unmounted</code>è¯¥æ€ä¹ˆå®šä¹‰ï¼Œæ˜¯ç›´æ¥<code>const unmounted = false;</code>, è¿˜æ˜¯<code>const [ unmounted, setUnmounted ] = useState(false);</code>ï¼Ÿ<br>ä»¥ä¸‹æ˜¯Stack Overflowé‡Œä¸€ä¸ªå¸–å­çš„å›å¤ï¼š</p><ul><li>æ–¹å¼ä¸€ï¼š<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> unmounted = <span class="literal">false</span>;</span><br><span class="line">  setPageLoading(<span class="literal">true</span>);</span><br><span class="line">  props</span><br><span class="line">    .dispatch(fetchCourses())</span><br><span class="line">    .then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (!unmounted) &#123;</span><br><span class="line">        setPageLoading(<span class="literal">false</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function">(<span class="params">error: string</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (!unmounted) &#123;</span><br><span class="line">        toast.error(error);</span><br><span class="line">        setPageLoading(<span class="literal">false</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123; unmounted = <span class="literal">true</span> &#125;;</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure></li><li>æ–¹å¼äºŒï¼šuseRef<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Example = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> unmounted = useRef(<span class="literal">false</span>);</span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123; unmounted.current = <span class="literal">true</span> &#125;</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> setFilter = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    props.dispatch(fetchCourses()).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (!unmounted.current) &#123;</span><br><span class="line">        setLoading(<span class="literal">false</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;ReactTable onFetchData=&#123;setFilter&#125; <span class="comment">/* other props omitted */</span> /&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>æ–¹å¼äºŒä¸­å¦‚æœä¸ç”¨refï¼Œç”¨stateæˆ–è€…ç›´æ¥å®šä¹‰å˜é‡çš„è¯ï¼Œéƒ½å®ç°ä¸äº†ã€‚<br>å¥½å§ï¼Œæ˜¯æˆ‘ä¸ç†Ÿæ‚‰çš„<a class="link"   href="https://zh-hans.reactjs.org/docs/hooks-reference.html#useref"  target="_blank" rel="noopener">useRef<i class="fas fa-external-link-alt"></i></a>,è¿™ä¸ªé“¾æ¥æ˜¯å®˜æ–¹æ–‡æ¡£ï¼Œå¯ä»¥å…ˆçœ‹ä¸‹ã€‚<br>ç„¶åä¸ºäº†ç ”ç©¶å®ƒï¼Œæˆ‘æ‰¾åˆ°ä¸€ç¯‡æ¥è‡ª<a class="link"   href="https://leewarrick.com/"  target="_blank" rel="noopener">Lee Warrick<i class="fas fa-external-link-alt"></i></a>çš„<a class="link"   href="https://leewarrick.com/blog/react-use-effect-explained/"  target="_blank" rel="noopener">Reactâ€™s useEffect and useRef Explained for Mortals<i class="fas fa-external-link-alt"></i></a>ã€‚<a href="/2021/06/18/useEffect-useRef/">è¿™é‡Œ</a>æ˜¯æˆ‘å¯¹è¿™ç¯‡æ–‡ç« çš„ç¿»è¯‘ï¼Œä»…ä¾›å‚è€ƒã€‚</p><h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><p><a class="link"   href="https://daviseford.com/blog/2019/07/11/react-hooks-check-if-mounted.html"  target="_blank" rel="noopener">React Hooks - Check If A Component Is Mounted<i class="fas fa-external-link-alt"></i></a><br><a class="link"   href="https://stackoverflow.com/questions/58038008/how-to-stop-memory-leak-in-useeffect-hook-react/58038029"  target="_blank" rel="noopener">how-to-stop-memory-leak-in-useeffect-hook-react<i class="fas fa-external-link-alt"></i></a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ç”¨Reactå†™äº†ä¸€æ®µä»£ç ï¼Œæµè§ˆå™¨çš„æ§åˆ¶å°&lt;font color=red size=5&gt;Error &lt;/font&gt;å¦‚ä¸‹ï¼š&lt;br&gt;&lt;font color=red&gt;Warning: Canâ€™t perform a React state update on an unmounte
      
    
    </summary>
    
    
      <category term="react" scheme="https://feidom-up.github.io/categories/react/"/>
    
    
      <category term="react" scheme="https://feidom-up.github.io/tags/react/"/>
    
  </entry>
  
  <entry>
    <title>useEffect &amp; useRef</title>
    <link href="https://feidom-up.github.io/2021/06/18/useEffect-useRef/"/>
    <id>https://feidom-up.github.io/2021/06/18/useEffect-useRef/</id>
    <published>2021-06-18T01:58:48.000Z</published>
    <updated>2021-06-18T06:22:34.756Z</updated>
    
    <content type="html"><![CDATA[<h4 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h4><p>æœ¬æ–‡æ˜¯ä¸€ç‰‡ç¿»è¯‘ï¼ŒåŸæ–‡æ¥è‡ª<a class="link"   href="https://leewarrick.com/"  target="_blank" rel="noopener">Lee Warrick<i class="fas fa-external-link-alt"></i></a>çš„<a class="link"   href="https://leewarrick.com/blog/react-use-effect-explained/"  target="_blank" rel="noopener">Reactâ€™s useEffect and useRef Explained for Mortals<i class="fas fa-external-link-alt"></i></a>ã€‚<br>ä¸ºå•¥ç¿»è¯‘å¹¶è®°å½•è¿™ç¯‡æ–‡ç« å‘¢ï¼Œå› ä¸ºçœ‹äº†ä»¥åè§‰å¾—é€šä¿—æ˜“æ‡‚çš„ä¸ºå‡¡äººè§£é‡Šäº†<code>useEffect</code>å’Œ<code>useRef</code>ã€‚<br>åœ¨æ­¤è®°å½•ï¼Œæ–¹ä¾¿ä»¥åå›å¤´å¤ä¹ ã€‚</p><h4 id="é€šä¿—çš„è§£é‡ŠReactçš„-useEffect-å’Œ-useRef"><a href="#é€šä¿—çš„è§£é‡ŠReactçš„-useEffect-å’Œ-useRef" class="headerlink" title="é€šä¿—çš„è§£é‡ŠReactçš„ useEffect å’Œ useRef"></a>é€šä¿—çš„è§£é‡ŠReactçš„ useEffect å’Œ useRef</h4><p><img src="https://leewarrick.com/blog/static/fdb92914fc9093dee6a2c20dad8fbd50/c35de/acropolis.jpg" alt="åŸæ–‡ä¸­è¿‡çš„å›¾"><br>&emsp;&emsp;å¦‚æœReactæ–‡æ¡£è®©ä½ ä¸€ç­¹è«å±•ï¼Œæˆ–è€…Dan Abramovçš„åšå®¢è®©ä½ è§‰å¾—ä½ åœ¨é˜…è¯»ä»å¥¥æ—åŒ¹æ–¯å±±æµä¼ ä¸‹æ¥çš„å¤å¸Œè…Šæ–‡å·è½´ï¼Œä½ å¹¶ä¸å­¤å•,ä¸æ˜¯åªæœ‰ä½ è¿™æ ·è®¤ä¸ºã€‚<br>&emsp;&emsp;æœ‰æ—¶ï¼ŒReactç¥æ®¿çš„ä¼—ç¥ä»¬å¾ˆéš¾å°†ä»–ä»¬çš„æ™ºæ…§è½¬åŒ–ä¸ºæˆ‘ä»¬å…¶ä»–äººå¯ä»¥ç†è§£çš„è¯­è¨€ã€‚äº‹æƒ…é€šå¸¸æ˜¯è¿™æ ·çš„ã€‚ä½ åœ¨ä½¿ç”¨Reactæ—¶é‡åˆ°å›°éš¾ï¼Œç”¨è°·æ­Œæœç´¢ä½ çš„é—®é¢˜ï¼Œç„¶åè¯»åˆ°ä¸€ä¸ªåšå®¢æˆ–Stack Overflowçš„å¸–å­ï¼Œå…¶ä¸­çš„ä¸€äº›å»ºè®®è®©ä½ æ„Ÿåˆ°æ¯”å¼€å§‹æ—¶æ›´è¿·èŒ«ã€‚<br>&emsp;&emsp;æˆ‘å½“ç„¶ä¹Ÿæ›¾å¤šæ¬¡æˆä¸ºè¿™ç§æƒ…å†µçš„å—å®³è€…ã€‚ç‰¹åˆ«æ˜¯useEffectã€‚åœ¨æˆ‘ä»¬æ·±å…¥ç ”ç©¶è¿™ä¸ªç‰¹æ®Šçš„é’©å­ä¹‹å‰ï¼Œè®©æˆ‘è¯´æˆ‘å–œæ¬¢ç”¨hooksæ¥å†™Reactï¼Œè€Œä¸”ä¸æƒ³å†å›åˆ°ç±»ä¸­å»ã€‚è¿™å°±æ˜¯è¯´ï¼ŒuseEffectæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„ç—›ç‚¹ã€‚</p><h6 id="åˆ°åº•ä»€ä¹ˆæ˜¯â€œeffectå‰¯ä½œç”¨â€"><a href="#åˆ°åº•ä»€ä¹ˆæ˜¯â€œeffectå‰¯ä½œç”¨â€" class="headerlink" title="åˆ°åº•ä»€ä¹ˆæ˜¯â€œeffectå‰¯ä½œç”¨â€"></a>åˆ°åº•ä»€ä¹ˆæ˜¯â€œeffectå‰¯ä½œç”¨â€</h6><p>&emsp;&emsp;ä¸ºäº†è®©ä½ çœŸæ­£ç†è§£useEffectï¼Œè®©æˆ‘ä»¬é€€åä¸€ç‚¹ï¼Œè°ˆè°ˆç¼–ç¨‹å’ŒJavaScriptã€‚<br>&emsp;&emsp;useEffectçš„åå­—å°±æ˜¯æˆ‘ä»¬äº²åˆ‡åœ°ç§°ä¸º â€œå‰¯ä½œç”¨ â€œçš„æ•ˆæœã€‚<br>&emsp;&emsp;é‚£ä¹ˆä»€ä¹ˆæ˜¯å‰¯ä½œç”¨å‘¢ï¼Ÿå®ƒæ˜¯ä¸€æ®µä»£ç ï¼Œå®ƒä¼¸å‡ºæ‰‹æ¥â€¦â€¦åšåˆ«çš„äº‹æƒ…ã€‚è¿™æ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µï¼Œæ‰€ä»¥è®©æˆ‘ä»¬ç”¨ä¾‹å­æ¥è¯´æ˜ã€‚<br>&emsp;&emsp;è¿™é‡Œæœ‰ä¸€ä¸ªæ²¡æœ‰å‰¯ä½œç”¨çš„å‡½æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>&emsp;&emsp;å‡½æ•°addé™¤äº†æ¥å—ä¸€ä¸ªè¾“å…¥å¹¶è¿”å›ä¸€ä¸ªè¾“å‡ºå¤–ï¼Œä»€ä¹ˆä¹Ÿæ²¡åšã€‚å®ƒå¹¶æ²¡æœ‰ä¼¸æ‰‹åˆ°è‡ªèº«ä»¥å¤–çš„åœ°æ–¹å»æ£ä¹±!<br>&emsp;&emsp;æˆ‘ä»¬æ¥ä»‹ç»ä¸€ä¸ªå‰¯ä½œç”¨ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> resultDiv = <span class="built_in">document</span>.getElementById(<span class="string">'add-example'</span>)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> result = a + b</span><br><span class="line">  resultDiv.textContent = <span class="string">`The Result is <span class="subst">$&#123;result&#125;</span>`</span></span><br><span class="line">  <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line">add(<span class="number">3</span>, <span class="number">4</span>)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id&#x3D;&quot;add-example&quot;&gt;&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure><p>&emsp;&emsp;ç°åœ¨ï¼Œæˆ‘ä»¬çš„å‡½æ•°ä¼¸åˆ°äº†è‡ªèº«ä¹‹å¤–æ¥æ›´æ–°DOMï¼ˆDocument Object Modelçš„ç¼©å†™ï¼‰ï¼Œå¹¶æ˜¾ç¤ºäº†ç»“æœã€‚è¿™ä¸ªé¢å¤–çš„è¡Œä¸ºæ˜¯ä¸€ä¸ªå‰¯ä½œç”¨ã€‚</p><h6 id="Reactä¸­çš„å‰¯ä½œç”¨"><a href="#Reactä¸­çš„å‰¯ä½œç”¨" class="headerlink" title="Reactä¸­çš„å‰¯ä½œç”¨"></a>Reactä¸­çš„å‰¯ä½œç”¨</h6><p>&emsp;&emsp;é‚£ä¹ˆReactå‘¢ï¼Ÿå®ƒæ˜¯ä¸€ä¸ªå‡ ä¹åªæ›´æ–°DOMçš„åº“ã€‚ä¸€ä¸ªè§†å›¾åº“ï¼Œå¦‚æœä½ æ„¿æ„çš„è¯ã€‚é‚£ä¹ˆåœ¨Reactä¸­ï¼Œä½ ä¼šæŠŠä»€ä¹ˆå«åšå‰¯ä½œç”¨å‘¢ï¼Ÿ<br>&emsp;&emsp;ä»»ä½•åœ¨æ›´æ–°é¡µé¢ä¹‹å¤–çš„ä¸œè¥¿ã€‚å¦‚æœä½ ä¸ä½¿ç”¨Reactæ¥æ›´æ–°çŠ¶æ€æˆ–æ¸²æŸ“HTMLï¼Œé‚£å°±æ˜¯ä¸€ä¸ªå‰¯ä½œç”¨ã€‚å®ƒæ˜¯ä»»ä½•éReactçš„ä¸œè¥¿ã€‚<br>&emsp;&emsp;è¿™æ„å‘³ç€ä»»ä½•æ—¶å€™ä½ è°ƒç”¨APIï¼Œä½¿ç”¨setInterval/setTimeoutï¼Œæ·»åŠ é”®ç›˜ç›‘å¬å™¨ï¼Œæˆ–è€…çœŸçš„ä»»ä½•æ—¶å€™ä½ æä¹±çª—å£å¯¹è±¡ï¼Œä½ éƒ½åœ¨å¼•å…¥å‰¯ä½œç”¨ã€‚<br>&emsp;&emsp;hookså¾ˆç¥å¥‡ï¼Œè®©ä½ å†™å‡ºçœŸæ­£å¯è¯»ã€å¯é‡ç”¨çš„ä»£ç â€¦â€¦é™¤äº†å½“ä½ å¤„ç†å‰¯ä½œç”¨çš„æ—¶å€™ã€‚è¿™å¾ˆä¸å¹¸ï¼Œå› ä¸ºå½“ä½ ä»”ç»†æƒ³æƒ³ï¼Œä½œä¸ºç½‘ç»œå¼€å‘è€…ï¼Œæˆ‘ä»¬æ‰€åšçš„å¤§å¤šæ•°æœ‰è¶£çš„äº‹æƒ…éƒ½æ˜¯å›´ç»•ç€å‰¯ä½œç”¨å±•å¼€çš„ã€‚<br>&emsp;&emsp;è®©æˆ‘ä»¬ä»é’©å­ä¸Šé€€ä¸€æ­¥ï¼Œçœ‹çœ‹æˆ‘ä»¬å¦‚ä½•åœ¨åŸºäºç±»çš„ç»„ä»¶ä¸­å¤„ç†å‰¯ä½œç”¨ã€‚</p><h6 id="ç±»ç»„ä»¶å’Œå‰¯ä½œç”¨"><a href="#ç±»ç»„ä»¶å’Œå‰¯ä½œç”¨" class="headerlink" title="ç±»ç»„ä»¶å’Œå‰¯ä½œç”¨"></a>ç±»ç»„ä»¶å’Œå‰¯ä½œç”¨</h6><p>&emsp;&emsp;åœ¨åŸºäºç±»çš„ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ¥æ‰§è¡Œä¾§é¢æ•ˆæœã€‚ä¾‹å¦‚ï¼Œåœ¨componentDidMountä¸Šï¼Œæˆ‘ä»¬ä¼šè°ƒç”¨APIæ¥è·å–æ¸²æŸ“çš„æ•°æ®ã€‚<br>&emsp;&emsp;â€ä¸ºä»€ä¹ˆä¸åœ¨æ„é€ å‡½æ•°ä¸­è°ƒç”¨APIï¼Ÿâ€ä½ å¯èƒ½ä¼šé—®ã€‚å¥½å§ï¼Œå› ä¸ºReactè¯´æˆ‘ä»¬ç”¨äºæ¸²æŸ“çš„ä¸œè¥¿éƒ½åœ¨ â€œçŠ¶æ€ â€œä¸­ï¼Œåœ¨æˆ‘ä»¬çš„ç»„ä»¶è¢«åŠ è½½åˆ°é¡µé¢ä¸Šä¹‹å‰ï¼Œæˆ‘ä»¬ä¸èƒ½ä¹±ç”¨çŠ¶æ€ã€‚å¦‚æœæˆ‘ä»¬è¯•å›¾åœ¨ç»„ä»¶åŠ è½½ä¹‹å‰æ›´æ–°çŠ¶æ€ï¼Œå°±ä¼šå‡ºç°é”™è¯¯ã€‚<br>&emsp;&emsp;ä¸‹é¢æ˜¯ä¸€ä¸ªå…¸å‹çš„åŸºäºç±»çš„ç»„ä»¶çš„æƒ…å†µ,è¿™æ˜¯ä¸€ä¸ªå°ç²¾çµçš„ä¾‹å­ï¼ˆåé¢ä¼šç”¨hooksæ”¹å†™ï¼‰ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pokemon</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">super</span>()</span><br><span class="line">    <span class="keyword">this</span>.state = <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    fetch(<span class="string">'https://pokeapi.co/api/v2/pokemon/gengar/'</span>)</span><br><span class="line">    .then(<span class="function"><span class="params">res</span> =&gt;</span> res.json())</span><br><span class="line">    .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.setState(res)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> pokemon = <span class="keyword">this</span>.state</span><br><span class="line">    <span class="keyword">const</span> style = &#123;<span class="attr">textTransform</span>: <span class="string">'capitalize'</span>&#125;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">      &#123; pokemon</span><br><span class="line">        ? <span class="xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line">          &lt;img src=&#123;pokemon.sprites.front_default&#125;</span><br><span class="line"><span class="xml">            alt=&#123;'Image of ' + pokemon.name&#125;/&gt;</span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&#123;style&#125;</span>&gt;</span>Name: &#123;pokemon.name&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">          &lt;p style=&#123;style&#125;&gt;</span><br><span class="line">            Type: &#123;pokemon.types.map(x =&gt; x.type.name).join(', ')&#125;</span><br><span class="line"><span class="xml">          <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        : <span class="string">'Loading...'</span></span><br><span class="line">      &#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p>&emsp;&emsp;è¿™æ ·åšå¾ˆå¥½ï¼Œé™¤äº†ä¸è¿™æ ·åšçš„æ—¶å€™ã€‚å½“æˆ‘ä»¬æƒ³å†æ¬¡ç‚¹å‡»APIæ¥æŠ“å–ä¸åŒçš„å°ç²¾çµæ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿå¦‚æœè¿™ä¸ªç»„ä»¶è¢«è¿æ¥åˆ°æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­çš„æŸä¸ªè·¯ç”±ä¸Šï¼Œè€Œè¿™ä¸ªè·¯ç”±å‘ç”Ÿäº†å˜åŒ–ï¼Œä½†è¿™ä¸ªç»„ä»¶å¹¶æ²¡æœ‰å¸è½½/é‡è£…ã€‚å¦‚æœç”¨æˆ·è¿›å…¥äº†ä¸åŒçš„é¡µé¢ï¼Œè€Œç»„ä»¶åœ¨APIè°ƒç”¨ç»“æŸå‰å°±å¸è½½äº†æ€ä¹ˆåŠï¼Ÿ<br>&emsp;&emsp;ç­”æ¡ˆæ˜¯å¢åŠ æ›´å¤šçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œå¦‚<code>componentDidUpdate</code>å’Œ<code>componentWillUnmount</code>ï¼Œä»¥æ‰§è¡Œæ›´å¤šçš„APIè°ƒç”¨ï¼Œé˜²æ­¢å¥‡æ€ªçš„å¸è½½é”™è¯¯ã€‚æ‰€ä»¥æˆ‘ä»¬æ·»åŠ äº†è¿™äº›ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ¥å¤„ç†æˆ‘ä»¬æ‰€æœ‰çš„è¾¹ç¼˜æƒ…å†µã€‚å½“æˆ‘ä»¬å®Œæˆåï¼Œæˆ‘ä»¬å‘ç°æˆ‘ä»¬çš„å¤§éƒ¨åˆ†ç»„ä»¶éƒ½æ˜¯ç”±ç”Ÿå‘½å‘¨æœŸä»£ç ç»„æˆçš„ã€‚</p><h5 id="ç„¶åæ¥è¯•ä¸€ä¸‹Hooks"><a href="#ç„¶åæ¥è¯•ä¸€ä¸‹Hooks" class="headerlink" title="ç„¶åæ¥è¯•ä¸€ä¸‹Hooks"></a>ç„¶åæ¥è¯•ä¸€ä¸‹Hooks</h5><p>&emsp;&emsp;Reactå›¢é˜Ÿæ„è¯†åˆ°ï¼Œç±»çš„APIæœ‰ç‚¹ç¬¨é‡ï¼Œéš¾ä»¥æ¨ç†ã€‚äººä»¬æ­£åœ¨åˆ¶ä½œç”Ÿå‘½å‘¨æœŸæµç¨‹å›¾ï¼Œè¯•å›¾äº†è§£Reactçš„å†…éƒ¨è¿ä½œâ€¦â€¦è¿™æ˜¯ä¸€ä¸ªæ··ä¹±ã€‚<br>&emsp;&emsp;å› æ­¤ï¼Œåœ¨2018å¹´10æœˆçš„ReactConfä¸Šï¼Œåœ¨Sophie Alpertæ¦‚è¿°äº†ç±»çš„ä½¿ç”¨æœ‰å¤šä¹ˆç³Ÿç³•ä¹‹åï¼ŒDan Abramovä¸Šå°ä»‹ç»äº†é’©å­ï¼ˆä½ å¯ä»¥åœ¨è¿™é‡Œè§‚çœ‹è§†é¢‘ï¼‰ã€‚<br>&emsp;&emsp;é’©å­åœ¨åŠŸèƒ½ç»„ä»¶ä¸­å¼•å…¥äº†çŠ¶æ€æ€§ï¼Œä»¥åŠå¤„ç†å‰¯ä½œç”¨çš„æ–°æ–¹æ³•ã€‚é’©å­ä½¿Reactçš„ä»£ç æ›´å®¹æ˜“é‡å¤ä½¿ç”¨ï¼Œè€Œä¸”ä»£ç é‡æ›´å°‘â€“è¿™æ˜¯ä¸€ä¸ªå·¨å¤§çš„èƒœåˆ©ï¼ä½†æ˜¯æœ‰ä¸€ä¸ªå°é—®é¢˜ã€‚<br>&emsp;&emsp;é™¤äº†ä¸€ä¸ªå°é—®é¢˜ã€‚<strong>æ¯æ¬¡æ¸²æŸ“ï¼Œæ•´ä¸ªç»„ä»¶/åŠŸèƒ½éƒ½è¦é‡æ–°è¿è¡Œ</strong>ã€‚<br>&emsp;&emsp;è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªåŸºäºHookså¼€å‘çš„ä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">RerenderExample</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [bool, setBool] = React.useState(<span class="literal">false</span>)</span><br><span class="line">  <span class="keyword">const</span> randomNum = <span class="built_in">Math</span>.random()</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;This number will be different each time you click the button:&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">      &lt;p&gt;&#123;randomNum&#125;&lt;/</span>p&gt;</span><br><span class="line">      &lt;button onClick=&#123;() =&gt; setBool(!bool)&#125;&gt;Trigger a render&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>&emsp;&emsp;æˆ‘ä»¬åœ¨æ¸²æŸ“çš„JSXä¸­ç”šè‡³æ²¡æœ‰ä½¿ç”¨boolï¼Œä½†æ¯æ¬¡çŠ¶æ€æ”¹å˜æ—¶ï¼Œæ•´ä¸ªå‡½æ•°éƒ½ä¼šè¿è¡Œã€‚æ¯æ¬¡æ¸²æŸ“ï¼Œç»„ä»¶å†…çš„æ‰€æœ‰ä¸œè¥¿éƒ½ä¼šé‡æ–°è¿è¡Œï¼šå‡½æ•°å®šä¹‰ã€å˜é‡åˆ›å»º/åˆ†é…ç­‰ç­‰ã€‚<br>&emsp;&emsp;å¦‚æœä½ åœ¨æƒ³ â€œå¦‚æœæˆ‘å¿…é¡»åœ¨ç»„ä»¶ä¸­åšä¸€äº›è®¡ç®—é‡å¤§çš„äº‹æƒ…æ€ä¹ˆåŠï¼Ÿè¿™ä¸å¯èƒ½æ˜¯é«˜æ€§èƒ½çš„â€¦â€¦â€ï¼Œè¿™æ˜¯ä¸ªæ•é”çš„è§‚å¯Ÿã€‚åœ¨ä¸€ä¸ªåŠŸèƒ½æ€§ç»„ä»¶ä¸­è¿›è¡Œæ˜‚è´µçš„æ“ä½œæ˜¯ä¸å¯èƒ½æœ‰æ€§èƒ½çš„ã€‚äº‹å®ä¸Šï¼ŒuseCallbackå’ŒuseMemoçš„å­˜åœ¨æ­£æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œè®¾ç½®çš„é¿éš¾æ‰€ã€‚Kent C Doddsåœ¨è¿™é‡Œå¯¹è¿™äº›é—®é¢˜æœ‰ä¸€ä¸ªæŒ‘æˆ˜æ€§çš„è§£è¯»ï¼Œä½†æ€»ç»“èµ·æ¥ï¼Œæ ¹æ®Kentçš„è¯´æ³•ï¼Œåœ¨ä½ çœ‹åˆ°æ€§èƒ½å½±å“ä¹‹å‰ï¼Œä½ ä¸åº”è¯¥æ‹…å¿ƒé‡è¯»çš„é—®é¢˜ã€‚</p><blockquote><p>æ³¨æ„ï¼šå¦‚æœä½ å¯¹é’©å­ä¸ç†Ÿæ‚‰ï¼Œè¯·æŠŠè¿™ç¯‡æ–‡ç« æ”¶è—èµ·æ¥ï¼Œç­‰ä½ å‡†å¤‡å¥½äº†å†æ¥çœ‹çœ‹ã€‚é™¤éä½ å¿…é¡»è¦æ‹…å¿ƒè®°å¿†åŒ–çš„é—®é¢˜<br>&emsp;&emsp;åƒuseStateè¿™æ ·çš„é’©å­é‡‡ç”¨äº†ä¸€äº›å†…åœ¨çš„é­”æ³•æ¥é¿å…é‡ç°çš„é—®é¢˜ã€‚è¿™å¾ˆå¥½ï¼Œè€Œä¸”ä½¿ç”¨useStateä¼¼ä¹å¾ˆç®€å•ï¼Œä½†æ˜¯<strong>å½“ä½ éœ€è¦åšè®¾ç½®çŠ¶æ€ä»¥å¤–çš„äº‹æƒ…æ—¶ï¼Œæ€ä¹ˆåŠï¼Ÿ</strong><br>&emsp;&emsp;ä½¿ç”¨useEffectã€‚é‚£äº›è®¨åŒçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ²¡æœ‰äº†ï¼Œä¸‡å²ï¼ç„¶è€Œï¼Œè¿™ä¸ªé’©å­ä¹Ÿæœ‰å®ƒè‡ªå·±çš„å¥‡æ€ªä¹‹å¤„ã€‚é¦–å…ˆè®©æˆ‘ä»¬æ¥çœ‹çœ‹è¯­æ³•ã€‚</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//accepts two arguments: a function, and dependency array</span></span><br><span class="line">useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// do stuff</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125; <span class="comment">//function to undo our stuff from above when component unmounts</span></span><br><span class="line">&#125;, []) <span class="comment">//dependency array of things to watch for changes on</span></span><br></pre></td></tr></table></figure><p>&emsp;&emsp;æ‰€ä»¥ä½ ç»™useEffectä¼ é€’ä¸€ä¸ªè¦è¿è¡Œçš„å›è°ƒå‡½æ•°ï¼Œå…¶ä¸­åŒ…å«ä½ çš„å‰¯ä½œç”¨ï¼Œç„¶åæ˜¯ä¸€ä¸ªè¦è§‚å¯Ÿçš„äº‹ç‰©çš„æ•°ç»„ã€‚å¦‚æœè¢«ç›‘è§†çš„äº‹ç‰©å‘ç”Ÿå˜åŒ–ï¼ŒuseEffectå°†é‡æ–°è¿è¡Œæˆ‘ä»¬çš„å›è°ƒå‡½æ•°ã€‚å¦‚æœä½ éœ€è¦åœ¨å¸è½½æ—¶æ¸…ç†ä½ çš„å‰¯ä½œç”¨ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«è¯¥ä»£ç çš„å‡½æ•°ã€‚<br>&emsp;&emsp;è®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬çš„å°ç²¾çµçš„ä¾‹å­ï¼Œç”¨é’©å­å’ŒuseEffectã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Pokemon</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [pokemon, setPokemon] = React.useState(<span class="literal">null</span>)</span><br><span class="line">  React.useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    fetch(<span class="string">'https://pokeapi.co/api/v2/pokemon/gengar/'</span>)</span><br><span class="line">    .then(<span class="function"><span class="params">res</span> =&gt;</span> res.json())</span><br><span class="line">    .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      setPokemon(res)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;, []) <span class="comment">// empty array means nothing to watch, so run once and no more</span></span><br><span class="line">  <span class="keyword">const</span> style = &#123;<span class="attr">textTransform</span>: <span class="string">'capitalize'</span>&#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">    &#123; pokemon</span><br><span class="line">      ? <span class="xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line">        &lt;img src=&#123;pokemon.sprites.front_default&#125;</span><br><span class="line"><span class="xml">            alt=&#123;'Image of ' + pokemon.name&#125;/&gt;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&#123;style&#125;</span>&gt;</span>Name: &#123;pokemon.name&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">        &lt;p style=&#123;style&#125;&gt;</span><br><span class="line">          Type: &#123;pokemon.types.map(x =&gt; x.type.name).join(', ')&#125;</span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">      : <span class="string">'Loading...'</span></span><br><span class="line">    &#125;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p>&emsp;&emsp;å¦‚æœä½ ç›¯ç€é‚£ä¸ªç©ºçš„ä¾èµ–æ€§æ•°ç»„ï¼Œä½ å·²ç»æ³¨æ„åˆ°äº†ç¬¬ä¸€ä¸ªuseEffectçš„æ€ªç™–ã€‚é€šè¿‡ä¼ é€’ä¸€ä¸ªç©ºæ•°ç»„ï¼Œæˆ‘ä»¬åœ¨è¯´ â€œåªåšè¿™ä¸€æ¬¡â€ã€‚Reactä¸‡ç¥æ®¿å‘Šè¯‰æˆ‘ä»¬ï¼Œåœ¨æå°‘æ•°æƒ…å†µä¸‹è¿™æ˜¯å¯ä»¥çš„ï¼Œä½†å¤§å¤šæ•°æ—¶å€™ä½ éƒ½å¸Œæœ›é‡Œé¢æœ‰ä¸œè¥¿ã€‚åŸå› æ˜¯ï¼Œé€šå¸¸ä½ æƒ³ä¸ä½ çš„ä»£ç ä¸­çš„ä¸œè¥¿åŒæ­¥ï¼Œè€Œä¸æ˜¯åªæ‰§è¡Œä¸€æ¬¡æ•ˆæœã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬çš„å°ç²¾çµç»„ä»¶ä¾èµ–äºä¸€ä¸ªè·¯ç”±å‚æ•°æˆ–é“å…·ï¼Œä»»ä½•å¯ä»¥è¯´ â€œå»è·å¾—ä¸€ä¸ªæ–°çš„å°ç²¾çµ â€œè€Œä¸éœ€è¦æŒ‚è½½/å¸è½½çš„ä¸œè¥¿å‘¢ï¼Ÿ<br>&emsp;&emsp;æ¯”æ–¹è¯´ï¼Œæˆ‘ä»¬çš„ç»„ä»¶ä¾èµ–äºä¸€ä¸ªé“å…·pokemonToGetï¼Œå®ƒæ˜¯ä¸€ä¸ªå‚æ•°ï¼Œå‘Šè¯‰å®ƒè¦ä»APIä¸­è·å¾—å“ªäº›å°ç²¾çµã€‚è®©æˆ‘ä»¬ä¹Ÿä¸ºæµ‹è¯•ç›®çš„æ·»åŠ ä¸€ä¸ªå°å°çš„è¡¨å•ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Pokemon</span>(<span class="params">&#123;pokemonToGet&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [pokemon, setPokemon] = React.useState(<span class="literal">null</span>)</span><br><span class="line">  React.useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    fetch(<span class="string">`https://pokeapi.co/api/v2/pokemon/<span class="subst">$&#123;pokemonToGet&#125;</span>/`</span>)</span><br><span class="line">    .then(<span class="function"><span class="params">res</span> =&gt;</span> res.json())</span><br><span class="line">    .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      setPokemon(res)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;, [pokemonToGet]) <span class="comment">// get a new pokemon with the pokemonToGet prop changes</span></span><br><span class="line">  <span class="keyword">const</span> style = &#123;<span class="attr">textTransform</span>: <span class="string">'capitalize'</span>&#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">    &#123; pokemon</span><br><span class="line">      ? <span class="xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line">        &lt;img src=&#123;pokemon.sprites.front_default&#125;</span><br><span class="line"><span class="xml">          alt=&#123;'Image of ' + pokemon.name&#125;/&gt;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&#123;style&#125;</span>&gt;</span>Name: &#123;pokemon.name&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">        &lt;p style=&#123;style&#125;&gt;</span><br><span class="line">          Type: &#123;pokemon.types.map(x =&gt; x.type.name).join(', ')&#125;</span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">      : <span class="string">'Loading...'</span></span><br><span class="line">    &#125;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">function PokemonForm() &#123;</span></span><br><span class="line"><span class="regexp">  const [inputValue, setInputValue] = React.useState("rowlet")</span></span><br><span class="line"><span class="regexp">  const [pokemonToGet, setPokemonToGet] = React.useState("gengar")</span></span><br><span class="line"><span class="regexp">  function getPokemon() &#123;</span></span><br><span class="line"><span class="regexp">    setPokemonToGet(inputValue.trim().toLowerCase())</span></span><br><span class="line"><span class="regexp">    setInputValue("")</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">  return (</span></span><br><span class="line"><span class="regexp">    &lt;div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;input onChange=&#123;(e) =&gt; setInputValue(e.target.value)&#125;</span></span><br><span class="line"><span class="regexp">        value=&#123;inputValue&#125; type="text"/</span>&gt;</span><br><span class="line">      &lt;button onClick=&#123;getPokemon&#125;&gt;</span><br><span class="line">        Get Pokemon</span><br><span class="line">      &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">      &lt;Pokemon pokemonToGet=&#123;pokemonToGet&#125; /</span>&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">render(&lt;PokemonForm /</span>&gt;)</span><br></pre></td></tr></table></figure><p>&emsp;&emsp;å¾ˆå¥½ï¼Œç°åœ¨æˆ‘ä»¬çš„ç»„ä»¶æ ¹æ®æˆ‘ä»¬çš„é“å…·å˜åŒ–è·å–äº†ä¸€ä¸ªæ–°çš„å°ç²¾çµã€‚å¦‚æœä½¿ç”¨ç±»ï¼Œæˆ‘ä»¬å°±å¿…é¡»ä½¿ç”¨<code>componentDidUpdate</code>ä¹‹ç±»çš„ä¸œè¥¿æ¥è¾¾åˆ°ç±»ä¼¼çš„æ•ˆæœã€‚<br>&emsp;&emsp;Ryan Florenceåœ¨æ¨ç‰¹ä¸Šå¯¹useEffectçš„ç”¨æ³•åšäº†å¾ˆå¥½çš„æ€»ç»“ã€‚</p><blockquote><p>The question is not â€œwhen does this effect runâ€ the question is â€œwith which state does this effect synchronize withâ€<br>  useEffect(fn) // all state<br>  useEffect(fn, []) // no state<br>  useEffect(fn, [these, states])</p></blockquote><p>&emsp;&emsp;ä»–æåˆ°çš„ â€œæ‰€æœ‰çŠ¶æ€ â€œçš„æƒ…å†µï¼Œå³ä½ æ²¡æœ‰ä¼ å…¥ä»»ä½•ä¾èµ–å…³ç³»çš„æƒ…å†µæ˜¯ä¸€ä¸ªå¥‡æ€ªçš„æƒ…å†µã€‚æˆ‘ä¸ªäººä»æœªå‘ç°å®ƒçš„ç”¨é€”ã€‚æˆ‘ä»¬çŸ¥é“æ•´ä¸ªç»„ä»¶åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½ä¼šè¿è¡Œï¼Œæ‰€ä»¥æˆ‘æƒ³çŸ¥é“æ˜¯å¦æœ‰ä¸€äº›å¥‡æ€ªçš„è¾¹ç¼˜æƒ…å†µéœ€è¦ä½ ä½¿ç”¨<code>useEffect(fn)</code>è€Œä¸ä½¿ç”¨ä»»ä½•ä¾èµ–é˜µåˆ—ã€‚åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œå¤§å¤šæ•°æ—¶å€™ä½ éƒ½ä¼šç”¨è¿™ä¸ªæ–¹æ³•ï¼š<code>useEffect(fn, [these, states])</code>ã€‚</p><h5 id="UseEffectå’ŒPrevious-State-äº‹æƒ…è´¥éœ²çš„åœ°æ–¹ã€‚"><a href="#UseEffectå’ŒPrevious-State-äº‹æƒ…è´¥éœ²çš„åœ°æ–¹ã€‚" class="headerlink" title="UseEffectå’ŒPrevious State: äº‹æƒ…è´¥éœ²çš„åœ°æ–¹ã€‚"></a>UseEffectå’ŒPrevious State: äº‹æƒ…è´¥éœ²çš„åœ°æ–¹ã€‚</h5><p>&emsp;&emsp;åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒuseEffectçš„å¿ƒç†æ¨¡å‹ä¼¼ä¹å¾ˆç®€å•ï¼šå°†å®ƒä¸ä½ é€‰æ‹©çš„æŸäº›çŠ¶æ€å˜åŒ–åŒæ­¥ã€‚é—®é¢˜æ˜¯ï¼Œå½“ä½ éœ€è¦åœ¨ä¸€ä¸ªæ•ˆæœä¸­å¼•ç”¨è¯¥çŠ¶æ€ï¼Œè€Œä¸ä»…ä»…æ˜¯çŸ¥é“å®ƒæ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ã€‚<br>&emsp;&emsp;åœ¨useEffectä¸­ï¼Œä½ æ— æ³•è·å¾—å¯¹å½“å‰çŠ¶æ€çš„è®¿é—®ã€‚<br>&emsp;&emsp;åœ¨æˆ‘ä»¬çš„APIè°ƒç”¨ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰çœ‹åˆ°è¿™ä¸€ç‚¹ï¼Œå› ä¸ºæˆ‘ä»¬åªæ˜¯è¦†ç›–äº†ä¹‹å‰çš„çŠ¶æ€ã€‚<br>&emsp;&emsp;è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Timer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = React.useState(<span class="number">0</span>);</span><br><span class="line">  React.useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> intervalId = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        setCount(count + <span class="number">1</span>)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> clearInterval(intervalId)</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;The count is: &#123;count&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p>&emsp;&emsp;ä¼¼ä¹æˆ‘ä»¬åšäº†æ‰€æœ‰æ­£ç¡®çš„äº‹æƒ…ï¼ˆç”šè‡³æ¸…ç†äº†å¸è½½æ—¶çš„å‰¯ä½œç”¨ï¼‰ï¼Œä½†æˆ‘ä»¬çš„è®¡æ•°å™¨æ²¡æœ‰é€’å¢ã€‚è¿™æ˜¯ä¸€ä¸ªé—®é¢˜å—ï¼Ÿæˆ‘ä»¬æ˜¯å¦æ— æ³•è®¿é—®setIntervalæ‰€å±çš„çª—å£å¯¹è±¡ï¼Ÿ<br>&emsp;&emsp;ä¸æ˜¯ï¼Œä¹Ÿä¸æ˜¯ã€‚å¦‚æœä½ æŠŠconsole.logæ·»åŠ åˆ°é‚£ä¸ªé—´éš”ä¸­ï¼Œä½ ä¼šçœ‹åˆ°å®ƒæ¯ç§’é’Ÿéƒ½åœ¨è·³åŠ¨ã€‚<br>&emsp;&emsp;æˆ‘å¯ä»¥è¯æ˜ç»™ä½ çœ‹:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Timer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = React.useState(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> [randomNum, setRandomNum] = React.useState(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">  React.useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> intervalId = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      setCount(count + <span class="number">1</span>)</span><br><span class="line">      setRandomNum(<span class="built_in">Math</span>.random())</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> clearInterval(intervalId)</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;The count is: &#123;count&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">      &lt;p&gt;RandomNum is &#123;randomNum&#125;&lt;/</span>p&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p>&emsp;&emsp;æ³¨æ„ï¼Œæˆ‘ä»¬æ¯ç§’é’Ÿéƒ½ä¼šå¾—åˆ°ä¸€ä¸ªæ–°çš„éšæœºæ•°ã€‚æˆ‘ä»¬çš„æ—¶é—´é—´éš”ä»£ç æ˜¯å¥½çš„ã€‚<br>&emsp;&emsp;æˆ‘ä»¬èƒ½å¤Ÿè®¾ç½®æ–°çš„çŠ¶æ€ï¼Œä½†æ— æ³•è®¿é—®å½“å‰çŠ¶æ€ã€‚<br>&emsp;&emsp;è¿™å°±æ˜¯ä¸€ä¸ª â€œé™ˆæ—§çš„é—­åŒ…â€ã€‚æˆ‘ä¸ä¼šå»è®¨è®ºé—­åŒ…ï¼Œä½†åªéœ€çŸ¥é“ï¼Œç”±äºReact/hooksçš„å®ç°ï¼Œåœ¨æˆ‘ä»¬çš„é—´éš”å‡½æ•°ä¸­ï¼Œcountå˜é‡æ€»æ˜¯ä¼šæ˜¯0ã€‚è¿™æ˜¯ä¸€ä¸ªæ—§çš„å‚è€ƒã€‚<br>&emsp;&emsp;äº‹å®è¯æ˜ï¼Œåƒä¸Šé¢è¿™æ ·çš„ç®€å•ä¾‹å­æœ‰ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œæ­£å¦‚John Tuckeræ‰€æŒ‡å‡ºçš„ï¼ˆè°¢è°¢Johnï¼ï¼‰ã€‚å’ŒåŸºäºç±»çš„ç»„ä»¶ä¸­çš„setStateä¸€æ ·ï¼ŒuseStateä¹Ÿå¯ä»¥æ¥å—ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œæ¥æ”¶ä¹‹å‰çš„çŠ¶æ€ä½œä¸ºä¸€ä¸ªå‚æ•°ã€‚Reactæ–‡æ¡£ä¹Ÿæ³¨æ„åˆ°äº†è¿™ä¸€ç‚¹ã€‚<br>&emsp;&emsp;ä¸‹é¢æ˜¯ä¸€ä¸ªå¿«é€Ÿä¿®å¤çš„ä¾‹å­ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Timer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = React.useState(<span class="number">0</span>);</span><br><span class="line">  React.useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> intervalId = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//let's pass a function instead</span></span><br><span class="line">      <span class="comment">//the argument is the current state</span></span><br><span class="line">      setCount(<span class="function"><span class="params">count</span> =&gt;</span> count + <span class="number">1</span>)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> clearInterval(intervalId)</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;The count is: &#123;count&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p>&emsp;&emsp;ä¸è¿‡ï¼Œè¿™ä»ç„¶ä¸èƒ½è§£å†³æˆ‘ä»¬æ‰€æœ‰çš„é—®é¢˜ã€‚å¦‚æœä½ éœ€è¦åœ¨useEffectä¸­è®¿é—®æœ€æ–°çš„çŠ¶æ€ï¼Œä½†ä¸æ›´æ–°å®ƒï¼Œä½ å°†ä¸å¾—ä¸å¼€å§‹ç”¨setStateå›è°ƒæ¥åŒ…è£…ä½ çš„useEffectä»£ç ï¼Œç„¶ååœ¨æœ€åè¿”å›æœªæ”¹å˜çš„çŠ¶æ€ã€‚è¿™å¾ˆå¿«å°±ä¼šå˜æˆä¸€ä¸ªç»å¯¹çš„æ··ä¹±ï¼Œç‰¹åˆ«æ˜¯å½“ä½ åœ¨å¤„ç†å¤šä¸ªçŠ¶æ€å€¼çš„æ—¶å€™ã€‚<br>&emsp;&emsp;å¦ä¸€ä¸ªå¯èƒ½çš„è§£å†³æ–¹æ¡ˆæ˜¯åªä½¿ç”¨useReducerï¼Œå› ä¸ºå®ƒå¯ä»¥æ¥æ”¶ä¹‹å‰çš„çŠ¶æ€ï¼Œä½†æ˜¯ç”¨å‰¯ä½œç”¨å¡«å……ä½ çš„reducerä¹Ÿæ˜¾å¾—éå¸¸æ··ä¹±ï¼Œè€Œä¸”æˆ‘ä¸å»ºè®®ä»»ä½•äººå®Œå…¨åœæ­¢ä½¿ç”¨useStateã€‚<br>&emsp;&emsp;æ— è®ºå¦‚ä½•ï¼Œåœ¨å†™é’©å­çš„æ—¶å€™ï¼Œæˆ‘å·²ç»é™·å…¥äº†é™ˆæ—§çš„é—­åŒ…é™·é˜±å¾ˆå¤šå¾ˆå¤šæ¬¡ã€‚æˆ‘ç”šè‡³ä¸çŸ¥é“å®ƒæœ‰ä¸ªåå­—ï¼Œç›´åˆ°æˆ‘åœ¨SvelteèƒŒåçš„äººRich Harrisçš„æ¼”è®²ä¸­çœ‹åˆ°å®ƒ<br>&emsp;&emsp;æ˜¾ç„¶ï¼Œæˆ‘ä¹Ÿä¸æ˜¯å”¯ä¸€ä¸€ä¸ªåœ¨é’©å­ä¸Šè¢«å®ƒä»¬ç»Šå€’çš„äººã€‚<br><img src="https://leewarrick.com/blog/static/5a5dbcc6667a5da9eeabc5cbe90a1427/ed46b/staleclosures.png" alt="Rich Harrisçš„"><br>&emsp;&emsp; <strong>Reactç”šè‡³åœ¨ä»–ä»¬çš„æ–‡æ¡£ä¸­æåˆ°äº†è¿™ä¸€ç‚¹ã€‚</strong></p><blockquote><p>â€œAny function inside a component, including event handlers and effects, â€œseesâ€ the props and state from the render it was created in.â€<br>  è¯‘ï¼šç»„ä»¶å†…çš„ä»»ä½•åŠŸèƒ½ï¼ŒåŒ…æ‹¬äº‹ä»¶å¤„ç†ç¨‹åºå’Œæ•ˆæœï¼Œéƒ½èƒ½ â€œçœ‹åˆ° â€œå®ƒæ‰€åˆ›å»ºçš„æ¸²æŸ“ä¸­çš„é“å…·å’ŒçŠ¶æ€ã€‚<br>&emsp;&emsp;æˆ‘ä¹‹å‰è¯»è¿‡è¿™ä¸ªï¼Œåœ¨çœŸæ­£æ·±å…¥äº†è§£è¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œæˆ‘è§‰å¾—æ²¡ä»€ä¹ˆæ„ä¹‰ã€‚æˆ‘æƒ³è±¡è¿™å¯èƒ½æ˜¯Reactçš„ä¸€ä¸ªä¸å¥½çš„ç‚¹ï¼Œæ‰€ä»¥ä¹Ÿè®¸ä»–ä»¬ä¸å¸Œæœ›å¤ªå¤§å£°åœ°å«å‡ºæ¥ã€‚<br>&emsp;&emsp;ç„¶è€Œï¼ŒDan Abramovåœ¨ä»–çš„åšå®¢ä¸­æ›´å¥½åœ°æè¿°äº†è¿™ä¸ªé—®é¢˜ï¼Œç”šè‡³æä¾›äº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆã€‚<br>â€œEffects always â€œseeâ€ props and state from the render they were defined in. That helps prevent bugs but in some cases can be annoying. For those cases, you can explicitly maintain some value in a mutable ref.â€<br>  è¯‘ï¼šæ•ˆæœæ€»æ˜¯ â€œçœ‹åˆ° â€œå®ƒä»¬æ‰€å®šä¹‰çš„æ¸²æŸ“ä¸­çš„é“å…·å’ŒçŠ¶æ€ã€‚è¿™æœ‰åŠ©äºé˜²æ­¢bugï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ä¼šå¾ˆçƒ¦äººã€‚å¯¹äºè¿™äº›æƒ…å†µï¼Œä½ å¯ä»¥æ˜ç¡®åœ°åœ¨ä¸€ä¸ªå¯å˜çš„ä¸Šä¸‹æ–‡ä¸­ä¿å­˜ä¸€äº›å€¼ã€‚</p></blockquote><p>&emsp;&emsp;è¿™å¾ˆæœ‰å¸®åŠ©ï¼Œå› ä¸ºå®ƒä»¥useRefçš„å½¢å¼æä¾›äº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼ˆæ„Ÿè°¢Danï¼ï¼‰ï¼Œä½†å®ƒè®©æˆ‘å¯¹å¦‚ä½•å¸®åŠ©é¿å…è¿™ä¸ªé—®é¢˜ä¸€æ— æ‰€çŸ¥ï¼ˆä¸»è¦æ˜¯å› ä¸ºæˆ‘ä¸äº†è§£useRefï¼‰ã€‚</p><h5 id="ä»€ä¹ˆæ˜¯â€œrefâ€ï¼Œä½ ä¼šæ€ä¹ˆä½¿ç”¨å®ƒ"><a href="#ä»€ä¹ˆæ˜¯â€œrefâ€ï¼Œä½ ä¼šæ€ä¹ˆä½¿ç”¨å®ƒ" class="headerlink" title="ä»€ä¹ˆæ˜¯â€œrefâ€ï¼Œä½ ä¼šæ€ä¹ˆä½¿ç”¨å®ƒ"></a>ä»€ä¹ˆæ˜¯â€œrefâ€ï¼Œä½ ä¼šæ€ä¹ˆä½¿ç”¨å®ƒ</h5><p>&emsp;&emsp;ä¼ ç»Ÿä¸Šï¼Œå¼•ç”¨çš„ç›®çš„æ˜¯è®©ä½ ç›´æ¥è®¿é—®ä¸€ä¸ªhtmlå…ƒç´ ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ éœ€è¦å…³æ³¨ä¸€ä¸ªè¾“å…¥å­—æ®µã€‚ä½ å¿…é¡»è·³å‡ºReactï¼Œä½¿ç”¨å¸¸è§„çš„JavaScriptæ¥è°ƒç”¨.focus()ã€‚é’©å­å®é™…ä¸Šè®©è¿™ä¸€åˆ‡å˜å¾—ç›¸å½“ç®€å•ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">InputField</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> inputRef = React.useRef()</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;input type=<span class="string">"text"</span> ref=&#123;inputRef&#125; /&gt;</span><br><span class="line">      &lt;button onClick=&#123;() =&gt; inputRef.current.focus()&#125;&gt;</span><br><span class="line">        Click to Focus the input</span><br><span class="line">      &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>&emsp;&emsp;å¾ˆå¥½! å½“æˆ‘ä»¬éœ€è¦çš„æ—¶å€™ï¼ŒRefsæ˜¯è®¿é—®æœ¬åœ°DOM APIsçš„ä¸€ä¸ªç®€å•çš„é€ƒç”Ÿé€šé“ã€‚<br>&emsp;&emsp;â€¦ä½†è¿™å¦‚ä½•å¸®åŠ©æˆ‘ä»¬è§£å†³æˆ‘ä»¬é™ˆæ—§çš„å…³é—­è®¡æ•°å™¨çš„ä¾‹å­å‘¢ï¼Ÿ</p><h5 id="ä½¿ç”¨â€œRefsâ€æ¥é¿å…é™ˆæ—§çš„é—­åŒ…"><a href="#ä½¿ç”¨â€œRefsâ€æ¥é¿å…é™ˆæ—§çš„é—­åŒ…" class="headerlink" title="ä½¿ç”¨â€œRefsâ€æ¥é¿å…é™ˆæ—§çš„é—­åŒ…"></a>ä½¿ç”¨â€œRefsâ€æ¥é¿å…é™ˆæ—§çš„é—­åŒ…</h5><p>&emsp;&emsp;Reactæ–‡æ¡£å°†â€œRefsâ€æ¯”ä½œ â€œå®ä¾‹å˜é‡â€ã€‚æˆ‘ä¸çŸ¥é“é‚£æ˜¯ä»€ä¹ˆæ„æ€ï¼ˆè°¢è°¢ç»´åŸºç™¾ç§‘ï¼‰ï¼Œæ‰€ä»¥æˆ‘è§‰å¾—é‚£æ²¡ä»€ä¹ˆç”¨ã€‚<br>&emsp;&emsp;æˆ‘è®¾æ³•é€šè¿‡è¿™æ ·æ€è€ƒæ¥ç†è§£Refsçš„å«ä¹‰ã€‚<br>&emsp;&emsp;<strong>Refså­˜åœ¨äºé‡æ–°æ¸²æŸ“å‘¨æœŸä¹‹å¤–ã€‚</strong><br>&emsp;&emsp;<strong>æŠŠRefsçœ‹ä½œæ˜¯ä½ è®¾ç½®åœ¨ä¸€è¾¹çš„ä¸€ä¸ªå˜é‡ã€‚å½“ä½ çš„ç»„ä»¶é‡æ–°è¿è¡Œæ—¶ï¼Œå®ƒä¼šå¾ˆé«˜å…´åœ°è·³è¿‡è¿™ä¸ªåå°„ï¼Œç›´åˆ°ä½ ç”¨<code>.current</code>è°ƒç”¨å®ƒã€‚</strong><br>&emsp;&emsp;è®©æˆ‘ä»¬çœ‹çœ‹å¯¹æˆ‘ä»¬çš„å®šæ—¶å™¨ä¾‹å­çš„ä¿®æ­£ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Timer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = React.useState(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> countRef = React.useRef(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">  React.useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> intervalId = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      countRef.current = countRef.current + <span class="number">1</span></span><br><span class="line">      setCount(countRef.current)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> clearInterval(intervalId)</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;The count is: &#123;count&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p>&emsp;&emsp;å¦‚æœæˆ‘ä»¬æƒ³æŠŠè®¡æ—¶å™¨åœåœ¨æ¯”å¦‚è¯´10çš„ä½ç½®ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°ç”¨refsæ¥åšã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Timer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = React.useState(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> countRef = React.useRef(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">  React.useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> intervalId = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (countRef.current === <span class="number">10</span>)</span><br><span class="line">        <span class="keyword">return</span> clearInterval(intervalId)</span><br><span class="line">      countRef.current = countRef.current + <span class="number">1</span></span><br><span class="line">      setCount(countRef.current)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> clearInterval(intervalId)</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;The count is: &#123;count&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p>&emsp;&emsp;ä¸ºäº†ä¾¿äºæ¯”è¾ƒï¼Œè¿™é‡Œæ˜¯ä½¿ç”¨setStateå›è°ƒæ–¹æ³•çš„æ›¿ä»£æ–¹æ¡ˆã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Timer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = React.useState(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">  React.useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> intervalId = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        setCount(<span class="function"><span class="params">count</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (count === <span class="number">10</span>) &#123;</span><br><span class="line">            clearInterval(intervalId)</span><br><span class="line">            <span class="keyword">return</span> count</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">else</span> <span class="keyword">return</span> count + <span class="number">1</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> clearInterval(intervalId)</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;The count is: &#123;count&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p>&emsp;&emsp;å¯ä»¥çœ‹åˆ°è¿™å¾ˆå¿«å°±ä¼šæ¥è¿‘å›è°ƒåœ°ç‹±ï¼Œæ‰€ä»¥å¦‚æœä½ åœ¨åšæ›´å¤æ‚çš„äº‹æƒ…ï¼Œæˆ‘ä¼šæé†’ä½ ä¸è¦ä½¿ç”¨å›è°ƒæ–¹æ³•ã€‚</p><h5 id="State-Versus-Refs"><a href="#State-Versus-Refs" class="headerlink" title="State Versus Refs"></a>State Versus Refs</h5><p>&emsp;&emsp;æ˜¯å¦æœ‰å¯èƒ½å®Œå…¨æŠ›å¼ƒçŠ¶æ€è€Œåªä½¿ç”¨refsï¼Ÿ<br>&emsp;&emsp;ä½ å¯èƒ½å€¾å‘äºè®¤ä¸ºä½ å¯ä»¥ç”¨ refs æ¥ä»£æ›¿ä½ çš„ç»„ä»¶çš„çŠ¶æ€ï¼Œä»è€Œé¿å¼€æ‰€æœ‰è¿™äº›å¥‡æ€ªçš„è¡Œä¸ºã€‚<br>&emsp;&emsp;ä½ ä¸èƒ½è¿™æ ·åšã€‚refsä¸æ˜¯ååº”æ€§çš„ã€‚å½“ä½ æ”¹å˜ä¸€ä¸ª ref æ—¶ï¼Œå®ƒä¸ä¼šå¯¼è‡´é‡æ–°æ¸²æŸ“ã€‚è®°ä½ï¼Œ<strong>å®ƒä»¬å­˜åœ¨äºé‡æ–°æ¸²æŸ“å‘¨æœŸä¹‹å¤–</strong>ã€‚<br>&emsp;&emsp;ä»¥ä¸‹æ˜¯ä¸å¯èƒ½çš„:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Timer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> count = React.useRef(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">  React.useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> intervalId = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      count.current = count.current + <span class="number">1</span></span><br><span class="line">      <span class="comment">//console.log('Ref example count: ' + count.current)</span></span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> clearInterval(intervalId)</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;The count is: &#123;count.current&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p>&emsp;&emsp;é‚£ä¸ªç»„ä»¶å®é™…ä¸Šæ˜¯åœ¨å†…éƒ¨è¿›è¡Œè®¡æ•°ï¼Œä½†å®ƒå¹¶æ²¡æœ‰å¯¼è‡´HTMLçš„æ›´æ–°ã€‚ä½ éœ€è¦useStateæ¥å®ç°è¿™ä¸€ç‚¹ã€‚å¦‚æœä½ ä¸ç›¸ä¿¡æˆ‘çš„è¯ï¼Œè¯·ç»§ç»­å–æ¶ˆå¯¹console.logçš„æ³¨é‡Šï¼‰ã€‚<br>&emsp;&emsp;è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­æ¥è¯æ˜Refsä¸stateã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = React.useState(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> countRef = React.useRef(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;State Count: &#123;count&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">      &lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt;</span></span><br><span class="line"><span class="regexp">        Increment State Count</span></span><br><span class="line"><span class="regexp">      &lt;/</span>button&gt;</span><br><span class="line">      &lt;p&gt;Ref Count: &#123;countRef.current&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">      &lt;button onClick=&#123;() =&gt; countRef.current = countRef.current + 1&#125;&gt;</span></span><br><span class="line"><span class="regexp">        Increment Ref Count</span></span><br><span class="line"><span class="regexp">      &lt;/</span>button&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">render(&lt;Counter/</span>&gt;)</span><br></pre></td></tr></table></figure><p>&emsp;&emsp;åœ¨ä½ é€šè¿‡è®¾ç½®çŠ¶æ€è§¦å‘é‡æ–°æ¸²æŸ“ä¹‹å‰ï¼Œä½ ä¸ä¼šçœ‹åˆ°Refè®¡æ•°çš„å˜åŒ–ã€‚</p><h5 id="ç¦»åˆ«æ„Ÿè¨€"><a href="#ç¦»åˆ«æ„Ÿè¨€" class="headerlink" title="ç¦»åˆ«æ„Ÿè¨€"></a>ç¦»åˆ«æ„Ÿè¨€</h5><p>&emsp;&emsp;æˆ‘å–œæ¬¢Reactä¸­çš„é’©å­å’ŒåŠŸèƒ½ç»„ä»¶ï¼Œä½†æˆ‘æ‰€æ¦‚è¿°çš„æ€ªå¼‚ç°è±¡è®©æˆ‘æš‚åœäº†ã€‚æˆ‘ä¸å–œæ¬¢è¢«è¦æ±‚å¯¹Reactçš„å†…éƒ¨å·¥ä½œäº†è§£è¿™ä¹ˆå¤šæ‰èƒ½ä½¿ç”¨å®ƒã€‚æˆ‘è®¤ä¸ºè¿™ç»™å­¦ä¹ Reactçš„äººå¸¦æ¥äº†éšœç¢ï¼Œæˆ‘å¸Œæœ›å°†æ¥Reactå›¢é˜Ÿèƒ½æƒ³å‡ºä¸€äº›æ›´å¥½çš„æ–¹æ³•æ¥å¤„ç†è¿™äº›é—®é¢˜ã€‚</p><h4 id="ç¿»è¯‘ç»“æŸ"><a href="#ç¿»è¯‘ç»“æŸ" class="headerlink" title="ç¿»è¯‘ç»“æŸ"></a>ç¿»è¯‘ç»“æŸ</h4><p>å¾ˆæ£’çš„æ–‡ç« ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;æ³¨æ„&quot;&gt;&lt;a href=&quot;#æ³¨æ„&quot; class=&quot;headerlink&quot; title=&quot;æ³¨æ„&quot;&gt;&lt;/a&gt;æ³¨æ„&lt;/h4&gt;&lt;p&gt;æœ¬æ–‡æ˜¯ä¸€ç‰‡ç¿»è¯‘ï¼ŒåŸæ–‡æ¥è‡ª&lt;a class=&quot;link&quot;   href=&quot;https://leewarrick.com/&quot;  target=&quot;
      
    
    </summary>
    
    
      <category term="react" scheme="https://feidom-up.github.io/categories/react/"/>
    
    
      <category term="react" scheme="https://feidom-up.github.io/tags/react/"/>
    
  </entry>
  
  <entry>
    <title>Touchå’ŒMouseäº‹ä»¶</title>
    <link href="https://feidom-up.github.io/2021/06/07/touch%E5%92%8Cmouse%E4%BA%8B%E4%BB%B6/"/>
    <id>https://feidom-up.github.io/2021/06/07/touch%E5%92%8Cmouse%E4%BA%8B%E4%BB%B6/</id>
    <published>2021-06-07T00:28:00.000Z</published>
    <updated>2021-06-07T02:25:21.190Z</updated>
    
    <content type="html"><![CDATA[<h4 id="ä¸€ä¸ªé—®é¢˜å¼•å‘çš„æ€è€ƒ"><a href="#ä¸€ä¸ªé—®é¢˜å¼•å‘çš„æ€è€ƒ" class="headerlink" title="ä¸€ä¸ªé—®é¢˜å¼•å‘çš„æ€è€ƒ"></a>ä¸€ä¸ªé—®é¢˜å¼•å‘çš„æ€è€ƒ</h4><p>ç§»åŠ¨ç«¯çš„ä¸€ä¸ªé¡µé¢ï¼ŒçŒœæµ‹å“ˆï¼Œhoveräº‹ä»¶&amp;mouseoveräº‹ä»¶éƒ½è¢«ç›‘å¬æ—¶ï¼Œmouseåº”è¯¥å¤±æ•ˆå§ã€‚å› ä¸ºç§»åŠ¨ç«¯åªæœ‰ç‚¹è§¦ï¼Œæ²¡æœ‰mouseã€‚<br>äº‹å®ï¼šå‡ºç°mouseoverï¼ˆå®šä¹‰äº†è¿™ä¸ªæ—¶å€™çš„æ ·å¼ï¼‰çŠ¶æ€ï¼Œå°±å¾ˆå¥‡æ€ªã€‚<br>ç„¶åï¼Œæœ¬ä»¥ä¸ºmouseå’Œtouchåœ¨æµè§ˆå™¨ä¸­æ˜¯è¿™æ ·çš„ï¼š</p><ul><li>pcç«¯ï¼šmouseäº‹ä»¶ç”Ÿæ•ˆï¼Œtouchäº‹ä»¶<del>å¤±æ•ˆ</del></li><li>ç§»åŠ¨ç«¯ï¼šmouseäº‹ä»¶<del>å¤±æ•ˆ</del>ï¼Œtouchäº‹ä»¶ç”Ÿæ•ˆ</li><li><strong>ä½†æ˜¯</strong>ï¼Œç»“æœæ˜¯è¿™æ ·çš„ï¼š<br>åŒæ—¶ç›‘å¬äº†mouseå’Œtouchä¸¤ç§äº‹ä»¶ï¼Œåœ¨iosç§»åŠ¨è®¾å¤‡ä¸­çš„safariæµè§ˆå™¨ä¸­ï¼Œç‚¹å‡»è§¦å‘touchäº‹ä»¶ä¹‹åï¼Œå®šä¹‰çš„mouseoveräº‹ä»¶ä¹Ÿè§¦å‘äº†ï¼Œäº§ç”Ÿäº†bugã€‚</li></ul><h4 id="ç ”ç©¶å®ƒ"><a href="#ç ”ç©¶å®ƒ" class="headerlink" title="ç ”ç©¶å®ƒ"></a>ç ”ç©¶å®ƒ</h4><p>æ•²é»‘æ¿ï¼š</p><ul><li>pcç«¯ï¼šonTouchäº‹ä»¶ä¼šè¢«å±è”½ã€‚</li><li>ç§»åŠ¨ç«¯ï¼šä¸¤ç§äº‹ä»¶éƒ½ä¼šè¢«è§¦å‘ã€‚ä¸”é¡ºåºæ˜¯è¿™æ ·çš„ï¼š<ol><li>touchstart</li><li>touchmove</li><li>touchend</li><li>mouseover</li><li>mousemove</li><li>mousedown</li><li>mouseup</li><li>click</li></ol></li></ul><p>å¥½å§ï¼Œè¿™æ˜¯è¿™ä¸€åˆ‡å‡ºç°çš„åŸå› ã€‚<br>åœ¨é€‚é…å¤šç§è®¾å¤‡çš„é¡¹ç›®ä¸­ï¼Œæ€ä¹ˆåŒºåˆ†è¿™ä¸¤ç§äº‹ä»¶ï¼Œè®©mouseäº‹ä»¶åœ¨ç§»åŠ¨ç«¯å¤±æ•ˆå‘¢ã€‚</p><h4 id="æ–¹æ³•ï¼š"><a href="#æ–¹æ³•ï¼š" class="headerlink" title="æ–¹æ³•ï¼š"></a>æ–¹æ³•ï¼š</h4><ul><li>è®¾ç½®ä¸€ä¸ªflagï¼Œmouseäº‹ä»¶æ—¶åˆ¤æ–­touchFlagå†³å®šreturnæˆ–è€…æ‰§è¡Œã€‚</li><li>åˆ†å¼€å†™ï¼Œåˆ¤æ–­è®¾å¤‡åéœ€è¦mouseçš„å†™mouseï¼Œéœ€è¦touchçš„å†™touchã€‚</li><li>æœ€å¥½çš„æ–¹æ³•ï¼špreventDefault()<blockquote><p><strong>Use preventDefault() inside touch event handlers, so the default mouse-emulation handling doesnâ€™t occur.</strong></p></blockquote></li></ul><h4 id="preventDefault"><a href="#preventDefault" class="headerlink" title="preventDefault()"></a>preventDefault()</h4><p>ä¸“é—¨æŒ‘å‡ºæ¥è¯´ä¸€ä¸‹è¿™ä¸ªï¼špreventDefault()ã€è¯¥æ–¹æ³•å°†é€šçŸ¥ Web æµè§ˆå™¨ä¸è¦æ‰§è¡Œä¸äº‹ä»¶å…³è”çš„é»˜è®¤åŠ¨ä½œï¼ˆå¦‚æœå­˜åœ¨è¿™æ ·çš„åŠ¨ä½œï¼‰ã€‚ã€‘<br>äºæ˜¯ï¼Œåœ¨<code>touchstart</code>æ–¹æ³•ä¸­ä½¿ç”¨<code>e.preventDefault()</code>å»é˜»æ­¢ä¹‹åçš„mouseoveräº‹ä»¶ã€‚<br><font color='red'>æŠ¥é”™äº†</font>ï¼šUnable to preventDefault inside passive event listener due to target being treated as passive.</p><blockquote><p>ç¿»è¯‘ï¼š ç”±äºç›®æ ‡è¢«è§†ä¸ºè¢«åŠ¨ï¼Œæ— æ³•åœ¨è¢«åŠ¨äº‹ä»¶ç›‘å¬å™¨å†…é˜²æ­¢ã€‚</p></blockquote><h5 id="passive-çš„äº‹ä»¶ç›‘å¬å™¨"><a href="#passive-çš„äº‹ä»¶ç›‘å¬å™¨" class="headerlink" title="passive çš„äº‹ä»¶ç›‘å¬å™¨"></a>passive çš„äº‹ä»¶ç›‘å¬å™¨</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">addEventListener(type, listener, &#123;</span><br><span class="line">    capture: <span class="literal">false</span>,</span><br><span class="line">    passive: <span class="literal">true</span>,</span><br><span class="line">    once: <span class="literal">false</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä¸‰ä¸ªå±æ€§éƒ½æ˜¯å¸ƒå°”ç±»å‹çš„å¼€å…³ã€‚å…¶ä¸­ capture å±æ€§ç­‰ä»·äºä»¥å‰çš„ useCapture å‚æ•°ï¼›once å±æ€§å°±æ˜¯è¡¨æ˜è¯¥ç›‘å¬å™¨æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œæ‰§è¡Œä¸€æ¬¡åå°±è¢«è‡ªåŠ¨ removeEventListener æ‰ï¼Œè¿˜æ²¡æœ‰æµè§ˆå™¨å®ç°å®ƒï¼›passive å±æ€§åœ¨ Firefox å’Œ Chrome å·²ç»å®ç°ã€‚<br>å¾ˆå¤šç§»åŠ¨ç«¯çš„é¡µé¢éƒ½ä¼šç›‘å¬ touchstart ç­‰ touch äº‹ä»¶ï¼Œåƒè¿™æ ·ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"touchstart"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    ... <span class="comment">// æµè§ˆå™¨ä¸çŸ¥é“è¿™é‡Œä¼šä¸ä¼šæœ‰ e.preventDefault()</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ç”±äº touchstart äº‹ä»¶å¯¹è±¡çš„ cancelable å±æ€§ä¸º trueï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒçš„é»˜è®¤è¡Œä¸ºå¯ä»¥è¢«ç›‘å¬å™¨é€šè¿‡ preventDefault() æ–¹æ³•é˜»æ­¢ï¼Œé‚£å®ƒçš„é»˜è®¤è¡Œä¸ºæ˜¯ä»€ä¹ˆå‘¢ï¼Œé€šå¸¸æ¥è¯´å°±æ˜¯æ»šåŠ¨å½“å‰é¡µé¢ï¼ˆè¿˜å¯èƒ½æ˜¯ç¼©æ”¾é¡µé¢ï¼‰ï¼Œå¦‚æœå®ƒçš„é»˜è®¤è¡Œä¸ºè¢«é˜»æ­¢äº†ï¼Œé¡µé¢å°±å¿…é¡»é™æ­¢ä¸åŠ¨ã€‚ä½†æµè§ˆå™¨æ— æ³•é¢„å…ˆçŸ¥é“ä¸€ä¸ªç›‘å¬å™¨ä¼šä¸ä¼šè°ƒç”¨ preventDefault()ï¼Œå®ƒèƒ½åšçš„åªæœ‰ç­‰ç›‘å¬å™¨æ‰§è¡Œå®Œåå†å»æ‰§è¡Œé»˜è®¤è¡Œä¸ºï¼Œè€Œç›‘å¬å™¨æ‰§è¡Œæ˜¯è¦è€—æ—¶çš„ï¼Œæœ‰äº›ç”šè‡³è€—æ—¶å¾ˆæ˜æ˜¾ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´é¡µé¢å¡é¡¿ã€‚</p><p>Passive Event Listenersï¼šå°±æ˜¯å‘Šè¯‰å‰é¡µé¢å†…çš„äº‹ä»¶ç›‘å¬å™¨å†…éƒ¨æ˜¯å¦ä¼šè°ƒç”¨<code>preventDefault</code>å‡½æ•°æ¥é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºï¼Œä»¥ä¾¿æµè§ˆå™¨æ ¹æ®è¿™ä¸ªä¿¡æ¯æ›´å¥½åœ°åšå‡ºå†³ç­–æ¥ä¼˜åŒ–é¡µé¢æ€§èƒ½ã€‚å½“å±æ€§passiveçš„å€¼ä¸ºtrueçš„æ—¶å€™ï¼Œä»£è¡¨è¯¥ç›‘å¬å™¨å†…éƒ¨ä¸ä¼šè°ƒç”¨<code>preventDefault</code>å‡½æ•°æ¥é˜»æ­¢é»˜è®¤æ»‘åŠ¨è¡Œä¸ºï¼ŒChromeæµè§ˆå™¨ç§°è¿™ç±»å‹çš„ç›‘å¬å™¨ä¸ºè¢«åŠ¨ï¼ˆpassiveï¼‰ç›‘å¬å™¨ã€‚ç›®å‰Chromeä¸»è¦åˆ©ç”¨è¯¥ç‰¹æ€§æ¥ä¼˜åŒ–é¡µé¢çš„æ»‘åŠ¨æ€§èƒ½ï¼Œæ‰€ä»¥Passive Event Listenersç‰¹æ€§å½“å‰ä»…æ”¯æŒmousewheel/touchç›¸å…³äº‹ä»¶ã€‚</p><p><strong>è€—æ—¶æ˜¯ä»€ä¹ˆ</strong><br>å½“ç”¨æˆ·åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šç‚¹å‡»ç½‘é¡µä¸­çš„æŸä¸ªå…ƒç´ æ—¶ï¼Œæ²¡æœ‰ä¸ºç§»åŠ¨äº¤äº’è®¾è®¡çš„ç½‘é¡µåœ¨è§¦æ‘¸å¼€å§‹äº‹ä»¶å’Œå¤„ç†é¼ æ ‡äº‹ä»¶ï¼ˆmousedownï¼‰ä¹‹é—´è‡³å°‘æœ‰300æ¯«ç§’çš„å»¶è¿Ÿã€‚å¦‚æœä½ æœ‰è§¦æ‘¸è®¾å¤‡ï¼Œä½ å¯ä»¥çœ‹çœ‹è¿™ä¸ªä¾‹å­ã€‚æˆ–è€…ï¼Œä½¿ç”¨Chromeæµè§ˆå™¨ï¼Œä½ å¯ä»¥åœ¨Chromeå¼€å‘è€…å·¥å…·ä¸­æ‰“å¼€ â€œæ¨¡æ‹Ÿè§¦æ‘¸äº‹ä»¶â€ï¼Œä»¥å¸®åŠ©ä½ åœ¨éè§¦æ‘¸ç³»ç»Ÿä¸Šæµ‹è¯•è§¦æ‘¸ç•Œé¢!</p><p>è¿™ä¸ªå»¶è¿Ÿæ˜¯ä¸ºäº†è®©æµè§ˆå™¨æœ‰æ—¶é—´åˆ¤æ–­ç”¨æˆ·æ˜¯å¦åœ¨åšå…¶ä»–æ‰‹åŠ¿â€“ç‰¹åˆ«æ˜¯åŒå‡»ç¼©æ”¾ã€‚å¾ˆæ˜æ˜¾ï¼Œåœ¨ä½ æƒ³å¯¹æ‰‹æŒ‡è§¦æ‘¸åšå‡ºå³æ—¶ååº”çš„æƒ…å†µä¸‹ï¼Œè¿™å¯èƒ½æ˜¯ä¸ªé—®é¢˜ã€‚ç›®å‰æ­£åœ¨è¿›è¡Œçš„å·¥ä½œæ˜¯è¯•å›¾é™åˆ¶è¿™ç§å»¶è¿Ÿè‡ªåŠ¨å‘ç”Ÿçš„æƒ…å†µã€‚</p><table><thead><tr><th align="left"></th><th align="left">Chrome for Android</th><th align="left">Android Browser</th><th align="left">Opera Mobile for Android</th><th align="left">Firefox for Android</th><th align="left">Safari iOS</th></tr></thead><tbody><tr><td align="left">Non-scalable viewport</td><td align="left">No delay</td><td align="left">300ms</td><td align="left">300ms</td><td align="left">No delay</td><td align="left">300ms</td></tr><tr><td align="left">No Viewport</td><td align="left">300ms</td><td align="left">300ms</td><td align="left">300ms</td><td align="left">300ms</td><td align="left">300ms</td></tr></tbody></table><p>é¿å…è¿™ç§é—®é¢˜çš„ä¸€ä¸ªç®€å•æ–¹æ³•ï¼Œå°±æ˜¯ç›´æ¥å‘Šè¯‰æµè§ˆå™¨ï¼Œæˆ‘è¿™ä¸ªé¡µé¢ä¸éœ€è¦æ»šåŠ¨ï¼š<code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,user-scalable=no&quot;&gt;</code>ï¼Œä¸€èˆ¬åœ¨ç§»åŠ¨ç«¯è¿™æ ·å†™å¯ä»¥ã€‚</p><p><strong>ç»¼ä¸Š</strong>ï¼š<br>  äº‹ä»¶ç›‘å¬æ—¶ï¼Œè®¾ç½®ç¬¬ä¸‰ä¸ªå‚æ•°ä¸­ï¼špassiveä¸ºfalseï¼Œå‘Šè¯‰æµè§ˆå™¨æˆ‘è¦è‡ªå·±æ§åˆ¶<code>preventDefault</code>å‡½æ•°æ¥é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºã€‚</p><p><strong>å¦‚ä¸‹</strong>ï¼š<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">private onTouchStart(e:MouseEvent) &#123;</span><br><span class="line">  e.preventDefault();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'onTouchStart'</span>, e.cancelable);</span><br><span class="line">&#125;</span><br><span class="line">private onMouseOver(e:MouseEvent) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'onMouseOver'</span>, e.cancelable);</span><br><span class="line">&#125;</span><br><span class="line">componentDidMount() &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.touchElement) &#123;</span><br><span class="line">    <span class="keyword">this</span>.touchElement.addEventListener(<span class="string">'touchstart'</span>, <span class="keyword">this</span>.onTouchStart, &#123;<span class="attr">passive</span>: <span class="literal">false</span>&#125;);</span><br><span class="line">    <span class="keyword">this</span>.touchElement.addEventListener(<span class="string">'mouseover'</span>, <span class="keyword">this</span>.onMouseOver, &#123;<span class="attr">passive</span>: <span class="literal">false</span>&#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>  <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div styleName=&#123;<span class="string">'btn-start-wrap'</span>&#125; ref=&#123;</span><br><span class="line">  (ref) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (ref) &#123;</span><br><span class="line">      <span class="keyword">this</span>.touchElement = ref;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;&#125;&gt;</span><br></pre></td></tr></table></figure><br>  ä»¥ä¸Šçš„ä»£ç touchstartåä¸ä¼šè§¦å‘mouseoverã€‚å®ç°äº†é˜»æ­¢ç§»åŠ¨ç«¯ä¹Ÿè§¦å‘mouseäº‹ä»¶çš„é€»è¾‘ã€‚</p><h4 id="å‚è§ï¼š"><a href="#å‚è§ï¼š" class="headerlink" title="å‚è§ï¼š"></a>å‚è§ï¼š</h4><p>  <a class="link"   href="https://www.jianshu.com/p/5bae6433025f"  target="_blank" rel="noopener">Passive Event Listenersâ€”â€”è®©é¡µé¢æ»‘åŠ¨æ›´åŠ æµç•…çš„æ–°ç‰¹æ€§<i class="fas fa-external-link-alt"></i></a><br>  <a class="link"   href="https://www.cnblogs.com/ziyunfei/p/5545439.html"  target="_blank" rel="noopener">ç´«äº‘é£ â€“ passive çš„äº‹ä»¶ç›‘å¬å™¨<i class="fas fa-external-link-alt"></i></a><br>  <a class="link"   href="https://www.html5rocks.com/en/mobile/touchandmouse/"  target="_blank" rel="noopener">touch&amp;mouse<i class="fas fa-external-link-alt"></i></a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;ä¸€ä¸ªé—®é¢˜å¼•å‘çš„æ€è€ƒ&quot;&gt;&lt;a href=&quot;#ä¸€ä¸ªé—®é¢˜å¼•å‘çš„æ€è€ƒ&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ä¸ªé—®é¢˜å¼•å‘çš„æ€è€ƒ&quot;&gt;&lt;/a&gt;ä¸€ä¸ªé—®é¢˜å¼•å‘çš„æ€è€ƒ&lt;/h4&gt;&lt;p&gt;ç§»åŠ¨ç«¯çš„ä¸€ä¸ªé¡µé¢ï¼ŒçŒœæµ‹å“ˆï¼Œhoveräº‹ä»¶&amp;amp;mouseoveräº‹ä»¶éƒ½è¢«ç›‘å¬æ—¶ï¼Œ
      
    
    </summary>
    
    
      <category term="ç§»åŠ¨ç«¯" scheme="https://feidom-up.github.io/categories/%E7%A7%BB%E5%8A%A8%E7%AB%AF/"/>
    
    
      <category term="ç§»åŠ¨ç«¯" scheme="https://feidom-up.github.io/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>webpackPlugins</title>
    <link href="https://feidom-up.github.io/2021/05/28/webpackPlugins/"/>
    <id>https://feidom-up.github.io/2021/05/28/webpackPlugins/</id>
    <published>2021-05-28T02:07:55.000Z</published>
    <updated>2021-05-28T02:15:59.420Z</updated>
    
    <content type="html"><![CDATA[<h4 id="webpack-DefinePlugin"><a href="#webpack-DefinePlugin" class="headerlink" title="webpack.DefinePlugin"></a>webpack.DefinePlugin</h4><ul><li>ç®€ä»‹<br>åœ¨ç¼–è¯‘æ—¶åˆ›å»ºä¸€ä¸ªå¯ä»¥é…ç½®çš„å…¨å±€å˜é‡ï¼Œåœ¨åŒºåˆ†å¼€å‘æ¨¡å¼ï½œç”Ÿäº§æ¨¡å¼çš„ä¸åŒæ—¶ååˆ†æœ‰ç”¨ã€‚</li><li>ä½¿ç”¨ï¼š<ul><li>åœ¨webpackçš„pluginsä¸­ï¼Œå¢åŠ <code>webpack.DefinePlugin(Object)</code>çš„å®ä¾‹</li><li>æ–¹æ³•ä¸­ä¼ å…¥çš„Objectçš„keyå€¼ï¼Œå¯ä»¥åœ¨é¡¹ç›®æ‰€æœ‰importçš„æ–‡ä»¶ä¸­ä½¿ç”¨ã€‚</li><li>ä½¿ç”¨æ—¶å¾—åˆ°çš„æ˜¯keyå¯¹åº”é¢valueï¼Œè¿™é‡Œåœ¨ç¼–è¯‘æ—¶ï¼Œå¹¶ä¸æ˜¯å˜é‡çš„å¼•ç”¨ï¼Œè€Œæ˜¯<strong>ç¼–è¯‘æ—¶ç›´æ¥æ›¿æ¢</strong><blockquote><p>å› ä¸ºè¿™ä¸ªæ’ä»¶ç›´æ¥æ‰§è¡Œæ–‡æœ¬æ›¿æ¢ï¼Œç»™å®šçš„å€¼å¿…é¡»åŒ…å«å­—ç¬¦ä¸²æœ¬èº«å†…çš„å®é™…å¼•å·ã€‚é€šå¸¸ï¼Œæœ‰ä¸¤ç§æ–¹å¼æ¥è¾¾åˆ°è¿™ä¸ªæ•ˆæœï¼Œä½¿ç”¨ â€˜â€œproductionâ€â€˜, æˆ–è€…ä½¿ç”¨ JSON.stringify(â€˜productionâ€™)ã€‚</p></blockquote></li></ul></li><li>æ–‡æ¡£åœ°å€<ul><li><a class="link"   href="https://v4.webpack.docschina.org/plugins/define-plugin/"  target="_blank" rel="noopener">webpack.DefinePlugin<i class="fas fa-external-link-alt"></i></a></li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;webpack-DefinePlugin&quot;&gt;&lt;a href=&quot;#webpack-DefinePlugin&quot; class=&quot;headerlink&quot; title=&quot;webpack.DefinePlugin&quot;&gt;&lt;/a&gt;webpack.DefinePlugin&lt;/h4&gt;&lt;
      
    
    </summary>
    
    
      <category term="webpack" scheme="https://feidom-up.github.io/categories/webpack/"/>
    
    
      <category term="å‰ç«¯å·¥ç¨‹åŒ–" scheme="https://feidom-up.github.io/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/"/>
    
      <category term="webpack" scheme="https://feidom-up.github.io/tags/webpack/"/>
    
  </entry>
  
  <entry>
    <title>vue3çš„æ•°æ®å“åº”å¼ç³»ç»Ÿ</title>
    <link href="https://feidom-up.github.io/2021/03/19/vue3%E7%9A%84%E6%95%B0%E6%8D%AE%E5%93%8D%E5%BA%94%E5%BC%8F%E7%B3%BB%E7%BB%9F/"/>
    <id>https://feidom-up.github.io/2021/03/19/vue3%E7%9A%84%E6%95%B0%E6%8D%AE%E5%93%8D%E5%BA%94%E5%BC%8F%E7%B3%BB%E7%BB%9F/</id>
    <published>2021-03-19T07:54:57.000Z</published>
    <updated>2021-05-06T02:46:51.787Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Vue2-0çš„æ•°æ®ç›‘å¬"><a href="#Vue2-0çš„æ•°æ®ç›‘å¬" class="headerlink" title="Vue2.0çš„æ•°æ®ç›‘å¬"></a>Vue2.0çš„æ•°æ®ç›‘å¬</h3><p><strong>Object.defineProperty</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> object1 = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(object1, <span class="string">'property1'</span>, &#123;</span><br><span class="line">    value: <span class="number">42</span>,</span><br><span class="line">    writable: <span class="literal">false</span>,</span><br><span class="line">    <span class="keyword">get</span>()&#123;&#125;,</span><br><span class="line">    <span class="keyword">set</span>(newValue) &#123; bValue = newValue; &#125;,</span><br><span class="line">    enumerable : <span class="literal">true</span>,</span><br><span class="line">    configurable : <span class="literal">true</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">object1.property1 = <span class="number">77</span>;</span><br><span class="line"><span class="comment">// throws an error in strict mode</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(object1.property1);</span><br><span class="line"><span class="comment">// expected output: 42</span></span><br></pre></td></tr></table></figure><h3 id="Vue3-0çš„æ•°æ®å“åº”å¼ç³»ç»Ÿ"><a href="#Vue3-0çš„æ•°æ®å“åº”å¼ç³»ç»Ÿ" class="headerlink" title="Vue3.0çš„æ•°æ®å“åº”å¼ç³»ç»Ÿ"></a>Vue3.0çš„æ•°æ®å“åº”å¼ç³»ç»Ÿ</h3><p><strong>proxy</strong> get\set</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•ç”¨vue-next(3)æºç ä¸­'packages/reactivity/dist/reactivity.global.js'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123;reactive, effect&#125; = VueObserver;</span><br><span class="line"><span class="comment">//  reactive: æŠŠæ•°æ®å¤„ç†æˆä¸ºå“åº”å¼æ•°æ®</span></span><br><span class="line"><span class="comment">//  effect: </span></span><br><span class="line"><span class="comment">//      1.é¦–å…ˆä¼šæ‰§è¡Œä¸€æ¬¡å¯¹åº”çš„ç›‘å¬å‡½æ•°</span></span><br><span class="line"><span class="comment">//      2.ä¿®æ”¹å¯¹åº”ç›‘å¬å‡½æ•°å†…ä½¿ç”¨çš„å“åº”å¼æ•°æ®ï¼Œå¯¹åº”çš„ç›‘å¬å‡½æ•°å°±ä¼šç«‹å³æ‰§è¡Œï¼Œé‡æ–°æ‰§è¡Œçš„è¿‡ç¨‹å°±ä¼šè·å–æ–°çš„æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> yideng = &#123;<span class="attr">count</span>: <span class="number">0</span>&#125;;</span><br><span class="line"><span class="keyword">const</span> state = reactive(yideng);</span><br><span class="line"><span class="keyword">const</span> fn = <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> count = state.count;</span><br><span class="line">    <span class="keyword">const</span>.log(<span class="string">'å½“å‰çš„count'</span>, count)</span><br><span class="line">    <span class="comment">//render(count)  å¦‚æœåœ¨è¿™è§¦å‘renderæ¸²æŸ“</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">effect(fn)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;Vue2-0çš„æ•°æ®ç›‘å¬&quot;&gt;&lt;a href=&quot;#Vue2-0çš„æ•°æ®ç›‘å¬&quot; class=&quot;headerlink&quot; title=&quot;Vue2.0çš„æ•°æ®ç›‘å¬&quot;&gt;&lt;/a&gt;Vue2.0çš„æ•°æ®ç›‘å¬&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;Object.defineProperty&lt;/str
      
    
    </summary>
    
    
      <category term="vue" scheme="https://feidom-up.github.io/categories/vue/"/>
    
    
      <category term="vue" scheme="https://feidom-up.github.io/tags/vue/"/>
    
      <category term="vueæºç è§£è¯»" scheme="https://feidom-up.github.io/tags/vue%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB/"/>
    
  </entry>
  
  <entry>
    <title>æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹é˜Ÿåˆ—</title>
    <link href="https://feidom-up.github.io/2021/03/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%B9%8B%E9%98%9F%E5%88%97/"/>
    <id>https://feidom-up.github.io/2021/03/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%B9%8B%E9%98%9F%E5%88%97/</id>
    <published>2021-03-17T10:44:26.000Z</published>
    <updated>2021-05-06T02:46:51.790Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é˜Ÿåˆ—"><a href="#é˜Ÿåˆ—" class="headerlink" title="é˜Ÿåˆ—"></a>é˜Ÿåˆ—</h3><ul><li>ç‰¹æ€§ï¼šå…ˆè¿›å…ˆå‡º</li><li>è§£é¢˜æ³•åˆ™ï¼š<ul><li>é¢˜ç›®å…·å¤‡<strong>å¹¿åº¦éå†ï¼ˆåˆ†å±‚éå†ï¼‰</strong>å’Œ<strong>é¡ºåºè¾“å‡º</strong>çš„ç‰¹ç‚¹ï¼Œå°±åº”è¯¥æƒ³åˆ°ç”¨FIFO é˜Ÿåˆ—æ¥è¯•ä¸€è¯•ã€‚</li><li><strong>æ»‘åŠ¨çª—å£</strong>ç±»å‹é¢˜</li></ul></li><li>æ¨¡æ¿ï¼š<ul><li>åˆ†å±‚éå†</li><li>å¾ªç¯é˜Ÿåˆ—</li><li>å•è°ƒé˜Ÿåˆ—</li></ul></li></ul><hr><h5 id="æ™®é€šé˜Ÿåˆ—"><a href="#æ™®é€šé˜Ÿåˆ—" class="headerlink" title="æ™®é€šé˜Ÿåˆ—"></a>æ™®é€šé˜Ÿåˆ—</h5><ul><li>ä¾‹é¢˜1ï¼šä»ä¸Šåˆ°ä¸‹æŒ‰å±‚æ‰“å°äºŒå‰æ ‘ï¼ŒåŒä¸€å±‚ç»“ç‚¹æŒ‰ä»å·¦åˆ°å³çš„é¡ºåºæ‰“å°ï¼Œæ¯ä¸€å±‚æ‰“å°åˆ°ä¸€è¡Œã€‚<br>  è¾“å…¥ï¼š <pre><code>   39     8    6   7</code></pre>  è¾“å‡ºï¼š<code>[[3], [9, 8], [6, 7]]</code></li></ul><p><strong>äºŒå‰æ ‘çš„å±‚æ¬¡éå†</strong>çš„è§£é¢˜æŠ€å·§</p><ul><li>éå†æ–¹å¼çš„å˜åŒ–ï¼š<ul><li>äºŒå‰æ ‘çš„é”¯é½¿å½¢éå†</li><li>äºŒå‰æ ‘å±‚æ¬¡å€’åºéå†</li></ul></li><li>å±‚çš„ä¿¡æ¯å˜åŒ–<ul><li>äºŒå‰æ ‘çš„å±‚å¹³å‡å€¼</li><li>äºŒå‰æ ‘æœ€æ·±å±‚çš„å¶èŠ‚ç‚¹çš„å’Œ</li><li>äºŒå‰æ ‘çš„æœ€å¤§å®½åº¦</li></ul></li><li>æ ‘çš„å˜åŒ–<ul><li>Nå‰æ ‘çš„å±‚æ¬¡éå†</li><li>Nå‰æ ‘çš„æœ€å¤§æ·±åº¦</li></ul></li></ul><hr><h5 id="å¾ªç¯é˜Ÿåˆ—"><a href="#å¾ªç¯é˜Ÿåˆ—" class="headerlink" title="å¾ªç¯é˜Ÿåˆ—"></a>å¾ªç¯é˜Ÿåˆ—</h5><ul><li>é‡ç‚¹ï¼š å¾ªç¯ä½¿ç”¨å›ºå®šç©ºé—´</li><li>éš¾ç‚¹ï¼š æ§åˆ¶å¥½ front/rear ä¸¤ä¸ªé¦–å°¾æŒ‡ç¤ºå™¨</li><li>ç©ºé˜Ÿåˆ—å’Œæ»¡é˜Ÿåˆ—çš„åˆ¤æ–­ï¼Œåœ¨äº<code>used</code>å˜é‡</li><li>ä¾‹é¢˜2ï¼šè®¾è®¡ä¸€ä¸ªå¯ä»¥å®¹çº³ k ä¸ªå…ƒç´ çš„å¾ªç¯é˜Ÿåˆ—ã€‚éœ€è¦å®ç°ä»¥ä¸‹æ¥å£ï¼š  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span>Â <span class="title">MyCircularQueue</span>Â </span>&#123;</span><br><span class="line">Â Â Â Â <span class="comment">//Â å‚æ•°kè¡¨ç¤ºè¿™ä¸ªå¾ªç¯é˜Ÿåˆ—æœ€å¤šåªèƒ½å®¹çº³kä¸ªå…ƒç´ </span></span><br><span class="line">Â Â Â Â <span class="function"><span class="keyword">public</span>Â <span class="title">MyCircularQueue</span><span class="params">(<span class="keyword">int</span>Â k)</span></span>;</span><br><span class="line">Â Â Â Â <span class="comment">//Â å°†valueæ”¾åˆ°é˜Ÿåˆ—ä¸­,Â æˆåŠŸè¿”å›true</span></span><br><span class="line">Â Â Â Â <span class="function"><span class="keyword">public</span>Â <span class="keyword">boolean</span>Â <span class="title">enQueue</span><span class="params">(<span class="keyword">int</span>Â value)</span></span>;</span><br><span class="line">Â Â Â Â <span class="comment">//Â åˆ é™¤é˜Ÿé¦–å…ƒç´ ï¼ŒæˆåŠŸè¿”å›true</span></span><br><span class="line">Â Â Â Â <span class="function"><span class="keyword">public</span>Â <span class="keyword">boolean</span>Â <span class="title">deQueue</span><span class="params">()</span></span>;</span><br><span class="line">Â Â Â Â <span class="comment">//Â å¾—åˆ°é˜Ÿé¦–å…ƒç´ ï¼Œå¦‚æœä¸ºç©ºï¼Œè¿”å›-1</span></span><br><span class="line">Â Â Â Â <span class="function"><span class="keyword">public</span>Â <span class="keyword">int</span>Â <span class="title">Front</span><span class="params">()</span></span>;</span><br><span class="line">Â Â Â Â <span class="comment">//Â å¾—åˆ°é˜Ÿå°¾å…ƒç´ ï¼Œå¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œè¿”å›-1</span></span><br><span class="line">Â Â Â Â <span class="function"><span class="keyword">public</span>Â <span class="keyword">int</span>Â <span class="title">Rear</span><span class="params">()</span></span>;</span><br><span class="line">Â Â Â Â <span class="comment">//Â çœ‹ä¸€ä¸‹å¾ªç¯é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">Â Â Â Â <span class="function"><span class="keyword">public</span>Â <span class="keyword">boolean</span>Â <span class="title">isEmpty</span><span class="params">()</span></span>;</span><br><span class="line">Â Â Â Â <span class="comment">//Â çœ‹ä¸€ä¸‹å¾ªç¯é˜Ÿåˆ—æ˜¯å¦å·²æ”¾æ»¡kä¸ªå…ƒç´ </span></span><br><span class="line">Â Â Â Â <span class="function"><span class="keyword">public</span>Â <span class="keyword">boolean</span>Â <span class="title">isFull</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><hr><h5 id="å•è°ƒé˜Ÿåˆ—"><a href="#å•è°ƒé˜Ÿåˆ—" class="headerlink" title="å•è°ƒé˜Ÿåˆ—"></a>å•è°ƒé˜Ÿåˆ—</h5><ul><li>æ¦‚å¿µï¼š è¦æ±‚é˜Ÿåˆ—ä¸­çš„å…ƒç´ å¿…é¡»æ»¡è¶³å•è°ƒæ€§ï¼Œæ¯”å¦‚<strong>å•è°ƒé€’å¢</strong>ï¼Œæˆ–è€…<strong>å•è°ƒé€’å‡</strong>ã€‚å•è°ƒé˜Ÿåˆ—å±äºåŒç«¯é˜Ÿåˆ—çš„ä¸€ç§ã€‚åŒç«¯é˜Ÿåˆ—ä¸ FIFO é˜Ÿåˆ—çš„åŒºåˆ«åœ¨äºï¼š<ul><li>FIFO é˜Ÿåˆ—åªèƒ½ä»å°¾éƒ¨æ·»åŠ å…ƒç´ ï¼Œé¦–éƒ¨å¼¹å‡ºå…ƒç´ ï¼›</li><li>åŒç«¯é˜Ÿåˆ—å¯ä»¥ä»é¦–å°¾ä¸¤ç«¯ push/pop å…ƒç´ ã€‚</li></ul></li><li>æ³¨æ„ï¼š å•è°ƒé˜Ÿåˆ—åœ¨å…¥é˜Ÿçš„æ—¶å€™ï¼Œéœ€è¦æ»¡è¶³ 2 ç‚¹ï¼š<ul><li>å…¥é˜Ÿå‰é˜Ÿåˆ—å·²ç»æ»¡è¶³å•è°ƒæ€§ï¼›</li><li>å…¥é˜Ÿåé˜Ÿåˆ—ä»ç„¶æ»¡è¶³å•è°ƒæ€§ã€‚</li></ul></li><li>ä¾‹é¢˜3ï¼šæ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼<br>  è¾“å…¥ï¼šnums = [1,3,-1,-3,5,3], k = 3<br>  è¾“å‡ºï¼š[3,3,5,5]<blockquote><p>ç¬¦åˆ<font color=red>å•è°ƒé€’å‡é˜Ÿåˆ—ï¼</font></p></blockquote></li><li>ä¾‹é¢˜4ï¼š ç»™å®šä¸€ä¸ªæ•°ç»„ A[]ï¼Œæ¯ä¸ªä½ç½® i æ”¾ç½®äº†é‡‘å¸ A[i]ï¼Œå°æ˜ä» A[0] å‡ºå‘ã€‚å½“å°æ˜èµ°åˆ° A[i] çš„æ—¶å€™ï¼Œä¸‹ä¸€æ­¥ä»–å¯ä»¥é€‰æ‹© A[i+1, i+k]ï¼ˆå½“ç„¶ï¼Œä¸èƒ½è¶…å‡ºæ•°ç»„è¾¹ç•Œï¼‰ã€‚æ¯ä¸ªä½ç½®ä¸€æ—¦è¢«é€‰æ‹©ï¼Œå°†ä¼šæŠŠé‚£ä¸ªä½ç½®çš„é‡‘å¸æ”¶èµ°ï¼ˆå¦‚æœä¸ºè´Ÿæ•°ï¼Œå°±è¦äº¤å‡ºé‡‘å¸ï¼‰ã€‚è¯·é—®ï¼Œæœ€å¤šèƒ½æ”¶é›†å¤šå°‘é‡‘å¸ï¼Ÿ<br>  è¾“å…¥ï¼š[1,-1,-100,-1000,100,3], k = 2<br>  è¾“å‡ºï¼š4<br>  è§£é‡Šï¼šä» A[0] = 1 å‡ºå‘ï¼Œæ”¶è·é‡‘å¸ 1ã€‚ä¸‹ä¸€æ­¥èµ°å¾€ A[2] = -100, æ”¶è·é‡‘å¸ -100ã€‚å†ä¸‹ä¸€æ­¥èµ°åˆ° A[4] = 100ï¼Œæ”¶è·é‡‘å¸ 100ï¼Œæœ€åèµ°åˆ° A[5] = 3ï¼Œæ”¶è·é‡‘å¸ 3ã€‚æœ€å¤šæ”¶è· 1 - 100 + 100 + 3 = 4ã€‚æ²¡æœ‰æ¯”è¿™ä¸ªæ›´å¥½çš„èµ°æ³•äº†ã€‚</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;é˜Ÿåˆ—&quot;&gt;&lt;a href=&quot;#é˜Ÿåˆ—&quot; class=&quot;headerlink&quot; title=&quot;é˜Ÿåˆ—&quot;&gt;&lt;/a&gt;é˜Ÿåˆ—&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;ç‰¹æ€§ï¼šå…ˆè¿›å…ˆå‡º&lt;/li&gt;
&lt;li&gt;è§£é¢˜æ³•åˆ™ï¼š&lt;ul&gt;
&lt;li&gt;é¢˜ç›®å…·å¤‡&lt;strong&gt;å¹¿åº¦éå†ï¼ˆåˆ†å±‚éå†ï¼‰&lt;/strong&gt;å’Œ&lt;
      
    
    </summary>
    
    
      <category term="ç®—æ³•" scheme="https://feidom-up.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
    
      <category term="æ•°æ®ç»“æ„" scheme="https://feidom-up.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="ç®—æ³•" scheme="https://feidom-up.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="é˜Ÿåˆ—" scheme="https://feidom-up.github.io/tags/%E9%98%9F%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>æ‰‹å†™ä»£ç ç³»åˆ—ä¹‹New(fn)</title>
    <link href="https://feidom-up.github.io/2021/03/17/%E6%89%8B%E5%86%99%E4%BB%A3%E7%A0%81%E7%B3%BB%E5%88%97%E4%B9%8BNew-fn/"/>
    <id>https://feidom-up.github.io/2021/03/17/%E6%89%8B%E5%86%99%E4%BB%A3%E7%A0%81%E7%B3%BB%E5%88%97%E4%B9%8BNew-fn/</id>
    <published>2021-03-17T00:46:47.000Z</published>
    <updated>2021-05-06T02:46:51.789Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Newæ“ä½œç¬¦åšäº†å“ªäº›äº‹"><a href="#Newæ“ä½œç¬¦åšäº†å“ªäº›äº‹" class="headerlink" title="Newæ“ä½œç¬¦åšäº†å“ªäº›äº‹"></a>Newæ“ä½œç¬¦åšäº†å“ªäº›äº‹</h3><ul><li>åˆ›å»ºäº†ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ã€‚</li><li>ä¼šè¢«æ‰§è¡Œ[[Prototype]]ï¼ˆä¹Ÿå°±æ˜¯<strong>proto</strong>ï¼‰é“¾æ¥ã€‚</li><li>ä½¿thisæŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚</li><li>é€šè¿‡newåˆ›å»ºçš„æ¯ä¸ªå¯¹è±¡å°†æœ€ç»ˆè¢«[[Prototype]]é“¾æ¥åˆ°è¿™ä¸ªå‡½æ•°çš„prototypeå¯¹è±¡ä¸Šã€‚</li><li>å¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›å¯¹è±¡ç±»å‹Object(åŒ…å«Functoin, Array, Date, RegExg, Error)ï¼Œé‚£ä¹ˆnewè¡¨è¾¾å¼ä¸­çš„å‡½æ•°è°ƒç”¨å°†è¿”å›è¯¥å¯¹è±¡å¼•ç”¨ã€‚</li></ul><h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><ul><li><p>ç‰ˆæœ¬ä¸€ï¼š</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myNew</span>(<span class="params">fn</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œä¸”å°†å…¶éšå¼åŸå‹æŒ‡å‘æ„é€ å‡½æ•°åŸå‹</span></span><br><span class="line">        <span class="keyword">let</span> obj = &#123;</span><br><span class="line">            __proto__: fn.prototype</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ‰§è¡Œæ„é€ å‡½æ•°</span></span><br><span class="line">        fn.call(obj, ...arguments)</span><br><span class="line">        <span class="comment">// è¿”å›è¯¥å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">return</span> obj</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ç¤ºä¾‹ï¼š</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name</span><br><span class="line">    <span class="keyword">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> obj = myNew(Person)(<span class="string">'chen'</span>, <span class="number">18</span>)</span><br></pre></td></tr></table></figure></li><li><p>ç‰ˆæœ¬äºŒï¼š</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myNew</span>(<span class="params">fn</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> res = &#123;&#125;;</span><br><span class="line">    <span class="keyword">if</span>(fn.prototype !==<span class="literal">null</span>)&#123;</span><br><span class="line">        res.__proto__ = fn.prototype;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> ret = fn.apply(res, <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>));</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> ret === <span class="string">"object"</span> || <span class="keyword">typeof</span> ret === <span class="string">"function"</span>) &amp;&amp; ret !== <span class="literal">null</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ret</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä½¿ç”¨ç¤ºä¾‹ï¼š</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="keyword">var</span> obj = New(A, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"><span class="comment">// equals to</span></span><br><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> A(<span class="number">1</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;Newæ“ä½œç¬¦åšäº†å“ªäº›äº‹&quot;&gt;&lt;a href=&quot;#Newæ“ä½œç¬¦åšäº†å“ªäº›äº‹&quot; class=&quot;headerlink&quot; title=&quot;Newæ“ä½œç¬¦åšäº†å“ªäº›äº‹&quot;&gt;&lt;/a&gt;Newæ“ä½œç¬¦åšäº†å“ªäº›äº‹&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;åˆ›å»ºäº†ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;ä¼šè¢«æ‰§è¡Œ[[P
      
    
    </summary>
    
    
      <category term="æ‰‹å†™ä»£ç ç³»åˆ—" scheme="https://feidom-up.github.io/categories/%E6%89%8B%E5%86%99%E4%BB%A3%E7%A0%81%E7%B3%BB%E5%88%97/"/>
    
    
  </entry>
  
  <entry>
    <title>æ‰‹å†™ä»£ç ç³»åˆ—ä¹‹é˜²æŠ–ä¸èŠ‚æµ</title>
    <link href="https://feidom-up.github.io/2021/03/16/%E6%89%8B%E5%86%99%E4%BB%A3%E7%A0%81%E7%B3%BB%E5%88%97%E4%B9%8B%E9%98%B2%E6%8A%96%E4%B8%8E%E8%8A%82%E6%B5%81/"/>
    <id>https://feidom-up.github.io/2021/03/16/%E6%89%8B%E5%86%99%E4%BB%A3%E7%A0%81%E7%B3%BB%E5%88%97%E4%B9%8B%E9%98%B2%E6%8A%96%E4%B8%8E%E8%8A%82%E6%B5%81/</id>
    <published>2021-03-16T07:26:28.000Z</published>
    <updated>2021-05-06T02:46:51.790Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é˜²æŠ–"><a href="#é˜²æŠ–" class="headerlink" title="é˜²æŠ–"></a>é˜²æŠ–</h3><p><strong>æ€è·¯</strong>ï¼šåœ¨è§„å®šæ—¶é—´å†…æœªè§¦å‘ç¬¬äºŒæ¬¡ï¼Œåˆ™æ‰§è¡Œ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">fn, delay</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// åˆ©ç”¨é—­åŒ…ä¿å­˜å®šæ—¶å™¨</span></span><br><span class="line">    <span class="keyword">let</span> timer = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> context = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">let</span> args = <span class="built_in">arguments</span>;</span><br><span class="line">        <span class="comment">// åœ¨è§„å®šæ—¶é—´å†…å†æ¬¡è§¦å‘</span></span><br><span class="line">        <span class="comment">// ä¼šå…ˆæ¸…é™¤å®šæ—¶å™¨å†é‡è®¾å®šæ—¶å™¨</span></span><br><span class="line">        clearTimeout(timer);</span><br><span class="line">        timer = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            fn.apply(context, args)</span><br><span class="line">        &#125;,delay);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ä¸¾ä¾‹ï¼š</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"é˜²æŠ–"</span>)</span><br><span class="line">&#125;</span><br><span class="line">addEventListener(<span class="string">"scroll"</span>, debounce(fn1, <span class="number">1000</span>))</span><br></pre></td></tr></table></figure><h3 id="èŠ‚æµ"><a href="#èŠ‚æµ" class="headerlink" title="èŠ‚æµ"></a>èŠ‚æµ</h3><p><strong>æ€è·¯</strong>ï¼šåœ¨è§„å®šæ—¶é—´å†…åªè§¦å‘ä¸€æ¬¡</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">fn, delay</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// åˆ©ç”¨é—­åŒ…ä¿å­˜æ—¶é—´</span></span><br><span class="line">    <span class="keyword">let</span> prev = <span class="built_in">Date</span>.now();</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> context = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">let</span> args = <span class="built_in">arguments</span>;</span><br><span class="line">        <span class="keyword">let</span> now = <span class="built_in">Date</span>.now();</span><br><span class="line">        <span class="keyword">if</span>(now - prev &gt;= delay)&#123;</span><br><span class="line">            fn.apply(context, args);</span><br><span class="line">            prev = <span class="built_in">Date</span>.now();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ä¸¾ä¾‹ï¼š</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"èŠ‚æµ"</span>)</span><br><span class="line">&#125;</span><br><span class="line">addEventListener(<span class="string">"scroll"</span>, throttle(fn2, <span class="number">1000</span>))</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;é˜²æŠ–&quot;&gt;&lt;a href=&quot;#é˜²æŠ–&quot; class=&quot;headerlink&quot; title=&quot;é˜²æŠ–&quot;&gt;&lt;/a&gt;é˜²æŠ–&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;æ€è·¯&lt;/strong&gt;ï¼šåœ¨è§„å®šæ—¶é—´å†…æœªè§¦å‘ç¬¬äºŒæ¬¡ï¼Œåˆ™æ‰§è¡Œ&lt;/p&gt;
&lt;figure class=&quot;highlight java
      
    
    </summary>
    
    
      <category term="æ‰‹å†™ä»£ç ç³»åˆ—" scheme="https://feidom-up.github.io/categories/%E6%89%8B%E5%86%99%E4%BB%A3%E7%A0%81%E7%B3%BB%E5%88%97/"/>
    
    
  </entry>
  
  <entry>
    <title>æ‰‹å†™ä»£ç å’”å’”å’”</title>
    <link href="https://feidom-up.github.io/2021/03/16/%E6%89%8B%E5%86%99%E4%BB%A3%E7%A0%81%E5%92%94%E5%92%94%E5%92%94/"/>
    <id>https://feidom-up.github.io/2021/03/16/%E6%89%8B%E5%86%99%E4%BB%A3%E7%A0%81%E5%92%94%E5%92%94%E5%92%94/</id>
    <published>2021-03-16T07:24:51.000Z</published>
    <updated>2021-06-07T00:44:44.878Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å’”å’”å’”"><a href="#å’”å’”å’”" class="headerlink" title="å’”å’”å’”"></a>å’”å’”å’”</h3><ul><li><a href="/2021/03/16/æ‰‹å†™ä»£ç ç³»åˆ—ä¹‹é˜²æŠ–ä¸èŠ‚æµ/">æ‰‹å†™ä»£ç ç³»åˆ—ä¹‹é˜²æŠ–ä¸èŠ‚æµ</a></li><li><a href="/2021/03/17/æ‰‹å†™ä»£ç ç³»åˆ—ä¹‹New-fn/">New</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;å’”å’”å’”&quot;&gt;&lt;a href=&quot;#å’”å’”å’”&quot; class=&quot;headerlink&quot; title=&quot;å’”å’”å’”&quot;&gt;&lt;/a&gt;å’”å’”å’”&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;/2021/03/16/æ‰‹å†™ä»£ç ç³»åˆ—ä¹‹é˜²æŠ–ä¸èŠ‚æµ/&quot;&gt;æ‰‹å†™ä»£ç ç³»åˆ—ä¹‹é˜²æŠ–ä¸èŠ‚æµ&lt;/a&gt;&lt;/li&gt;
&lt;l
      
    
    </summary>
    
    
      <category term="æ‰‹å†™ä»£ç ç³»åˆ—" scheme="https://feidom-up.github.io/categories/%E6%89%8B%E5%86%99%E4%BB%A3%E7%A0%81%E7%B3%BB%E5%88%97/"/>
    
    
  </entry>
  
  <entry>
    <title>æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹æ ˆç»“æ„</title>
    <link href="https://feidom-up.github.io/2021/03/16/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%B9%8B%E6%A0%88%E7%BB%93%E6%9E%84/"/>
    <id>https://feidom-up.github.io/2021/03/16/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%B9%8B%E6%A0%88%E7%BB%93%E6%9E%84/</id>
    <published>2021-03-16T07:15:17.000Z</published>
    <updated>2021-05-06T02:46:51.790Z</updated>
    
    <content type="html"><![CDATA[<h3 id="æ ˆ"><a href="#æ ˆ" class="headerlink" title="æ ˆ"></a>æ ˆ</h3><ul><li>ç‰¹æ€§ï¼šå…ˆè¿›åå‡º</li><li>è§£é¢˜æ³•åˆ™ï¼š<ul><li>é¢˜ç›®ä¸­æœ‰<strong>é…å¯¹ã€æ¶ˆé™¤</strong>çš„é¢˜æ„ï¼Œä¼˜å…ˆè€ƒè™‘<strong>æ ˆ</strong>ç»“æ„</li><li>æ ˆä¸­å­˜æ”¾çš„å¯ä»¥æ˜¯<strong>å†…å®¹æœ¬èº«</strong>å’Œ<strong>å†…å®¹çš„ç´¢å¼•</strong></li><li>æ•°ç»„ä¸­å³è¾¹<strong>ç¬¬ä¸€ä¸ªæ¯”æˆ‘å°</strong>çš„å…ƒç´ çš„ä½ç½®ï¼Œæ±‚è§£ç”¨<strong>é€’å¢æ ˆ</strong></li><li>è¾ƒå°çš„æ•°<strong>æ¶ˆé™¤</strong>æ‰è¾ƒå¤§çš„æ•°çš„æ—¶å€™ï¼Œä½¿ç”¨<strong>é€’å¢æ ˆ</strong>ã€‚</li><li>æ ¹æ®é¢˜æ„æ€»ç»“<strong>å…¥æ ˆä¸å‡ºæ ˆçš„æ—¶æœº</strong></li></ul></li></ul><h5 id="æ™®é€šæ ˆ"><a href="#æ™®é€šæ ˆ" class="headerlink" title="æ™®é€šæ ˆ"></a>æ™®é€šæ ˆ</h5><ul><li>è§„å¾‹æ€§ï¼š<font color=red>é…å¯¹ã€æ¶ˆé™¤</font></li></ul><hr><ul><li>ä¾‹é¢˜1ï¼šå­—ç¬¦ä¸²ä¸­åªæœ‰å­—ç¬¦â€™(â€˜å’Œâ€™)â€™ã€‚åˆæ³•å­—ç¬¦ä¸²éœ€è¦æ‹¬å·å¯ä»¥é…å¯¹ã€‚æ¯”å¦‚ï¼š<br>  è¾“å…¥ï¼šâ€()â€<br>  è¾“å‡ºï¼štrue<br>  è§£é‡Šï¼š()ï¼Œ()()ï¼Œ(())æ˜¯åˆæ³•çš„ã€‚)(ï¼Œ()(ï¼Œ(()æ˜¯éæ³•çš„ã€‚<br>  è¯·ä½ å®ç°ä¸€ä¸ªå‡½æ•°<code>isValid(s)</code>ï¼Œæ¥åˆ¤æ–­ç»™å®šçš„å­—ç¬¦ä¸²æ˜¯å¦åˆæ³•ã€‚<blockquote><p>é’ˆå¯¹ä¾‹1è¿™ç§<font color=green>å†…å®¹ä¸€æ ·</font>æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<font color=green>è®¡æ•°å™¨ä¼˜åŒ–</font></p></blockquote></li><li>ä¾‹é¢˜æ‹“å±•ï¼š ç»™å®šä¸€ä¸ªåªåŒ…æ‹¬ â€˜(â€˜ï¼Œâ€™)â€™ï¼Œâ€™{â€˜ï¼Œâ€™}â€™ï¼Œâ€™[â€˜ï¼Œâ€™]â€™ çš„å­—ç¬¦ä¸²ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆã€‚æœ‰æ•ˆå­—ç¬¦ä¸²éœ€æ»¡è¶³ï¼š<br>  å·¦æ‹¬å·å¿…é¡»ç”¨ç›¸åŒç±»å‹çš„å³æ‹¬å·é—­åˆ<br>  å·¦æ‹¬å·å¿…é¡»ä»¥æ­£ç¡®çš„é¡ºåºé—­åˆ<br>  æ³¨æ„ç©ºå­—ç¬¦ä¸²å¯è¢«è®¤ä¸ºæ˜¯æœ‰æ•ˆå­—ç¬¦ä¸²<br>  è¯·å®ç°<code>isValid(s)</code></li></ul><hr><ul><li>ä¾‹é¢˜2ï¼šåœ¨æ°´ä¸­æœ‰è®¸å¤šé±¼ï¼Œå¯ä»¥è®¤ä¸ºè¿™äº›é±¼åœæ”¾åœ¨ x è½´ä¸Šã€‚å†ç»™å®šä¸¤ä¸ªæ•°ç»„ Sizeï¼ŒDirï¼ŒSize[i] è¡¨ç¤ºç¬¬ i æ¡é±¼çš„å¤§å°ï¼ŒDir[i] è¡¨ç¤ºé±¼çš„æ–¹å‘ ï¼ˆ0 è¡¨ç¤ºå‘å·¦æ¸¸ï¼Œ1 è¡¨ç¤ºå‘å³æ¸¸ï¼‰ã€‚è¿™ä¸¤ä¸ªæ•°ç»„åˆ†åˆ«è¡¨ç¤ºé±¼çš„å¤§å°å’Œæ¸¸åŠ¨çš„æ–¹å‘ï¼Œå¹¶ä¸”ä¸¤ä¸ªæ•°ç»„çš„é•¿åº¦ç›¸ç­‰ã€‚é±¼çš„è¡Œä¸ºç¬¦åˆä»¥ä¸‹å‡ ä¸ªæ¡ä»¶:<br>  æ‰€æœ‰çš„é±¼éƒ½åŒæ—¶å¼€å§‹æ¸¸åŠ¨ï¼Œæ¯æ¬¡æŒ‰ç…§é±¼çš„æ–¹å‘ï¼Œéƒ½æ¸¸åŠ¨ä¸€ä¸ªå•ä½è·ç¦»ï¼›<br>  å½“æ–¹å‘ç›¸å¯¹æ—¶ï¼Œå¤§é±¼ä¼šåƒæ‰å°é±¼ï¼›<br>  é±¼çš„å¤§å°éƒ½ä¸ä¸€æ ·ã€‚<br>  è¾“å…¥ï¼šSize = [4, 2, 5, 3, 1], Dir = [1, 1, 0, 0, 0]<br>  è¾“å‡ºï¼š3<br>  å®Œæˆ<code>solution(Size, Dir)</code>æ¥è®¡ç®—è¿˜å‰©ä¸‹å‡ æ¡é±¼ï¼Ÿ</li></ul><hr><h5 id="å•è°ƒæ ˆ"><a href="#å•è°ƒæ ˆ" class="headerlink" title="å•è°ƒæ ˆ"></a>å•è°ƒæ ˆ</h5><ul><li>å®šä¹‰ï¼šå•è°ƒæ ˆå°±æ˜¯æŒ‡æ ˆä¸­çš„å…ƒç´ å¿…é¡»æ˜¯æŒ‰ç…§å‡åºæ’åˆ—çš„æ ˆï¼Œæˆ–è€…æ˜¯é™åºæ’åˆ—çš„æ ˆã€‚<br>  å‡åºæ’åˆ—çš„æ ˆç§°ä¸º<strong>é€’å¢æ ˆ</strong><br>  é™åºæ’åˆ—çš„æ ˆç§°ä¸º<strong>é€’å‡æ ˆ</strong><br>  ç‰¹ç‚¹ï¼šä»»ä½•æ—¶å€™éƒ½éœ€è¦ä¿è¯æ ˆçš„æœ‰åºæ€§</li></ul><hr><ul><li>ä¾‹é¢˜1ï¼šä¸€ä¸ªæ•´æ•°æ•°ç»„ Aï¼Œæ‰¾åˆ°æ¯ä¸ªå…ƒç´ ï¼šå³è¾¹ç¬¬ä¸€ä¸ªæ¯”æˆ‘å°çš„ä¸‹æ ‡ä½ç½®ï¼Œæ²¡æœ‰åˆ™ç”¨ -1 è¡¨ç¤ºã€‚ï¼ˆæ‰¾å‡ºæ•°ç»„ä¸­å³è¾¹æ¯”æˆ‘å°çš„å…ƒç´ ï¼‰<br>  è¾“å…¥ï¼š[5, 2]<br>  è¾“å‡ºï¼š[1, -1]<br>  è§£é‡Šï¼šå› ä¸ºå…ƒç´  5 çš„å³è¾¹ç¦»æˆ‘æœ€è¿‘ä¸”æ¯”æˆ‘å°çš„ä½ç½®åº”è¯¥æ˜¯ A[1]ï¼Œæœ€åä¸€ä¸ªå…ƒç´  2 å³è¾¹æ²¡æœ‰æ¯” 2 å°çš„å…ƒç´ ï¼Œæ‰€ä»¥åº”è¯¥è¾“å‡º -1ã€‚</li></ul><blockquote><p>ç±»ä¼¼é¢˜ï¼š<br>æ•°ç»„ä¸­å³è¾¹ç¬¬ä¸€ä¸ªæ¯”æˆ‘å¤§çš„å…ƒç´ çš„ä½ç½®<br>æ•°ç»„ä¸­å…ƒç´ å·¦è¾¹ç¦»æˆ‘æœ€è¿‘ä¸”æ¯”æˆ‘å°çš„å…ƒç´ çš„ä½ç½®<br>æ•°ç»„ä¸­å…ƒç´ å·¦è¾¹ç¦»æˆ‘æœ€è¿‘ä¸”æ¯”æˆ‘å¤§çš„å…ƒç´ çš„ä½ç½®</p></blockquote><ul><li>ä¾‹é¢˜2ï¼šç»™å®šä¸€ä¸ªæ­£æ•´æ•°æ•°ç»„å’Œ kï¼Œè¦æ±‚ä¾æ¬¡å–å‡º k ä¸ªæ•°ï¼Œè¾“å‡ºå…¶ä¸­æ•°ç»„çš„ä¸€ä¸ªå­åºåˆ—ï¼Œéœ€è¦æ»¡è¶³ï¼š1. é•¿åº¦ä¸º kï¼›2.å­—å…¸åºæœ€å°ã€‚<br>  è¾“å…¥ï¼šnums = [3,5,2,6], k = 2<br>  è¾“å‡ºï¼š[2,6]<br>  è§£é‡Šï¼šåœ¨æ‰€æœ‰å¯èƒ½çš„è§£ï¼š{[3,5], [3,2], [3,6], [5,2], [5,6], [2,6]} ä¸­ï¼Œ[2,6] å­—å…¸åºæœ€å°ã€‚</li></ul><h5 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h5><p><img src="https://s0.lgstatic.com/i/image6/M01/0B/7F/CioPOWA4q6qASB-UAADhj7uzOwg933.png" alt="å›¾"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;æ ˆ&quot;&gt;&lt;a href=&quot;#æ ˆ&quot; class=&quot;headerlink&quot; title=&quot;æ ˆ&quot;&gt;&lt;/a&gt;æ ˆ&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;ç‰¹æ€§ï¼šå…ˆè¿›åå‡º&lt;/li&gt;
&lt;li&gt;è§£é¢˜æ³•åˆ™ï¼š&lt;ul&gt;
&lt;li&gt;é¢˜ç›®ä¸­æœ‰&lt;strong&gt;é…å¯¹ã€æ¶ˆé™¤&lt;/strong&gt;çš„é¢˜æ„ï¼Œä¼˜å…ˆè€ƒè™‘&lt;st
      
    
    </summary>
    
    
      <category term="ç®—æ³•" scheme="https://feidom-up.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
    
      <category term="æ•°æ®ç»“æ„" scheme="https://feidom-up.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="ç®—æ³•" scheme="https://feidom-up.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ ˆ" scheme="https://feidom-up.github.io/tags/%E6%A0%88/"/>
    
  </entry>
  
  <entry>
    <title>æ•°æ®ç»“æ„ä¸ç®—æ³•</title>
    <link href="https://feidom-up.github.io/2021/03/03/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    <id>https://feidom-up.github.io/2021/03/03/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/</id>
    <published>2021-03-03T01:34:21.000Z</published>
    <updated>2021-05-06T02:46:51.790Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç®—æ³•å››æ­¥åˆ†ææ³•ï¼š"><a href="#ç®—æ³•å››æ­¥åˆ†ææ³•ï¼š" class="headerlink" title="ç®—æ³•å››æ­¥åˆ†ææ³•ï¼š"></a>ç®—æ³•å››æ­¥åˆ†ææ³•ï¼š</h3><ol><li>æ¨¡æ‹Ÿï¼šæ¨¡æ‹Ÿé¢˜ç›®çš„è¿è¡Œã€‚</li><li>è§„å¾‹ï¼šå°è¯•æ€»ç»“å‡ºé¢˜ç›®çš„ä¸€èˆ¬è§„å¾‹å’Œç‰¹ç‚¹ã€‚</li><li>åŒ¹é…ï¼šæ‰¾åˆ°ç¬¦åˆè¿™äº›ç‰¹ç‚¹çš„æ•°æ®ç»“æ„ä¸ç®—æ³•ã€‚</li><li>è¾¹ç•Œï¼šè€ƒè™‘ç‰¹æ®Šæƒ…å†µã€‚</li></ol><h3 id="æ•°æ®ç»“æ„ä¸ç®—æ³•"><a href="#æ•°æ®ç»“æ„ä¸ç®—æ³•" class="headerlink" title="æ•°æ®ç»“æ„ä¸ç®—æ³•"></a>æ•°æ®ç»“æ„ä¸ç®—æ³•</h3><ul><li><a href="/2021/03/16/æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹æ ˆç»“æ„/">æ ˆç»“æ„ä¸ç®—æ³•</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;ç®—æ³•å››æ­¥åˆ†ææ³•ï¼š&quot;&gt;&lt;a href=&quot;#ç®—æ³•å››æ­¥åˆ†ææ³•ï¼š&quot; class=&quot;headerlink&quot; title=&quot;ç®—æ³•å››æ­¥åˆ†ææ³•ï¼š&quot;&gt;&lt;/a&gt;ç®—æ³•å››æ­¥åˆ†ææ³•ï¼š&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;æ¨¡æ‹Ÿï¼šæ¨¡æ‹Ÿé¢˜ç›®çš„è¿è¡Œã€‚&lt;/li&gt;
&lt;li&gt;è§„å¾‹ï¼šå°è¯•æ€»ç»“å‡ºé¢˜ç›®çš„ä¸€èˆ¬è§„å¾‹å’Œç‰¹ç‚¹ã€‚
      
    
    </summary>
    
    
      <category term="ç®—æ³•" scheme="https://feidom-up.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
    
      <category term="æ•°æ®ç»“æ„" scheme="https://feidom-up.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="ç®—æ³•" scheme="https://feidom-up.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>Virtual DOMçš„å·¥ä½œåŸç†</title>
    <link href="https://feidom-up.github.io/2021/01/02/%E8%99%9A%E6%8B%9Fdom/"/>
    <id>https://feidom-up.github.io/2021/01/02/%E8%99%9A%E6%8B%9Fdom/</id>
    <published>2021-01-02T15:22:41.000Z</published>
    <updated>2021-05-06T02:46:51.790Z</updated>
    
    <content type="html"><![CDATA[<h4 id="Virtual-DOM-ä¹Ÿè¢«ç§°ä¸ºè™šæ‹ŸDOM"><a href="#Virtual-DOM-ä¹Ÿè¢«ç§°ä¸ºè™šæ‹ŸDOM" class="headerlink" title="Virtual DOM ä¹Ÿè¢«ç§°ä¸ºè™šæ‹ŸDOM"></a>Virtual DOM ä¹Ÿè¢«ç§°ä¸ºè™šæ‹ŸDOM</h4><ul><li>åœ¨reactä¸­ï¼Œ<code>jsxè¯­æ³•</code>ç»è¿‡<code>babelè§£æ</code>è½¬åŒ–ä¸º<code>React.createElement()</code>å‡½æ•°è°ƒç”¨åç”Ÿæˆ<code>astæŠ½è±¡è¯­æ³•æ ‘</code>ï¼Œå†é€šè¿‡<code>render</code>å‡½æ•°å°†<code>astæ ‘</code>è½¬æ¢ä¸º<code>fiber ç»“æ„</code>ï¼Œå¡«å…¥è®¸å¤šè°ƒåº¦ã€æ›´æ–°ã€diffç›¸å…³æ•°æ®ï¼Œå¹¶è½¬æ¢<code>astæ ‘</code>ä¸º<code>è™šæ‹ŸDOMæ ‘</code>ï¼Œå†å®ŒæˆæŒ‚è½½ã€‚</li><li>åœ¨vueä¸­ï¼Œæ¨¡ç‰ˆè¯­æ³• ç»è¿‡ <code>generate</code>å¤„ç†(æ­£åˆ™åŒ¹é… ç”Ÿæˆ <code>astæŠ½è±¡è¯­æ³•æ ‘</code>)ï¼Œ<code>render</code>ä¸­è°ƒç”¨<code>_c()/createElement()</code>å‡½æ•°å°†<code>astæ ‘</code>ç”Ÿæˆ<code>VNode(è™šæ‹ŸDOM)</code>,å†å®ŒæˆæŒ‚è½½ã€‚</li></ul><h4 id="è™šæ‹ŸDOMçš„æ¥æº"><a href="#è™šæ‹ŸDOMçš„æ¥æº" class="headerlink" title="è™šæ‹ŸDOMçš„æ¥æº"></a>è™šæ‹ŸDOMçš„æ¥æº</h4><p>reactçš„å‰èº«æ˜¯facebookçš„<code>XHP</code>ï¼Œåœ¨è¿™ä¸ªæ¡†æ¶ä¸­ï¼Œé¡µé¢éƒ½æ˜¯é€šè¿‡è½¬ä¹‰çš„æ–¹å¼ç”Ÿæˆçš„ï¼Œå¹¶æ²¡æœ‰ç›´æ¥çš„HTMLï¼Œç¡®ä¿åœ¨<code>XHP</code>ä¸­å†™å‡ºå®‰å…¨çš„é™æ€é¡µé¢ã€‚</p><p>åˆè¡·æ˜¯ï¼š</p><ul><li>ç®€åŒ–å‰ç«¯å¼€å‘ï¼ˆåç«¯èµ‹èƒ½ï¼‰</li><li>é˜²æ­¢xssæ”»å‡»</li></ul><p>å‘å±•æ˜¯ï¼š</p><ul><li>é€šè¿‡è™šæ‹ŸDOMè§„é¿é£é™©ï¼Œä¸è®©ç”¨æˆ·ç›´æ¥çš„æ“ä½œDOMäº†ï¼Œè€Œæ˜¯æŠŠå®ƒå°èµ·æ¥è‡ªå·±ç®¡ç†</li></ul><h4 id="è™šæ‹ŸDOMçš„è¡¨ç°å½¢å¼"><a href="#è™šæ‹ŸDOMçš„è¡¨ç°å½¢å¼" class="headerlink" title="è™šæ‹ŸDOMçš„è¡¨ç°å½¢å¼"></a>è™šæ‹ŸDOMçš„è¡¨ç°å½¢å¼</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    tag: <span class="string">'input'</span>,</span><br><span class="line">    props: &#123;</span><br><span class="line">        type: <span class="string">'button'</span>,</span><br><span class="line">        value: <span class="string">''</span></span><br><span class="line">    &#125;,</span><br><span class="line">    childrean: []</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>React æœ‰ä¸¤ä¸ªå‡½æ•°<br>    * diff å‡½æ•°ï¼Œå»è®¡ç®—çŠ¶æ€å˜æ›´å‰åçš„è™šæ‹Ÿ DOM æ ‘å·®å¼‚<br>    * æ¸²æŸ“å‡½æ•°ï¼Œæ¸²æŸ“æ•´ä¸ªè™šæ‹Ÿ DOM æ ‘æˆ–è€…å¤„ç†å·®å¼‚ç‚¹ã€‚<br>    ç°åœ¨æ˜¯ä¸æ˜¯æœ‰äº›ç†è§£ä¸ºä»€ä¹ˆ React ä¸ ReactDOM æ˜¯ä¸¤ä¸ªåº“äº†ï¼Ÿæ­£æ˜¯ç”±äºè®¡ç®—ä¸æ¸²æŸ“çš„åˆ†å·¥ã€‚<br>    å…¶ä¸­ React çš„ä¸»è¦å·¥ä½œæ˜¯ç»„ä»¶å®ç°ã€æ›´æ–°è°ƒåº¦ï¼›ReactDOM æä¾›äº†åœ¨ ç½‘é¡µä¸Šæ¸²æŸ“ çš„åŸºç¡€</p></blockquote><h4 id="è™šæ‹ŸDOMçš„ä¼˜ç¼ºç‚¹"><a href="#è™šæ‹ŸDOMçš„ä¼˜ç¼ºç‚¹" class="headerlink" title="è™šæ‹ŸDOMçš„ä¼˜ç¼ºç‚¹"></a>è™šæ‹ŸDOMçš„ä¼˜ç¼ºç‚¹</h4><p>ä¼˜ç‚¹</p><ul><li>æ€§èƒ½ä¼˜è¶Š</li><li>è§„é¿XSS</li><li>å¯è·¨å¹³å°</li></ul><p>ä½†æ˜¯ä¸æ˜¯æ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯è™šæ‹ŸDOMæ›´é«˜æ•ˆ<br>&emsp;&emsp;å¤§é‡çš„ç›´æ¥æ“ä½œDOMå®¹æ˜“å¼•èµ·é¡µé¢æ€§èƒ½ä¸‹é™ã€‚è¿™æ—¶ReactåŸºäºè™šæ‹ŸDOMçš„diffå¤„ç†ä¸æ‰¹å¤„ç†æ“ä½œï¼Œå¯é™ä½DOMçš„æ“ä½œé¢‘æ¬¡å’ŒèŒƒå›´ï¼Œæå‡é¡µé¢æ€§èƒ½<br>&emsp;&emsp;ä½†æ˜¯åœ¨é¦–æ¬¡æ¸²æŸ“æˆ–è€…å¾®é‡domæ“ä½œçš„æ—¶å€™ï¼Œè™šæ‹ŸDOMçš„æ€§èƒ½å°±æ›´æ…¢ä¸€äº›ã€‚</p><p>é‚£è™šæ‹Ÿ DOM ä¸€å®šå¯ä»¥è§„é¿ XSSå—ï¼Ÿ<br>&emsp;&emsp;è™šæ‹Ÿ DOM å†…éƒ¨ç¡®ä¿äº†å­—ç¬¦è½¬ä¹‰ï¼Œæ‰€ä»¥ç¡®å®å¯ä»¥åšåˆ°è¿™ç‚¹ï¼Œä½† React å­˜åœ¨é£é™©ï¼Œå› ä¸º React ç•™æœ‰ dangerouslySetInnerHTML API ç»•è¿‡è½¬ä¹‰ã€‚</p><p>æ²¡æœ‰è™šæ‹Ÿ DOM ä¸èƒ½å®ç°è·¨å¹³å°å—ï¼Ÿ<br>&emsp;&emsp;æ¯”å¦‚ NativeScript æ²¡æœ‰è™šæ‹Ÿ DOM å±‚ ï¼Œå®ƒæ˜¯é€šè¿‡æä¾›å…¼å®¹åŸç”Ÿ API çš„ JS API å®ç°è·¨å¹³å°å¼€å‘ã€‚<br>é‚£è™šæ‹Ÿ DOM çš„ä¼˜åŠ¿åœ¨å“ªé‡Œï¼Ÿ<br>&emsp;&emsp;å®é™…ä¸Šå®ƒçš„ä¼˜åŠ¿åœ¨äºè·¨å¹³å°çš„æˆæœ¬æ›´ä½ã€‚åœ¨ React Native ä¹‹åï¼Œå‰ç«¯ç¤¾åŒºä»è™šæ‹Ÿ DOM ä¸­ä½“ä¼šåˆ°äº†è·¨å¹³å°çš„æ— é™å‰æ™¯ï¼Œ<br>æ‰€ä»¥åœ¨åç»­çš„å‘å±•ä¸­ï¼Œéƒ½å€Ÿé‰´äº†è™šæ‹Ÿ DOMã€‚æ¯”å¦‚ï¼šç¤¾åŒºæµè¡Œçš„å°ç¨‹åºåŒæ„æ–¹æ¡ˆï¼Œåœ¨æ„å»ºè¿‡ç¨‹ä¸­ä¼šæä¾›ç±»ä¼¼è™šæ‹Ÿ DOM çš„ç»“æ„æè¿°å¯¹è±¡ï¼Œæ¥æ”¯æ’‘å¤šç«¯è½¬æ¢ã€‚</p><p>ç¼ºç‚¹</p><ul><li>å†…å­˜å ç”¨è¾ƒé«˜</li><li>éš¾ä»¥è¿›è¡Œä¼˜åŒ–</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;Virtual-DOM-ä¹Ÿè¢«ç§°ä¸ºè™šæ‹ŸDOM&quot;&gt;&lt;a href=&quot;#Virtual-DOM-ä¹Ÿè¢«ç§°ä¸ºè™šæ‹ŸDOM&quot; class=&quot;headerlink&quot; title=&quot;Virtual DOM ä¹Ÿè¢«ç§°ä¸ºè™šæ‹ŸDOM&quot;&gt;&lt;/a&gt;Virtual DOM ä¹Ÿè¢«ç§°ä¸ºè™šæ‹ŸDOM&lt;/
      
    
    </summary>
    
    
      <category term="react" scheme="https://feidom-up.github.io/categories/react/"/>
    
      <category term="vue" scheme="https://feidom-up.github.io/categories/react/vue/"/>
    
    
      <category term="react" scheme="https://feidom-up.github.io/tags/react/"/>
    
      <category term="vue" scheme="https://feidom-up.github.io/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>Serverlessæ˜¯ä»€ä¹ˆ</title>
    <link href="https://feidom-up.github.io/2021/01/01/Serverless%E6%98%AF%E4%BB%80%E4%B9%88/"/>
    <id>https://feidom-up.github.io/2021/01/01/Serverless%E6%98%AF%E4%BB%80%E4%B9%88/</id>
    <published>2021-01-01T13:59:56.000Z</published>
    <updated>2021-05-06T02:46:51.785Z</updated>
    
    <content type="html"><![CDATA[<h3 id="æ˜¯ä»€ä¹ˆ"><a href="#æ˜¯ä»€ä¹ˆ" class="headerlink" title="æ˜¯ä»€ä¹ˆ"></a>æ˜¯ä»€ä¹ˆ</h3><ul><li><p>å¹¿ä¹‰ä¸Šæ¥è¯´<br>æ˜¯æ„å»ºå’Œè¿è¡Œè½¯ä»¶æ—¶ä¸éœ€è¦å…³å¿ƒæœåŠ¡å™¨çš„ä¸€ç§æ¶æ„æ€æƒ³ã€‚è™½ç„¶ Serverless ç¿»è¯‘è¿‡æ¥æ˜¯ â€œæ— æœåŠ¡å™¨â€ï¼Œä½†è¿™å¹¶ä¸ä»£è¡¨ç€åº”ç”¨è¿è¡Œä¸éœ€è¦æœåŠ¡å™¨ï¼Œè€Œæ˜¯å¼€å‘è€…ä¸éœ€è¦å…³å¿ƒæœåŠ¡å™¨ã€‚è€ŒåŸºäº Serverless æ€æƒ³å®ç°çš„è½¯ä»¶æ¶æ„å°±æ˜¯ Serverless æ¶æ„ã€‚</p></li><li><p>ç‹­ä¹‰ä¸Šè¯´<br>  ç‹­ä¹‰çš„ Serverless æ˜¯ <code>FaaS</code> å’Œ <code>BaaS</code> çš„ç»„åˆã€‚</p><ul><li>FaaSï¼ˆFunction as a Serviceï¼‰ï¼š<ol><li>FaaSæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°è¿è¡Œå¹³å°ï¼Œå‡½æ•°è¿è¡Œæ—¶ï¼Œä½ å¯¹åº•å±‚çš„æœåŠ¡å™¨æ˜¯æ— æ„ŸçŸ¥çš„ï¼ŒFaaS äº§å“ä¼šè´Ÿè´£èµ„æºçš„è°ƒåº¦å’Œè¿ç»´ï¼Œè¿™æ˜¯å®ƒçš„ç‰¹ç‚¹ä¹‹ä¸€ï¼Œ<strong>ä¸ç”¨è¿ç»´</strong>ã€‚</li><li>FaaS ä¸­çš„å‡½æ•°ä¹Ÿä¸æ˜¯æŒç»­è¿è¡Œçš„ï¼Œè€Œæ˜¯é€šè¿‡äº‹ä»¶è¿›è¡Œè§¦å‘ï¼Œæ¯”å¦‚ HTTP äº‹ä»¶ã€æ¶ˆæ¯äº‹ä»¶ç­‰ï¼Œäº§ç”Ÿäº‹ä»¶çš„æºå¤´å«è§¦å‘å™¨ï¼ŒFaaS å¹³å°ä¼šé›†æˆè¿™äº›è§¦å‘å™¨ï¼Œæˆ‘ä»¬ç›´æ¥ç”¨å°±è¡Œï¼Œè¿™æ˜¯ FaaS çš„ç¬¬äºŒä¸ªç‰¹ç‚¹ï¼Œ<strong>äº‹ä»¶é©±åŠ¨</strong>ã€‚</li><li>FaaS çš„ç¬¬ä¸‰ä¸ªç‰¹ç‚¹æ˜¯<strong>æŒ‰é‡ä»˜è´¹</strong>ã€‚ FaaS äº§å“çš„æ”¶è´¹æ–¹å¼ï¼Œéƒ½æ˜¯æŒ‰ç…§å‡½æ•°æ‰§è¡Œæ¬¡æ•°å’Œæ‰§è¡Œæ—¶æ¶ˆè€—çš„ CPUã€å†…å­˜ç­‰èµ„æºè¿›è¡Œè®¡è´¹çš„ã€‚</li><li>FaaS åœ¨è¿è¡Œå‡½æ•°çš„æ—¶å€™ï¼Œä¼šæ ¹æ®å¹¶å‘é‡è‡ªåŠ¨ç”Ÿæˆå¤šä¸ªå‡½æ•°å®ä¾‹ï¼Œå¹¶ä¸”å¹¶å‘ç†è®ºæ˜¯æ²¡æœ‰ä¸Šé™çš„ï¼Œè¿™æ˜¯å®ƒçš„ç¬¬å››ä¸ªç‰¹ç‚¹ï¼Œ<strong>å¼¹æ€§ä¼¸ç¼©</strong>ã€‚</li></ol><ul><li>FaaS æ¯æ¬¡æ‰§è¡Œå‡½æ•°æ—¶ï¼Œéƒ½ä¼šåˆå§‹åŒ–ä¸€ä¸ªæ–°çš„è¿è¡Œç¯å¢ƒï¼Œç„¶åä»å¤´å¼€å§‹æ‰§è¡Œæ•´ä¸ªä»£ç ï¼Œè€Œä¸æ˜¯åªæ‰§è¡Œå…¶ä¸­çš„ handler æ–¹æ³•ã€‚æ‰§è¡Œå®Œæ¯•åï¼Œè¿è¡Œç¯å¢ƒå°±ä¼šè¢«é‡Šæ”¾ã€‚è¿™æ ·æ¯æ¬¡å‡½æ•°æ‰§è¡Œï¼Œéƒ½æ˜¯æ–°çš„è¿è¡Œç¯å¢ƒï¼Œè‡ªç„¶ä¸åŒå‡½æ•°ä¹‹é—´å°±æ— æ³•å…±ç”¨ pv è¿™ä¸ªå˜é‡äº†ã€‚FaaS çš„å¦ä¸€ä¸ªç‰¹ç‚¹ï¼Œ<strong>æ— çŠ¶æ€</strong>ã€‚</li></ul></li><li>BaaSï¼ˆBackend as a Serviceï¼‰<br> ä¸ºäº†è§£å†³åˆ†å¸ƒå¼ä¸­çš„çŠ¶æ€å…±äº«é—®é¢˜<br> BaaS æœ¬è´¨ä¸Šå°±æ˜¯æŠŠåç«¯åŠŸèƒ½å°è£…èµ·æ¥ï¼Œä»¥æ¥å£çš„å½¢å¼æä¾›æœåŠ¡ã€‚</li></ul></li><li><p>æ€»<br>åŸºäº FaaS å’Œ BaaS çš„æ¶æ„ï¼Œæ˜¯ä¸€ç§è®¡ç®—å’Œå­˜å‚¨åˆ†ç¦»çš„æ¶æ„ã€‚ è®¡ç®—ç”± FaaS è´Ÿè´£ï¼Œå­˜å‚¨ç”± BaaS è´Ÿè´£ï¼Œè®¡ç®—å’Œå­˜å‚¨ä¹Ÿè¢«åˆ†å¼€éƒ¨ç½²å’Œæ”¶è´¹ã€‚è¿™ä½¿åº”ç”¨çš„å­˜å‚¨ä¸å†æ˜¯åº”ç”¨æœ¬èº«çš„ä¸€éƒ¨åˆ†ï¼Œè€Œæ˜¯æ¼”å˜æˆäº†ç‹¬ç«‹çš„äº‘æœåŠ¡ï¼Œé™ä½äº†æ•°æ®ä¸¢å¤±çš„é£é™©ã€‚è€Œåº”ç”¨æœ¬èº«ä¹Ÿå˜æˆäº†æ— çŠ¶æ€çš„åº”ç”¨ï¼Œæ›´å®¹æ˜“è¿›è¡Œè°ƒåº¦å’Œæ‰©ç¼©å®¹ã€‚</p></li></ul><p>åŸºäº FaaS å’Œ BaaS ï¼Œä½ çš„åº”ç”¨å°±å®ç°äº†è‡ªåŠ¨å¼¹æ€§ä¼¸ç¼©ã€æŒ‰é‡ä»˜è´¹ã€ä¸ç”¨å…³å¿ƒæœåŠ¡å™¨ï¼Œè¿™æ­£æ˜¯ Serverless æ¶æ„çš„å¿…è¦å› ç´ ã€‚æ‰€ä»¥è¯´ç‹­ä¹‰çš„ Serverless æ˜¯ FaaS å’Œ BaaS çš„ç»„åˆã€‚</p><h3 id="ä¸å…¶ä»–æ¶æ„çš„åŒºåˆ«"><a href="#ä¸å…¶ä»–æ¶æ„çš„åŒºåˆ«" class="headerlink" title="ä¸å…¶ä»–æ¶æ„çš„åŒºåˆ«"></a>ä¸å…¶ä»–æ¶æ„çš„åŒºåˆ«</h3><ul><li>PaaS<br>  PaaS ï¼ˆå¹³å°å³æœåŠ¡ï¼‰æ˜¯äº‘è®¡ç®—è™šæ‹Ÿæœºæ—¶ä»£çš„ä¸»è¦å½¢æ€ä¹‹ä¸€ã€‚ å®ƒæ˜¯æŒ‡äº‘å‚å•†æä¾›å¼€å‘å·¥å…·ã€ä¾èµ–åº“ã€æœåŠ¡å’Œè¿è¡Œå¹³å°ç­‰èƒ½åŠ›ï¼Œå¼€å‘è€…å¯ä»¥ä¾èµ–è¿™äº›èƒ½åŠ›å°†è‡ªå·±çš„åº”ç”¨ç›´æ¥éƒ¨ç½²åœ¨äº‘å¹³å°ä¸Šï¼Œä¸ç”¨å…³å¿ƒåº•å±‚çš„è®¡ç®—èµ„æºã€ç½‘ç»œã€å­˜å‚¨ç­‰ã€‚è™½ç„¶ä¸Serverless å¾ˆç±»ä¼¼ï¼Œä½†ä¾æ—§å­˜åœ¨ä¸€äº›åŒºåˆ«ã€‚</li><li>Kubernetes<br>  Kubernetes æ˜¯ä¸€ç§å®¹å™¨ç¼–æ’æŠ€æœ¯ã€‚åœ¨ Kubernetes ä¸­åº”ç”¨è¿è¡Œçš„åŸºæœ¬å•ä½æ˜¯ Podï¼ˆå®¹å™¨ç»„ï¼‰ï¼ŒPod æ˜¯åº”ç”¨åŠè¿è¡Œç¯å¢ƒçš„é›†åˆï¼Œæ‰€ä»¥ä½ ä¹Ÿä¸ç”¨å…³å¿ƒæœåŠ¡å™¨äº†ã€‚åŸºäº Kubernetesï¼Œä½ èƒ½å¾ˆæ–¹ä¾¿åœ°è¿›è¡Œ Pod çš„ç®¡ç†ï¼Œå¹¶ä¸”å®ç°åº”ç”¨çš„å¼¹æ€§ä¼¸ç¼©ã€‚<br>  æ‰€ä»¥ï¼ŒKubernetes æ˜¯ä»‹äº Serverful å’Œ Serverless ä¸­é—´çš„äº§ç‰©ã€‚</li></ul><p><strong>Serverless æ˜¯äº‘åŸç”Ÿçš„ä¸€ç§å®ç°ï¼Œäº‘åŸç”Ÿçš„å¦ä¸€ç§å®ç°æ˜¯ Kubernetesã€‚</strong></p><table><thead><tr><th align="left">Serverless</th><th align="left">PaaS ï¼ˆå¹³å°å³æœåŠ¡ï¼‰</th><th align="left">Kubernetes</th></tr></thead><tbody><tr><td align="left">æŒ‰å®é™…ä½¿ç”¨é‡ä»˜è´¹</td><td align="left">æŒ‰èµ„æºä»˜è´¹</td><td align="left">æŒ‰ç…§èµ„æºæ•°é‡è®¡è´¹</td></tr></tbody></table><h3 id="Serverless-çš„ä¼˜ç¼ºç‚¹"><a href="#Serverless-çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="Serverless çš„ä¼˜ç¼ºç‚¹"></a>Serverless çš„ä¼˜ç¼ºç‚¹</h3><ul><li>ä¼˜ç‚¹ï¼šä¸ç”¨è¿ç»´ã€å¼¹æ€§ä¼¸ç¼©ã€èŠ‚çœæˆæœ¬ã€å¼€å‘ç®€å•ã€é™ä½é£é™©ã€æ˜“äºæ‰©å±•ã€‚</li><li>ç¼ºç‚¹ï¼š<ol><li>ä¾èµ–ç¬¬ä¸‰æ–¹æœåŠ¡ï¼šä¸€æ—¦ä½ é€‰æ‹©äº†ä¸€ä¸ªäº‘å‚å•†ï¼Œè¦æƒ³ä»ä¸€ä¸ªäº‘ç§»åˆ°å¦ä¸€ä¸ªå°ï¼Œæˆæœ¬å¾ˆé«˜</li><li>åº•å±‚ç¡¬ä»¶çš„å¤šæ ·æ€§ï¼šä»£ç ä¾èµ–çš„åœ°å±‚ç¡¬ä»¶å¤šæ ·æ€§</li><li>åº”ç”¨æ€§èƒ½ç“¶é¢ˆï¼šå‡½æ•°è¿è¡Œå‰éœ€è¦ç°åˆå§‹åŒ–å‡½æ•°è¿è¡Œç¯å¢ƒï¼Œè¿™ä¸ªè¿‡ç¨‹éœ€è¦æ¶ˆè€—ä¸€å®šæ—¶é—´ã€‚å› ä¸ºå‡½æ•°ä¸æ˜¯æŒç»­â€œåœ¨çº¿â€çš„ï¼Œè€Œæ˜¯éœ€è¦è¿è¡Œçš„æ—¶å€™æ‰å¯åŠ¨ï¼ˆä¸åƒä¼ ç»Ÿåº”ç”¨ï¼ŒæœåŠ¡æ˜¯ä¸€ç›´å¯åŠ¨çš„ï¼‰ã€‚</li><li>å‡½æ•°é€šä¿¡æ•ˆç‡ä½ï¼šåœ¨ Serverless åº”ç”¨ä¸­ï¼Œå‡½æ•°ä¸å‡½æ•°ä¹‹é—´å°±å®Œå…¨ç‹¬ç«‹äº†ã€‚å¦‚æœä¸¤ä¸ªå‡½æ•°çš„æ•°æ®æœ‰ä¾èµ–ï¼Œéœ€è¦è¿›è¡Œé€šä¿¡ã€äº¤æ¢æ•°æ®ï¼Œå°±è¦è¿›è¡Œå‡½æ•°ä¸å‡½æ•°ä¹‹é—´çš„è°ƒç”¨ï¼ˆè°ƒç”¨æ–¹å¼æ˜¯ HTTP è°ƒç”¨ï¼‰ã€‚ç›¸æ¯”ä¹‹å‰çš„å†…å­˜è°ƒç”¨ï¼Œæ•°æ®äº¤äº’æ•ˆç‡æ˜¾ç„¶ä½äº†å¾ˆå¤šã€‚è€Œè¿™ä¸ªé—®é¢˜çš„æœ¬è´¨ï¼Œæ˜¯ FaaS è¿˜æ²¡æœ‰æ¯”è¾ƒå¥½çš„æ•°æ®é€šä¿¡åè®®æˆ–æ–¹æ¡ˆã€‚</li><li>å¼€å‘è°ƒè¯•å¤æ‚ï¼šServerless æ¶æ„æ­£å¤„äºé£é€Ÿå‘å±•çš„é˜¶æ®µï¼Œå…¶å¼€å‘ã€è°ƒè¯•ã€éƒ¨ç½²å·¥å…·é“¾å¹¶ä¸å®Œå–„ï¼ˆåŸºæœ¬æ˜¯æ¯ä¸ªäº‘å‚å•†å„ç©å„çš„ï¼‰</li></ol></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;æ˜¯ä»€ä¹ˆ&quot;&gt;&lt;a href=&quot;#æ˜¯ä»€ä¹ˆ&quot; class=&quot;headerlink&quot; title=&quot;æ˜¯ä»€ä¹ˆ&quot;&gt;&lt;/a&gt;æ˜¯ä»€ä¹ˆ&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;å¹¿ä¹‰ä¸Šæ¥è¯´&lt;br&gt;æ˜¯æ„å»ºå’Œè¿è¡Œè½¯ä»¶æ—¶ä¸éœ€è¦å…³å¿ƒæœåŠ¡å™¨çš„ä¸€ç§æ¶æ„æ€æƒ³ã€‚è™½ç„¶ Serverless ç¿»è¯‘è¿‡æ¥æ˜¯ â€œæ— æœ
      
    
    </summary>
    
    
    
      <category term="serverless" scheme="https://feidom-up.github.io/tags/serverless/"/>
    
  </entry>
  
  <entry>
    <title>Reacté¢å‘ç»„ä»¶è·¨å±‚çº§é€šä¿¡</title>
    <link href="https://feidom-up.github.io/2020/12/31/React%E9%9D%A2%E5%90%91%E7%BB%84%E4%BB%B6%E8%B7%A8%E5%B1%82%E7%BA%A7%E9%80%9A%E4%BF%A1/"/>
    <id>https://feidom-up.github.io/2020/12/31/React%E9%9D%A2%E5%90%91%E7%BB%84%E4%BB%B6%E8%B7%A8%E5%B1%82%E7%BA%A7%E9%80%9A%E4%BF%A1/</id>
    <published>2020-12-31T09:13:02.000Z</published>
    <updated>2021-05-06T02:46:51.784Z</updated>
    
    <content type="html"><![CDATA[<h4 id="çˆ¶ä¸å­"><a href="#çˆ¶ä¸å­" class="headerlink" title="çˆ¶ä¸å­"></a>çˆ¶ä¸å­</h4><pre><code>çˆ¶ç»„ä»¶åŒ…è£¹å­ç»„ä»¶ï¼Œçˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’æ•°æ®ã€‚</code></pre><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­ </span></span><br><span class="line"><span class="keyword">const</span> Button = <span class="function">(<span class="params">&#123; text &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    &lt;button type=<span class="string">"button"</span>&gt;&#123;text&#125;&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ çˆ¶</span></span><br><span class="line"><span class="regexp">class HomePage extends React.Component &#123;</span></span><br><span class="line"><span class="regexp">state = &#123;</span></span><br><span class="line"><span class="regexp">    text: "é»˜è®¤æ–‡æ¡ˆ"</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">asyc componentDidMount() &#123;</span></span><br><span class="line"><span class="regexp">    const response = await fetch('/</span>api/buttonText<span class="string">')</span></span><br><span class="line"><span class="string">    this.setState(&#123;</span></span><br><span class="line"><span class="string">    text: response.buttoText</span></span><br><span class="line"><span class="string">    &#125;)</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">    render() &#123;</span></span><br><span class="line"><span class="string">        const &#123;</span></span><br><span class="line"><span class="string">        text</span></span><br><span class="line"><span class="string">        &#125; = this.state</span></span><br><span class="line"><span class="string">        return (</span></span><br><span class="line"><span class="string">            &lt;Button text=&#123;text&#125; /&gt;</span></span><br><span class="line"><span class="string">        )</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·çš„é€šä¿¡æ–¹å¼éå¸¸é€‚ç”¨äºå±•ç¤ºç»„ä»¶ã€‚</p><h4 id="å­ä¸çˆ¶"><a href="#å­ä¸çˆ¶" class="headerlink" title="å­ä¸çˆ¶"></a>å­ä¸çˆ¶</h4><pre><code>å­ç»„ä»¶å­˜åœ¨äºçˆ¶ç»„ä»¶ä¹‹ä¸­ï¼Œå­ç»„ä»¶éœ€è¦å‘çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®ã€‚</code></pre><ul><li>å›è°ƒå‡½æ•°ï¼ˆä¸»è¦æ–¹å¼ï¼‰</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FetchPosts</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        loading: <span class="literal">true</span>,</span><br><span class="line">        data: []</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">async</span> componentDidMount() &#123;</span><br><span class="line">        <span class="keyword">const</span> response = <span class="keyword">await</span> fetch(<span class="string">'/api/posts'</span>)</span><br><span class="line">        <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">            data: response.data,</span><br><span class="line">            loading: <span class="literal">false</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.state.loading) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Loading</span> /&gt;</span></span>  </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.props.renderPosts(<span class="keyword">this</span>.state.data)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// çˆ¶</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HomePage</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">        &lt;FetchPosts</span><br><span class="line">            renderPosts=&#123;posts =&gt; (</span><br><span class="line">            &lt;ul&gt;</span><br><span class="line">                &#123;posts.map(<span class="function"><span class="params">post</span> =&gt;</span> (</span><br><span class="line">                &lt;li key=&#123;post.id&#125;&gt;</span><br><span class="line">                    &lt;h2&gt;&#123;post.title&#125;&lt;<span class="regexp">/h2&gt;</span></span><br><span class="line"><span class="regexp">                    &lt;p&gt;&#123;post.description&#125;&lt;/</span>p&gt;</span><br><span class="line">                &lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">                    ))&#125;</span></span><br><span class="line"><span class="regexp">                &lt;/u</span>l&gt;</span><br><span class="line">            )&#125;</span><br><span class="line">        /&gt;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>å®ä¾‹å‡½æ•°ï¼ˆä¸ç¬¦åˆ React çš„è®¾è®¡ç†å¿µï¼Œä¸è¢«æ¨èï¼‰</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HomePage</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">   modalRef = React.createRef()  <span class="comment">//å®ä¾‹</span></span><br><span class="line">   showModal = () =&#123;</span><br><span class="line">     <span class="keyword">this</span>.modalRef.show()</span><br><span class="line">   &#125;</span><br><span class="line">   hideModal = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">     <span class="keyword">this</span>.modalRef.hide()</span><br><span class="line">   &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;</span><br><span class="line">          text</span><br><span class="line">        &#125; = <span class="keyword">this</span>.state</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;&gt;</span><br><span class="line">              &lt;Button onClick=&#123;<span class="keyword">this</span>.showModal&#125;&gt;å±•ç¤º Modal &lt;<span class="regexp">/Button&gt;</span></span><br><span class="line"><span class="regexp">              &lt;Button onClick=&#123;this.hideModal&#125;&gt;éšè— Modal &lt;/</span>Button&gt;</span><br><span class="line">              &lt;Modal ref=&#123;modalRef&#125; /&gt;</span><br><span class="line">            &lt;<span class="regexp">/&gt;</span></span><br><span class="line"><span class="regexp">          /</span>&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å…„å¼Ÿ"><a href="#å…„å¼Ÿ" class="headerlink" title="å…„å¼Ÿ"></a>å…„å¼Ÿ</h4><p>  ä¸¤ä¸ªç»„ä»¶å¹¶åˆ—å­˜åœ¨äºçˆ¶ç»„ä»¶ä¸­ï¼Œæ•°æ®éœ€è¦è¿›è¡Œç›¸äº’ä¼ é€’ï¼Œå¾€å¾€ä¾èµ–å…±åŒçš„çˆ¶ç»„ä»¶è¿›è¡Œä¸­è½¬ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Input</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    handleChanged = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.onChangeText(e.target.text)</span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">onChange</span>=<span class="string">&#123;handleTextChanged&#125;</span> /&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å­</span></span><br><span class="line"><span class="keyword">const</span> StaticText = <span class="function">(<span class="params">&#123; children &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;P&gt;&#123;children&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ çˆ¶</span></span><br><span class="line"><span class="regexp">class HomePage extends React.Component &#123;</span></span><br><span class="line"><span class="regexp">    state = &#123;</span></span><br><span class="line"><span class="regexp">        text: 'é»˜è®¤æ–‡æ¡ˆ'</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">    handleTextChanged = (text) =&gt; &#123;</span></span><br><span class="line"><span class="regexp">        this.setState(&#123;</span></span><br><span class="line"><span class="regexp">        text,</span></span><br><span class="line"><span class="regexp">        &#125;)</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">    render() &#123;</span></span><br><span class="line"><span class="regexp">        return (</span></span><br><span class="line"><span class="regexp">            &lt;&gt;</span></span><br><span class="line"><span class="regexp">              &lt;Input onChangeText=&#123;this.handleTextChanged&#125; /</span>&gt;</span><br><span class="line">              &lt;StaticText&gt;<span class="keyword">this</span>.state.text&lt;<span class="regexp">/StaticText&gt; </span></span><br><span class="line"><span class="regexp">            &lt;/</span>&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ— ç›´æ¥å…³ç³»"><a href="#æ— ç›´æ¥å…³ç³»" class="headerlink" title="æ— ç›´æ¥å…³ç³»"></a>æ— ç›´æ¥å…³ç³»</h4><p>  ä¸¤ä¸ªç»„ä»¶å¹¶æ²¡æœ‰ç›´æ¥çš„å…³è”å…³ç³»ï¼Œå¤„åœ¨ä¸€æ£µæ ‘ä¸­ç›¸è·ç”šè¿œçš„ä½ç½®ï¼Œä½†éœ€è¦å…±äº«ã€ä¼ é€’æ•°æ®ã€‚</p></li><li><p>Context<br>  Context ç¬¬ä¸€ä¸ªæœ€å¸¸è§çš„ç”¨é€”å°±æ˜¯åš i18n</p><ol><li>i18nä½¿ç”¨Context <code>I18nContext</code><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>  &#123; createContext &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">const</span> I18nContext = createContext(&#123;</span><br><span class="line">    translate: <span class="function"><span class="params">()</span> =&gt;</span> <span class="string">''</span>,</span><br><span class="line">    getLocale: <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;,</span><br><span class="line">    setLocale: <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> I18nContext;</span><br></pre></td></tr></table></figure></li><li>ç”¨<code>I18nContext</code>å°è£…ä¸ªç»„ä»¶<code>I18nProvider</code><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> I18nContext <span class="keyword">from</span> <span class="string">'./I18nContext'</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">I18nProvider</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        locale: <span class="string">''</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">const</span> i18n =  &#123;</span><br><span class="line">            translate: <span class="function"><span class="params">key</span> =&gt;</span> <span class="keyword">this</span>.props.languages[locale][key],</span><br><span class="line">            getLocale: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">this</span>.state.locale,</span><br><span class="line">            setLocale: <span class="function"><span class="params">locale</span> =&gt;</span> <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">                loacal,</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;I18nContext.Provider value=&#123;i18n&#125;&gt;</span><br><span class="line">                &#123;<span class="keyword">this</span>.props.children&#125;</span><br><span class="line">            &lt;<span class="regexp">/I18nContext.Provider&gt;</span></span><br><span class="line"><span class="regexp">        )</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">export default I18nProvider;</span></span><br></pre></td></tr></table></figure></li><li>ç”¨<code>I18nContext</code>å®ç°é«˜é˜¶ç»„ä»¶<code>withI18n</code><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> I18nContext <span class="keyword">from</span> <span class="string">'./I18nContext'</span>;</span><br><span class="line"><span class="keyword">const</span> withI18n = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">WrappedComponent</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="function">(<span class="params">props</span>) =&gt;</span> (</span><br><span class="line">        &lt;I18nContext.Consumer&gt;</span><br><span class="line">            &#123;i18n =&gt; <span class="xml"><span class="tag">&lt;<span class="name">WrappedComponent</span> &#123;<span class="attr">...i18n</span>&#125; &#123;<span class="attr">...props</span>&#125; /&gt;</span></span>&#125;</span><br><span class="line">        &lt;<span class="regexp">/I18nContext.Consumer&gt;</span></span><br><span class="line"><span class="regexp">        )</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br><span class="line"><span class="regexp">export default withI18n;</span></span><br></pre></td></tr></table></figure></li><li>åœ¨æœ€é¡¶å±‚æ³¨å…¥ Provider<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; I18nProvider &#125; <span class="keyword">from</span> <span class="string">'./i18n'</span>;</span><br><span class="line"><span class="keyword">const</span> locales = [ <span class="string">'en-US'</span>, <span class="string">'zh-CN'</span> ];</span><br><span class="line"><span class="keyword">const</span> languages = &#123;</span><br><span class="line">    <span class="string">'en-US'</span>: <span class="built_in">require</span>(<span class="string">'./locales/en-US'</span>),</span><br><span class="line">    <span class="string">'zh-CN'</span>: <span class="built_in">require</span>(<span class="string">'./locales/zh-CN'</span>),</span><br><span class="line">&#125;</span><br><span class="line">ReactDOM.render(</span><br><span class="line">    &lt;I18nProvider locales=&#123;locales&#125; languages=&#123;languages&#125;&gt;</span><br><span class="line">        &lt;App /&gt;</span><br><span class="line">    &lt;<span class="regexp">/I18nProvider&gt;,</span></span><br><span class="line"><span class="regexp">    document.getElementById('root')</span></span><br><span class="line"><span class="regexp">);</span></span><br></pre></td></tr></table></figure></li><li>åœ¨éœ€è¦çš„åœ°æ–¹ä½¿ç”¨<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Title = withI18n(</span><br><span class="line">    (&#123; translate &#125;) =&gt; &#123; </span><br><span class="line">        <span class="keyword">return</span> ( <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;translate('title')&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span> )</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"><span class="keyword">const</span> Footer = withI18n(</span><br><span class="line">    (&#123; setLocale &#125;) =&gt; &#123; </span><br><span class="line">        <span class="keyword">return</span> <span class="function">(<span class="params"> &lt;Button onClick=((</span>) =&gt;</span> &#123;</span><br><span class="line">            setLocale(<span class="string">'zh-CN'</span>)</span><br><span class="line">        &#125;) /&gt; )</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure></li></ol></li><li><p>å…¨å±€å˜é‡<br>  å…¨å±€å˜é‡ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯æ”¾åœ¨ Window ä¸Šçš„å˜é‡ã€‚ä½†å€¼å¾—æ³¨æ„çš„æ˜¯ä¿®æ”¹ Window ä¸Šçš„å˜é‡å¹¶ä¸ä¼šå¼•èµ· React ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚</p></li><li><p>çŠ¶æ€ç®¡ç†æ¡†æ¶</p><ul><li>Flux</li><li>Redux</li><li>Mobx</li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;çˆ¶ä¸å­&quot;&gt;&lt;a href=&quot;#çˆ¶ä¸å­&quot; class=&quot;headerlink&quot; title=&quot;çˆ¶ä¸å­&quot;&gt;&lt;/a&gt;çˆ¶ä¸å­&lt;/h4&gt;&lt;pre&gt;&lt;code&gt;çˆ¶ç»„ä»¶åŒ…è£¹å­ç»„ä»¶ï¼Œçˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’æ•°æ®ã€‚&lt;/code&gt;&lt;/pre&gt;&lt;figure class=&quot;highlight
      
    
    </summary>
    
    
      <category term="react" scheme="https://feidom-up.github.io/categories/react/"/>
    
    
      <category term="react" scheme="https://feidom-up.github.io/tags/react/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•è®¾è®¡reactç»„ä»¶</title>
    <link href="https://feidom-up.github.io/2020/12/29/%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1react%E7%BB%84%E4%BB%B6/"/>
    <id>https://feidom-up.github.io/2020/12/29/%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1react%E7%BB%84%E4%BB%B6/</id>
    <published>2020-12-29T11:33:19.000Z</published>
    <updated>2021-05-06T02:46:51.789Z</updated>
    
    <content type="html"><![CDATA[<h4 id="ç—›å®šæ€ç—›"><a href="#ç—›å®šæ€ç—›" class="headerlink" title="ç—›å®šæ€ç—›"></a>ç—›å®šæ€ç—›</h4><p>æ²¡æœ‰å¾ˆå¥½çš„è®¾è®¡æ¨¡å¼ï¼Œå†™ä»£ç å°†ä¼šå‡Œä¹±æ— åºã€‚æ²¡æœ‰æ¨¡å—åˆ’åˆ†ï¼Œä¹Ÿæ²¡æœ‰ç»„åˆçš„æ€æƒ³ã€‚</p><ul><li>æŠŠä¸€ä¸ªé¡µé¢å†™æˆä¸€ä¸ªç»„ä»¶</li><li>ä¸€ä¸ªç»„ä»¶æœ‰3000è¡Œä»£ç </li></ul><h4 id="åŸºäºåœºæ™¯çš„è®¾è®¡åˆ†ç±»"><a href="#åŸºäºåœºæ™¯çš„è®¾è®¡åˆ†ç±»" class="headerlink" title="åŸºäºåœºæ™¯çš„è®¾è®¡åˆ†ç±»"></a>åŸºäºåœºæ™¯çš„è®¾è®¡åˆ†ç±»</h4><p>å›´ç»•â€œå¦‚ä½•ç»„åˆâ€æ ¹æ®ä¸åŒçš„åœºæ™¯è®¾è®¡ä¸åŒæ¨¡å¼</p><ul><li><p>ç»„ä»¶çš„ç±»åˆ«</p><ul><li><p>æ— çŠ¶æ€ç»„ä»¶/å“‘ç»„ä»¶/å±•ç¤ºç»„ä»¶ï¼š åªåšå±•ç¤ºã€ç‹¬ç«‹è¿è¡Œã€ä¸é¢å¤–å¢åŠ åŠŸèƒ½çš„ç»„ä»¶</p><ul><li>ä¼˜ç‚¹ï¼š <ul><li>å±•ç¤ºç»„ä»¶çš„å¤ç”¨æ€§æ›´å¼ºï¼Œå¤ç”¨ç‡æ›´é«˜</li><li>å†…éƒ¨æ²¡æœ‰ä»»ä½•çš„stateï¼Œåªå—åˆ¶äºå¤–éƒ¨çš„propsä¼ å‚</li></ul></li><li>è¡ç”Ÿå‡ºçš„å…¶ä»–ç»„ä»¶è®¾è®¡<ul><li>ä»£ç†ç»„ä»¶ï¼šåŸºäºuiæ¡†æ¶çš„å…¶ä»–ç»„ä»¶ï¼Œå¤–é¢å°è£…ä¸€å±‚ï¼Œå®ç°ä»£ç†ç»„ä»¶ã€‚<ol><li>æ›´æ¢uiæ¡†æ¶æ—¶æ›´æ–¹ä¾¿ã€‚è§£å†³äº†ç»„ä»¶åº“çš„å¼ºä¾èµ–ç‰¹æ€§ï¼Œå®ç°æ— ç—›åˆ‡æ¢</li><li>éƒ½å†…èšåœ¨ä»£ç†ç»„ä»¶ä¸­ï¼Œä¿®æ”¹åŸºç¡€ç»„ä»¶çš„å±æ€§æ›´æ–¹ä¾¿ï¼Œä¸ä¼šæ•£è½åœ¨å„å¤„</li></ol></li><li>æ ·å¼ç»„ä»¶ï¼šæœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ç§ä»£ç†ç»„ä»¶ï¼Œä½†æ˜¯åˆç»†åˆ†äº†å¤„ç†æ ·å¼çš„é¢†åŸŸï¼Œå°†å½“å‰çš„å…³æ³¨ç‚¹åˆ†ç¦»åœ¨ç»„ä»¶å†…<ol><li>è‡ªèº«æ‰¿æ¥ä¸šåŠ¡åˆ¤æ–­é€»è¾‘ï¼Œå°è£…äº†uiåº“ä¸­çš„ç»„ä»¶æ¥æ§åˆ¶æ ·å¼ï¼Œæ”¹åŠ¨ä¼šæ›´æ–¹ä¾¿æ›´å‹å¥½</li></ol></li><li>å¸ƒå±€ç»„ä»¶ï¼š åŸºæœ¬è®¾è®¡ä¸æ ·å¼ç»„ä»¶å®Œå…¨ä¸€æ ·ï¼Œå¢åŠ äº†ä¸€ä¸ªå°ä¼˜åŒ–<ol><li>å¸ƒå±€ç»„ä»¶ä¸€èˆ¬ä¸æ ¹æ®çŠ¶æ€æ”¹å˜ï¼Œæ‰€ä»¥å¯ä»¥å°è£…å¸ƒå±€ç»„ä»¶åï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨<code>shouldComponentUpdate</code>å‡½æ•°é˜»æ–­æ¸²æŸ“ï¼Œæå‡æ€§èƒ½</li></ol></li></ul></li></ul></li><li><p>æœ‰çŠ¶æ€ç»„ä»¶/çµå·§ç»„ä»¶ï¼š å¤„ç†ä¸šåŠ¡é€»è¾‘ä¸æ•°æ®çŠ¶æ€çš„ç»„ä»¶<br>  çµå·§ç»„ä»¶æ›´ä¸“æ³¨äºä¸šåŠ¡æœ¬èº«ï¼›çµå·§ç»„ä»¶ä¸€å®šè¦è‡³å°‘åŒ…å«ä¸€ä¸ªçµå·§ç»„ä»¶æˆ–å±•ç¤ºç»„ä»¶ã€‚åŠŸèƒ½æ›´ä¸°å¯Œï¼Œä½†å¤ç”¨ç‡ä½</p><ul><li>è¡ç”Ÿå‡ºçš„å…¶ä»–ç»„ä»¶è®¾è®¡<ul><li>å®¹å™¨ç»„ä»¶ï¼šå‡ ä¹æ²¡æœ‰å¤ç”¨æ€§ï¼Œä¸»è¦åŠŸèƒ½åœ¨<strong>æ‹‰å–æ•°æ®</strong>å’Œ<strong>ç»„åˆç»„ä»¶</strong> </li><li>é«˜é˜¶ç»„ä»¶ï¼š Reactä¸­å¤ç”¨ç»„ä»¶çš„é«˜çº§æŠ€æœ¯ï¼ŒåŸºäºReactç»„åˆç‰¹æ€§å½¢æˆçš„è®¾è®¡æ¨¡å¼<ol><li>é“ç†ç±»ä¼¼å‡½æ•°å¼ç¼–ç¨‹çš„é«˜çº§å‡½æ•°ï¼ˆæ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼‰ï¼Œé«˜é˜¶ç»„ä»¶æ¥æ”¶å‚æ•°ä¸ºç»„ä»¶ï¼Œè¿”å›å€¼ä¹Ÿæ˜¯æ–°ä¸€ä¸ªç»„ä»¶ã€‚</li><li>å¯æŠ½å–å…¬å…±é€»è¾‘<ul><li>ç™»é™†æ€çš„åˆ¤æ–­<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è£…é¥°å™¨</span></span><br><span class="line"><span class="keyword">const</span> checkLogin = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> !!localStorage.getItem(<span class="string">'token'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è£…é¥°å™¨å†™æ³•</span></span><br><span class="line">@checkLogin</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserPage</span> <span class="keyword">extends</span>  <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line">@checkLogin</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OrderPage</span> <span class="keyword">extends</span>  <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">Â    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// é«˜é˜¶å‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> checkLogin = <span class="function">(<span class="params">WrappedComponent</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> checkLogin() ? <span class="xml"><span class="tag">&lt;<span class="name">WrappedComponent</span> &#123;<span class="attr">...props</span>&#125; /&gt;</span></span> : <span class="xml"><span class="tag">&lt;<span class="name">LoginPage</span> /&gt;</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å‡½æ•°å†™æ³•</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RawUserPage</span> <span class="keyword">extends</span>  <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> UserPage = checkLogin(RawUserPage)</span><br></pre></td></tr></table></figure></li><li>é¡µé¢åŸ‹ç‚¹ç»Ÿè®¡<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> trackPageView = (pageName) = &#123; </span><br><span class="line">    <span class="comment">// å‘é€åŸ‹ç‚¹ä¿¡æ¯è¯·æ±‚</span></span><br><span class="line">    ... </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> PV = <span class="function">(<span class="params">pageName</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">(<span class="params">WrappedComponent</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="title">Wrap</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">        componentDidMount() &#123;</span><br><span class="line">            trackPageView(pageName)</span><br><span class="line">        &#125;</span><br><span class="line">        render() &#123;</span><br><span class="line">            <span class="keyword">return</span> (</span><br><span class="line">            &lt;WrappedComponent &#123;...this.props&#125; /&gt;</span><br><span class="line">            );</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line">@PV(<span class="string">'ç”¨æˆ·é¡µé¢'</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserPage</span> <span class="keyword">extends</span>  <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line">@PV(<span class="string">'è´­ç‰©è½¦é¡µé¢'</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CartPage</span> <span class="keyword">extends</span>  <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line">@PV(<span class="string">'è®¢å•é¡µé¢'</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OrderPage</span> <span class="keyword">extends</span>  <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>æ—¢è¦åˆ¤æ–­ç™»é™†æ€ï¼Œåˆè¦åŸ‹ç‚¹ï¼š<strong>é“¾å¼è°ƒç”¨</strong><br>  é“¾å¼è°ƒç”¨æ˜¯å‡½æ•°å¼ç¼–ç¨‹é«˜çº§å‡½æ•°çš„ä¸€ç§ä½¿ç”¨åœºæ™¯ã€‚åœ¨é“¾å¼è°ƒç”¨åï¼Œè£…é¥°å™¨ä¼šæŒ‰ç…§ä»å¤–å‘å†…ã€ä»ä¸Šå¾€ä¸‹çš„é¡ºåºè¿›è¡Œæ‰§è¡Œã€‚  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡½æ•°è°ƒç”¨æ–¹å¼</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RawUserPage</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> UserPage = checkLogin(PV(<span class="string">'ç”¨æˆ·é¡µé¢'</span>)(RawUserPage))</span><br><span class="line"></span><br><span class="line"><span class="comment">// è£…é¥°å™¨è°ƒç”¨æ–¹å¼</span></span><br><span class="line"></span><br><span class="line">@checkLogin</span><br><span class="line">@PV(<span class="string">'ç”¨æˆ·é¡µé¢'</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserPage</span> <span class="keyword">extends</span>  <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li>æ¸²æŸ“åŠ«æŒ<br> æ¸²æŸ“åŠ«æŒå¯ä»¥é€šè¿‡æ§åˆ¶ render å‡½æ•°ä¿®æ”¹è¾“å‡ºå†…å®¹ï¼Œå¸¸è§çš„åœºæ™¯æ˜¯æ˜¾ç¤ºåŠ è½½å…ƒç´  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">withLoading</span>(<span class="params">WrappedComponent</span>) </span>&#123;</span><br><span class="line">Â  Â  <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">WrappedComponent</span> </span>&#123;</span><br><span class="line">Â  Â  Â  Â  render() &#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  <span class="keyword">if</span>(<span class="keyword">this</span>.props.isLoading) &#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Loading</span> /&gt;</span></span>;</span><br><span class="line">Â  Â  Â  Â  Â  Â  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  <span class="keyword">return</span> <span class="keyword">super</span>.render();</span><br><span class="line">Â  Â  Â  Â  Â  Â  &#125;</span><br><span class="line">Â  Â  Â  Â  &#125;</span><br><span class="line">Â  Â  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> é€šè¿‡é«˜é˜¶å‡½æ•°ä¸­ç»§æ‰¿åŸç»„ä»¶çš„æ–¹å¼ï¼ŒåŠ«æŒä¿®æ”¹ render å‡½æ•°ï¼Œç¯¡æ”¹è¿”å›ä¿®æ”¹ï¼Œè¾¾åˆ°æ˜¾ç¤º Loading çš„æ•ˆæœã€‚</li></ol></li><li>é«˜é˜¶ç»„ä»¶çš„ç¼ºç‚¹<ul><li>ä¸¢å¤±é™æ€å‡½æ•°ï¼šç”±äºè¢«åŒ…è£¹äº†ä¸€å±‚ï¼Œæ‰€ä»¥é™æ€å‡½æ•°åœ¨å¤–å±‚æ˜¯æ— æ³•è·å–çš„ã€‚  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UserPage.jsx</span></span><br><span class="line">@PV(<span class="string">'ç”¨æˆ·é¡µé¢'</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">UserPage</span> <span class="keyword">extends</span>  <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> getUser() &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// page.js</span></span><br><span class="line"><span class="keyword">import</span> UserPage <span class="keyword">from</span> <span class="string">'./UserPage'</span></span><br><span class="line">UserPage.checkLogin() <span class="comment">// è°ƒç”¨å¤±è´¥ï¼Œå¹¶ä¸å­˜åœ¨ã€‚</span></span><br></pre></td></tr></table></figure>  <em>è§£å†³æ–¹æ¡ˆ</em>ï¼šåœ¨å¤–éƒ¨å‡½æ•°ä¸­æŠŠå†…éƒ¨å‡½æ•°çš„æ–¹æ³•å¤åˆ¶å‡ºæ¥ï¼š<code>hoist-non-react-statics</code>(ç°æˆçš„åº“)  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hoistNonReactStatics <span class="keyword">from</span> <span class="string">'hoist-non-react-statics'</span>;</span><br><span class="line"><span class="keyword">const</span> PV = <span class="function">(<span class="params">pageName</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">(<span class="params">WrappedComponent</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="class"><span class="keyword">class</span> <span class="title">Wrap</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">            componentDidMount() &#123;</span><br><span class="line">                trackPageView(pageName)</span><br><span class="line">            &#125;</span><br><span class="line">            render() &#123;</span><br><span class="line">                <span class="keyword">return</span> (</span><br><span class="line">                &lt;WrappedComponent &#123;...this.props&#125; /&gt;</span><br><span class="line">                );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        hoistNonReactStatics(Wrap, WrappedComponent);</span><br><span class="line">        <span class="keyword">return</span> Wrap;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>refs å±æ€§ä¸èƒ½é€ä¼ : ref å±æ€§ç”±äºè¢«é«˜é˜¶ç»„ä»¶åŒ…è£¹äº†ä¸€æ¬¡ï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œç‰¹æ®Šå¤„ç†æ‰èƒ½è·å–ã€‚React ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªåä¸º React.forwardRef çš„ API æ¥è§£å†³è¿™ä¸€é—®é¢˜ï¼Œä»¥ä¸‹æ˜¯å®˜æ–¹æ–‡æ¡£ä¸­çš„ä¸€ä¸ªæ¡ˆä¾‹ï¼š  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">withLog</span>(<span class="params">Component</span>) </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">LogProps</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">            componentDidUpdate(prevProps) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'old props:'</span>, prevProps);</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'new props:'</span>, <span class="keyword">this</span>.props);</span><br><span class="line">        &#125;</span><br><span class="line">        render() &#123;</span><br><span class="line">            <span class="keyword">const</span> &#123;forwardedRef, ...rest&#125; = <span class="keyword">this</span>.props;</span><br><span class="line">            <span class="comment">// å°†è‡ªå®šä¹‰çš„ prop å±æ€§ â€œforwardedRefâ€ å®šä¹‰ä¸º ref</span></span><br><span class="line">            <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Component</span> <span class="attr">ref</span>=<span class="string">&#123;forwardedRef&#125;</span> &#123;<span class="attr">...rest</span>&#125; /&gt;</span></span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ³¨æ„ React.forwardRef å›è°ƒçš„ç¬¬äºŒä¸ªå‚æ•° â€œrefâ€ã€‚</span></span><br><span class="line">    <span class="comment">// æˆ‘ä»¬å¯ä»¥å°†å…¶ä½œä¸ºå¸¸è§„ prop å±æ€§ä¼ é€’ç»™ LogPropsï¼Œä¾‹å¦‚ â€œforwardedRefâ€</span></span><br><span class="line">    <span class="comment">// ç„¶åå®ƒå°±å¯ä»¥è¢«æŒ‚è½½åˆ°è¢« LogProps åŒ…è£¹çš„å­ç»„ä»¶ä¸Šã€‚</span></span><br><span class="line">    <span class="keyword">return</span> React.forwardRef(<span class="function">(<span class="params">props, ref</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">LogProps</span> &#123;<span class="attr">...props</span>&#125; <span class="attr">forwardedRef</span>=<span class="string">&#123;ref&#125;</span> /&gt;</span></span>;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¿™æ®µä»£ç è¯»èµ·æ¥ä¼šæœ‰ç‚¹å„¿å¤´çš®å‘éº»ï¼Œå®ƒæ­£ç¡®çš„é˜…è¯»é¡ºåºåº”è¯¥æ˜¯ä»æœ€åº•ä¸‹çš„ React.forwardRef éƒ¨åˆ†å¼€å§‹ï¼Œé€šè¿‡ forwardedRef è½¬å‘ ref åˆ° LogProps å†…éƒ¨ã€‚</span></span><br></pre></td></tr></table></figure></li></ul></li></ul></li></ul></li></ul></li></ul><h4 id="æ‰€ä»¥ï¼šç»„ä»¶çš„ç›®å½•ç»“æ„"><a href="#æ‰€ä»¥ï¼šç»„ä»¶çš„ç›®å½•ç»“æ„" class="headerlink" title="æ‰€ä»¥ï¼šç»„ä»¶çš„ç›®å½•ç»“æ„"></a>æ‰€ä»¥ï¼šç»„ä»¶çš„ç›®å½•ç»“æ„</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€šè¿‡ç›®å½•çº§åˆ«å®Œæˆåˆ‡åˆ†</span></span><br><span class="line">    src</span><br><span class="line">    â”œâ”€â”€ components</span><br><span class="line">    â”‚   â”œâ”€â”€ basic   <span class="comment">// æœ€åŸºæœ¬çš„å±•ç¤ºç»„ä»¶æ”¾å…¥ basic ç›®å½•ä¸­ å»ºè®®ä½¿ç”¨ç±»ä¼¼ Storybook çš„å·¥å…·è¿›è¡Œç»„ä»¶ç®¡ç†ã€‚</span></span><br><span class="line">    â”‚   â”œâ”€â”€ container  <span class="comment">//å°†å®¹å™¨ç»„ä»¶æ”¾å…¥ container</span></span><br><span class="line">    â”‚   â””â”€â”€ hoc  <span class="comment">//é«˜é˜¶ç»„ä»¶æ”¾å…¥ hoc ä¸­</span></span><br><span class="line">    â””â”€â”€ pages  <span class="comment">//å°†é¡µé¢å¤–å±‚ç»„ä»¶æ”¾åœ¨é¡µé¢ç›®å½•ä¸­</span></span><br></pre></td></tr></table></figure><blockquote><p><a class="link"   href="https://storybook.js.org/"  target="_blank" rel="noopener">Storybookå®˜ç½‘<i class="fas fa-external-link-alt"></i></a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;ç—›å®šæ€ç—›&quot;&gt;&lt;a href=&quot;#ç—›å®šæ€ç—›&quot; class=&quot;headerlink&quot; title=&quot;ç—›å®šæ€ç—›&quot;&gt;&lt;/a&gt;ç—›å®šæ€ç—›&lt;/h4&gt;&lt;p&gt;æ²¡æœ‰å¾ˆå¥½çš„è®¾è®¡æ¨¡å¼ï¼Œå†™ä»£ç å°†ä¼šå‡Œä¹±æ— åºã€‚æ²¡æœ‰æ¨¡å—åˆ’åˆ†ï¼Œä¹Ÿæ²¡æœ‰ç»„åˆçš„æ€æƒ³ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æŠŠä¸€ä¸ªé¡µé¢å†™æˆä¸€ä¸ªç»„ä»¶&lt;
      
    
    </summary>
    
    
      <category term="react" scheme="https://feidom-up.github.io/categories/react/"/>
    
    
      <category term="react" scheme="https://feidom-up.github.io/tags/react/"/>
    
  </entry>
  
  <entry>
    <title>reactçš„ç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶</title>
    <link href="https://feidom-up.github.io/2020/12/29/react%E7%9A%84%E7%B1%BB%E7%BB%84%E4%BB%B6%E5%92%8C%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6/"/>
    <id>https://feidom-up.github.io/2020/12/29/react%E7%9A%84%E7%B1%BB%E7%BB%84%E4%BB%B6%E5%92%8C%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6/</id>
    <published>2020-12-29T11:01:39.000Z</published>
    <updated>2021-05-06T02:46:51.786Z</updated>
    
    <content type="html"><![CDATA[<p>reactçš„æœ€å°å•ä½æ˜¯ç»„ä»¶</p><h4 id="ç›¸åŒç‚¹"><a href="#ç›¸åŒç‚¹" class="headerlink" title="ç›¸åŒç‚¹"></a>ç›¸åŒç‚¹</h4><ul><li>å®é™…ç”¨é€”æ˜¯ä¸€æ ·çš„ï¼Œéƒ½å¯ä½œä¸ºåŸºç¡€ç»„ä»¶å±•ç¤ºUI</li><li>åœ¨ç°ä»£æµè§ˆå™¨ä¸­ï¼Œé™¤æç«¯åœºæ™¯ä¸‹ï¼Œç±»ï¼ˆç±»ç»„ä»¶ï¼‰å’Œé—­åŒ…ï¼ˆå‡½æ•°ç»„ä»¶ï¼‰çš„æ€§èƒ½å·®å¼‚ä¸å¤§</li></ul><h4 id="åŒºåˆ«ç‚¹"><a href="#åŒºåˆ«ç‚¹" class="headerlink" title="åŒºåˆ«ç‚¹"></a>åŒºåˆ«ç‚¹</h4><ul><li>ä»£ç å®ç°æ€æƒ³<ul><li>ç±»ç»„ä»¶çš„æ ¹åŸºæ˜¯OOPï¼Œé¢å‘å¯¹è±¡ç¼–ç¨‹</li><li>å‡½æ•°ç»„ä»¶çš„æ ¹æ®æ˜¯FPï¼Œå‡½æ•°å¼ç¼–ç¨‹</li></ul></li><li>ä½¿ç”¨åœºæ™¯<ul><li>ç±»ç»„ä»¶ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸ</li><li>å‡½æ•°ç»„ä»¶ä½¿ç”¨react hookså®ç°ç±»ä¼¼ç”Ÿå‘½å‘¨æœŸçš„èƒ½åŠ›</li></ul></li><li>è®¾è®¡æ¨¡å¼<ul><li>ç±»ç»„ä»¶å¯ä»¥å®ç°ç»§æ‰¿</li><li>å‡½æ•°ç»„ä»¶ç¼ºå°‘ç»§æ‰¿èƒ½åŠ›<blockquote><p>reactå‰ç«¯æ€æƒ³ï¼šç»„åˆä¼˜äºç»§æ‰¿ï¼ˆç»§æ‰¿çš„çµæ´»æ€§å·®ï¼Œç»†èŠ‚å±è”½è¿‡å¤šï¼‰</p></blockquote></li></ul></li><li>æ€§èƒ½ä¼˜åŒ–<ul><li>ç±»ç»„ä»¶ä¾é <code>shouldComponentUpdate</code>å‡½æ•°é˜»æ–­æ¸²æŸ“</li><li>å‡½æ•°ç»„ä»¶ä¾é <code>React.memo()</code>æ¥ä¼˜åŒ–<blockquote><p>React.memo å¹¶ä¸æ˜¯é˜»æ–­æ¸²æŸ“ï¼Œè€Œæ˜¯è·³è¿‡æ¸²æŸ“ç»„ä»¶çš„æ“ä½œå¹¶ç›´æ¥å¤ç”¨æœ€è¿‘ä¸€æ¬¡æ¸²æŸ“çš„ç»“æœï¼Œè¿™ä¸ shouldComponentUpdate æ˜¯å®Œå…¨ä¸åŒçš„ã€‚</p></blockquote></li></ul></li><li>æœªæ¥è¶‹åŠ¿<ul><li>åŸºäºhooksçš„åŠ æŒï¼Œreactç¤¾åŒºä¸»æ¨<strong>å‡½æ•°ç»„ä»¶</strong></li></ul></li></ul><h4 id="ä¼˜åŠ£æ€§"><a href="#ä¼˜åŠ£æ€§" class="headerlink" title="ä¼˜åŠ£æ€§"></a>ä¼˜åŠ£æ€§</h4><ul><li>ç±»ç»„ä»¶<ul><li>thisçš„æ¨¡ç³Šæ€§</li><li>ä¸šåŠ¡é€»è¾‘æ•£è½åœ¨ç”Ÿå‘½å‘¨æœŸä¸­</li><li>ç±»ç»„ä»¶ç¼ºä¹æ ‡å‡†çš„æ‹†åˆ†æ–¹å¼</li></ul></li><li>å‡½æ•°ç»„ä»¶<ul><li>åŸºäºå‡½æ•°å¼ç¼–ç¨‹çš„ä¼˜ç‚¹ï¼ˆè¾“å…¥è¾“å‡ºæ’å®šï¼Œæ— å‰¯ä½œç”¨ç­‰ï¼‰ï¼Œå‡½æ•°ç»„ä»¶æ›´çº¯ç²¹ã€ç®€å•ã€æ˜“æµ‹è¯•ã€‚</li><li>é—­åŒ…æ•è·çš„å€¼ä¼˜äºthisçš„æ¨¡ç³Šæ€§ï¼Œæ•è·çš„å€¼æ°¸è¿œæ˜¯ç¡®å®šä¸”å®‰å…¨çš„</li><li>æ›´ç»†è…»çš„é€»è¾‘ç»„ç»‡å’Œå¤ç”¨ï¼Œæ›´å¥½çš„ä½œç”¨äºæ—¶é—´åˆ‡ç‰‡ä¸å¹¶å‘æ¨¡å¼</li><li>ç”±äºå‡½æ•°ç»„ä»¶çš„æ‰§è¡Œä»æ¥éƒ½æ˜¯è‡ªé¡¶å‘ä¸‹ï¼Œä¾èµ–äº<code>dom diff</code>ç®—æ³•ä¸è‡³äºé¢‘ç¹æ¸²æŸ“</li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;reactçš„æœ€å°å•ä½æ˜¯ç»„ä»¶&lt;/p&gt;
&lt;h4 id=&quot;ç›¸åŒç‚¹&quot;&gt;&lt;a href=&quot;#ç›¸åŒç‚¹&quot; class=&quot;headerlink&quot; title=&quot;ç›¸åŒç‚¹&quot;&gt;&lt;/a&gt;ç›¸åŒç‚¹&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;å®é™…ç”¨é€”æ˜¯ä¸€æ ·çš„ï¼Œéƒ½å¯ä½œä¸ºåŸºç¡€ç»„ä»¶å±•ç¤ºUI&lt;/li&gt;
&lt;li&gt;åœ¨ç°ä»£æµè§ˆå™¨ä¸­ï¼Œ
      
    
    </summary>
    
    
      <category term="react" scheme="https://feidom-up.github.io/categories/react/"/>
    
    
      <category term="react" scheme="https://feidom-up.github.io/tags/react/"/>
    
  </entry>
  
  <entry>
    <title>reactç”Ÿå‘½å‘¨æœŸçˆ¬å‘</title>
    <link href="https://feidom-up.github.io/2020/12/28/react%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%88%AC%E5%9D%91/"/>
    <id>https://feidom-up.github.io/2020/12/28/react%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%88%AC%E5%9D%91/</id>
    <published>2020-12-28T11:43:41.000Z</published>
    <updated>2021-05-06T02:46:51.786Z</updated>
    
    <content type="html"><![CDATA[<p>ç”±äºå‡½æ•°å¼ç»„ä»¶ä¼šä»å¤´æ‰§è¡Œåˆ°å°¾ï¼Œæ‰€ä»¥ç”Ÿå‘½å‘¨æœŸä¸€å®šæ˜¯åœ¨è°ˆè®ºç±»ç»„ä»¶</p><h3 id="æ¢³ç†ç”Ÿå‘½å‘¨æœŸçš„æ—¶æœºå’ŒèŒè´£ï¼Œå»ºç«‹æ—¶æœºä¸æ“ä½œçš„å¯¹åº”å…³ç³»"><a href="#æ¢³ç†ç”Ÿå‘½å‘¨æœŸçš„æ—¶æœºå’ŒèŒè´£ï¼Œå»ºç«‹æ—¶æœºä¸æ“ä½œçš„å¯¹åº”å…³ç³»" class="headerlink" title="æ¢³ç†ç”Ÿå‘½å‘¨æœŸçš„æ—¶æœºå’ŒèŒè´£ï¼Œå»ºç«‹æ—¶æœºä¸æ“ä½œçš„å¯¹åº”å…³ç³»"></a>æ¢³ç†ç”Ÿå‘½å‘¨æœŸçš„<strong>æ—¶æœº</strong>å’Œ<strong>èŒè´£</strong>ï¼Œå»ºç«‹æ—¶æœºä¸æ“ä½œçš„å¯¹åº”å…³ç³»</h3><ul><li>ä½¿ç”¨æ–¹å¼ï¼ˆæ—¶æœºæ¢³ç†ï¼‰ï¼š æŒ‚è½½ï¼Œæ›´æ–°ï¼Œå¸è½½</li><li>é€‚ç”¨èŒƒå›´ï¼ˆèŒè´£æ¢³ç†ï¼‰ï¼šçŠ¶æ€å˜æ›´ã€é”™è¯¯å¤„ç†</li></ul><h4 id="æ—¶æœºæ¢³ç†"><a href="#æ—¶æœºæ¢³ç†" class="headerlink" title="æ—¶æœºæ¢³ç†"></a>æ—¶æœºæ¢³ç†</h4><h5 id="æŒ‚è½½é˜¶æ®µ"><a href="#æŒ‚è½½é˜¶æ®µ" class="headerlink" title="æŒ‚è½½é˜¶æ®µ"></a>æŒ‚è½½é˜¶æ®µ</h5><pre><code>æŒ‚è½½é˜¶æ®µæ˜¯æŒ‡ç»„ä»¶ä»åˆå§‹åŒ–åˆ°å®ŒæˆåŠ è½½çš„è¿‡ç¨‹ã€‚</code></pre><ul><li><p>constructor<br>  æ˜¯ç±»é€šç”¨çš„æ„é€ å‡½æ•°ï¼Œå¸¸ç”¨äºåˆå§‹åŒ–ã€‚æ‰€ä»¥åœ¨è¿‡å»ï¼Œconstructor é€šå¸¸ç”¨äºåˆå§‹åŒ– state ä¸ç»‘å®šå‡½æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Com</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</span><br><span class="line">   <span class="comment">// constructor react å®˜æ–¹å¼ƒç”¨</span></span><br><span class="line">   <span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">      <span class="keyword">super</span>(props)   </span><br><span class="line">      <span class="keyword">this</span>.state = &#123;<span class="attr">count</span>: <span class="number">0</span>&#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></li><li><p>getDerivedStateFromProps</p><ul><li>å½“propsè¢«ä¼ å…¥</li><li>stateå‘ç”Ÿå˜åŒ–æ—¶</li><li>fouceUpdateè¢«è°ƒç”¨<blockquote><p>æœ€å¸¸è§çš„ä¸€ä¸ªé”™è¯¯æ˜¯è®¤ä¸ºåªæœ‰ props å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒgetDerivedStateFromProps æ‰ä¼šè¢«è°ƒç”¨ï¼Œè€Œå®é™…ä¸Šåªè¦çˆ¶çº§ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼ŒgetDerivedStateFromProps å°±ä¼šè¢«è°ƒç”¨ã€‚æ‰€ä»¥æ˜¯å¤–éƒ¨å‚æ•°ï¼Œä¹Ÿå°±æ˜¯ props ä¼ å…¥æ—¶å°±ä¼šå‘ç”Ÿå˜åŒ–ã€‚ä½ å¯èƒ½ä¸éœ€è¦ä½¿ç”¨æ´¾ç”Ÿ state</p></blockquote></li></ul></li><li><p>UNSAFE_componentWillMount(componentWillMount)<br>  ç”¨äºç»„ä»¶åŠ è½½å‰åšæŸäº›æ“ä½œ<br>  å› åœ¨Reactçš„å¼‚æ­¥æ¸²æŸ“æœºåˆ¶ä¸‹ï¼Œä¼šè¢«å¤šæ¬¡è°ƒç”¨ã€‚reactå¼ƒç”¨<br>  egï¼šåŒæ„æ—¶ï¼Œåœ¨æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯åŒæ—¶å‘èµ·è¯·æ±‚æ‹‰å–æ•°æ®ï¼Œä¼šåˆ†åˆ«è¢«æ‰§è¡Œä¸€æ¬¡</p></li><li><p>render çº¯å‡½æ•°  è¿”å›jsxè§£æ„ï¼Œæè¿°æ¸²æŸ“å†…å®¹</p></li><li><p>componentDidMount<br>  ç»„ä»¶åŠ è½½å®Œæˆæ—¶åšæŸäº›æ“ä½œï¼Œç”¨äºå‘èµ·è¯·æ±‚</p></li></ul><h5 id="æ›´æ–°é˜¶æ®µ"><a href="#æ›´æ–°é˜¶æ®µ" class="headerlink" title="æ›´æ–°é˜¶æ®µ"></a>æ›´æ–°é˜¶æ®µ</h5><pre><code>æ›´æ–°é˜¶æ®µæ˜¯æŒ‡å¤–éƒ¨ props ä¼ å…¥ï¼Œæˆ–è€… state å‘ç”Ÿå˜åŒ–æ—¶çš„é˜¶æ®µã€‚</code></pre><ul><li><p>UNSAFE_componentWillReceiveProps<br>  è¢«æ ‡è®°å¼ƒç”¨ï¼Œå› ä¸ºå…¶åŠŸèƒ½å¯è¢«å‡½æ•° getDerivedStateFromProps æ‰€æ›¿ä»£ã€‚</p></li><li><p>getDerivedStateFromProps<br>  åŒæŒ‚è½½é˜¶æ®µçš„è¡¨ç°ä¸€è‡´ã€‚</p></li><li><p>shouldComponentUpdate<br>  è¯¥æ–¹æ³•é€šè¿‡è¿”å› true æˆ–è€… false æ¥ç¡®å®šæ˜¯å¦éœ€è¦è§¦å‘æ–°çš„æ¸²æŸ“ã€‚å› ä¸ºæ¸²æŸ“è§¦å‘æœ€åä¸€é“å…³å¡ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯æ€§èƒ½ä¼˜åŒ–çš„å¿…äº‰ä¹‹åœ°ã€‚é€šè¿‡æ·»åŠ åˆ¤æ–­æ¡ä»¶æ¥é˜»æ­¢ä¸å¿…è¦çš„æ¸²æŸ“ã€‚</p><p>  React å®˜æ–¹æä¾›äº†ä¸€ä¸ªé€šç”¨çš„ä¼˜åŒ–æ–¹æ¡ˆï¼Œä¹Ÿå°±æ˜¯ PureComponentã€‚PureComponent çš„æ ¸å¿ƒåŸç†å°±æ˜¯é»˜è®¤å®ç°äº†shouldComponentUpdateå‡½æ•°ï¼Œåœ¨è¿™ä¸ªå‡½æ•°ä¸­å¯¹ props å’Œ state è¿›è¡Œæµ…æ¯”è¾ƒï¼Œç”¨æ¥åˆ¤æ–­æ˜¯å¦è§¦å‘æ›´æ–°ã€‚ </p></li><li><p>UNSAFE_componentWillUpdate<br>  åŒæ ·å·²åºŸå¼ƒï¼Œå› ä¸ºåç»­çš„ React å¼‚æ­¥æ¸²æŸ“è®¾è®¡ä¸­ï¼Œå¯èƒ½ä¼šå‡ºç°ç»„ä»¶æš‚åœæ›´æ–°æ¸²æŸ“çš„æƒ…å†µã€‚</p></li><li><p>render<br>  åŒæŒ‚è½½é˜¶æ®µçš„è¡¨ç°ä¸€è‡´ã€‚</p></li><li><p>getSnapshotBeforeUpdate<br>  getSnapshotBeforeUpdate æ–¹æ³•æ˜¯é…åˆ React æ–°çš„å¼‚æ­¥æ¸²æŸ“çš„æœºåˆ¶ï¼Œåœ¨ DOM æ›´æ–°å‘ç”Ÿå‰è¢«è°ƒç”¨ï¼Œè¿”å›å€¼å°†ä½œä¸º componentDidUpdate çš„ç¬¬ä¸‰ä¸ªå‚æ•°ã€‚</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ScrollingList</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">Â    <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    Â  Â  <span class="keyword">super</span>(props);</span><br><span class="line">    Â  Â  <span class="keyword">this</span>.listRef = React.createRef();</span><br><span class="line">Â    &#125;</span><br><span class="line">Â </span><br><span class="line">Â    getSnapshotBeforeUpdate(prevProps, prevState) &#123;</span><br><span class="line">Â  Â      <span class="comment">// Are we adding new items to the list?</span></span><br><span class="line">Â  Â      <span class="comment">// Capture the scroll position so we can adjust scroll later.</span></span><br><span class="line">    Â  Â  <span class="keyword">if</span> (prevProps.list.length &lt; <span class="keyword">this</span>.props.list.length) &#123;</span><br><span class="line">    Â  Â  Â    <span class="keyword">const</span> list = <span class="keyword">this</span>.listRef.current;</span><br><span class="line">    Â  Â  Â    <span class="keyword">return</span> list.scrollHeight - list.scrollTop;</span><br><span class="line">    Â  Â  &#125;</span><br><span class="line">    Â  Â  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">Â    &#125;</span><br><span class="line">Â </span><br><span class="line">Â    componentDidUpdate(prevProps, prevState, snapshot) &#123;</span><br><span class="line">Â  Â      <span class="comment">// If we have a snapshot value, we've just added new items.</span></span><br><span class="line">Â  Â      <span class="comment">// Adjust scroll so these new items don't push the old ones out of view.</span></span><br><span class="line">Â  Â      <span class="comment">// (snapshot here is the value returned from getSnapshotBeforeUpdate)</span></span><br><span class="line">Â  Â      <span class="keyword">if</span> (snapshot !== <span class="literal">null</span>) &#123;</span><br><span class="line">Â  Â  Â        <span class="keyword">const</span> list = <span class="keyword">this</span>.listRef.current;</span><br><span class="line">Â  Â  Â        list.scrollTop = list.scrollHeight - snapshot;</span><br><span class="line">Â  Â      &#125;</span><br><span class="line">Â    &#125;</span><br><span class="line">Â </span><br><span class="line">Â    render() &#123;</span><br><span class="line">Â  Â      <span class="keyword">return</span> (</span><br><span class="line">Â  Â  Â        &lt;div ref=&#123;<span class="keyword">this</span>.listRef&#125;&gt;&#123;<span class="comment">/* ...contents... */</span>&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">Â  Â      );</span></span><br><span class="line"><span class="regexp">Â    &#125;</span></span><br></pre></td></tr></table></figure></li><li><p>componentDidUpdate<br>  æ­£å¦‚ä¸Šé¢çš„æ¡ˆä¾‹ï¼ŒgetSnapshotBeforeUpdate çš„è¿”å›å€¼ä¼šä½œä¸ºcomponentDidUpdateçš„ç¬¬ä¸‰ä¸ªå‚æ•°ä½¿ç”¨ã€‚</p></li></ul><h5 id="å¸è½½é˜¶æ®µ"><a href="#å¸è½½é˜¶æ®µ" class="headerlink" title="å¸è½½é˜¶æ®µ"></a>å¸è½½é˜¶æ®µ</h5><ul><li>componentWillUnmount<br>  å¸è½½é˜¶æ®µå”¯ä¸€çš„å›è°ƒå‡½æ•°ã€‚<br>  è¯¥å‡½æ•°ä¸»è¦ç”¨äºæ‰§è¡Œæ¸…ç†å·¥ä½œã€‚ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„ Bug å°±æ˜¯å¿˜è®°åœ¨ componentWillUnmount ä¸­å–æ¶ˆå®šæ—¶å™¨ï¼Œå¯¼è‡´å®šæ—¶æ“ä½œä¾ç„¶åœ¨ç»„ä»¶é”€æ¯åä¸åœåœ°æ‰§è¡Œã€‚æ‰€ä»¥ä¸€å®šè¦åœ¨è¯¥é˜¶æ®µè§£é™¤äº‹ä»¶ç»‘å®šï¼Œå–æ¶ˆå®šæ—¶å™¨ã€‚</li></ul><h4 id="èŒè´£æ¢³ç†"><a href="#èŒè´£æ¢³ç†" class="headerlink" title="èŒè´£æ¢³ç†"></a>èŒè´£æ¢³ç†</h4><p>å¦‚æœæˆ‘ä»¬çš„ React åº”ç”¨è¶³å¤Ÿå¤æ‚ã€æ¸²æŸ“å±‚çº§è¶³å¤Ÿæ·±æ—¶ï¼Œä¸€æ¬¡é‡æ–°æ¸²æŸ“ï¼Œå°†ä¼šæ¶ˆè€—éå¸¸é«˜çš„æ€§èƒ½ï¼Œå¯¼è‡´å¡é¡¿ç­‰é—®é¢˜ã€‚<br>å…³é”®ç‚¹ï¼š</p><ol><li>ä»€ä¹ˆæƒ…å†µä¸‹ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ã€‚</li><li>æ¸²æŸ“ä¸­å‘ç”ŸæŠ¥é”™åä¼šæ€æ ·ï¼Ÿåˆè¯¥å¦‚ä½•å¤„ç†ï¼Ÿ</li></ol><hr><ul><li>å‡½æ•°ç»„ä»¶</li></ul><p>å‡½æ•°ç»„ä»¶ä»»ä½•æƒ…å†µä¸‹éƒ½ä¼šé‡æ–°æ¸²æŸ“ã€‚<br>å®˜æ–¹æä¾›äº†ä¸€ç§æ–¹å¼ä¼˜åŒ–æ‰‹æ®µï¼Œé‚£å°±æ˜¯ React.memoã€‚<br>React.memo å¹¶ä¸æ˜¯é˜»æ–­æ¸²æŸ“ï¼Œè€Œæ˜¯è·³è¿‡æ¸²æŸ“ç»„ä»¶çš„æ“ä½œå¹¶ç›´æ¥å¤ç”¨æœ€è¿‘ä¸€æ¬¡æ¸²æŸ“çš„ç»“æœï¼Œè¿™ä¸ shouldComponentUpdate æ˜¯å®Œå…¨ä¸åŒçš„ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MyComponent = React.memo(<span class="function"><span class="keyword">function</span> <span class="title">MyComponent</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">Â  <span class="comment">/* ä½¿ç”¨ props æ¸²æŸ“ */</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li><p>React.Component<br>  å¦‚æœä¸å®ç° shouldComponentUpdate å‡½æ•°ï¼Œé‚£ä¹ˆæœ‰ä¸¤ç§æƒ…å†µè§¦å‘é‡æ–°æ¸²æŸ“ã€‚</p><ol><li>å½“ state å‘ç”Ÿå˜åŒ–æ—¶ã€‚è¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œæ˜¯å¸¸è§çš„æƒ…å†µã€‚</li><li>å½“çˆ¶çº§ç»„ä»¶çš„ Props ä¼ å…¥æ—¶ã€‚æ— è®º Props æœ‰æ²¡æœ‰å˜åŒ–ï¼Œåªè¦ä¼ å…¥å°±ä¼šå¼•å‘é‡æ–°æ¸²æŸ“ã€‚</li></ol></li><li><p>React.PureComponent<br>  PureComponent é»˜è®¤å®ç°äº† shouldComponentUpdate å‡½æ•°ã€‚æ‰€ä»¥ä»…åœ¨ props ä¸ state è¿›è¡Œæµ…æ¯”è¾ƒåï¼Œç¡®è®¤æœ‰å˜æ›´æ—¶æ‰ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ã€‚</p></li><li><p>é”™è¯¯è¾¹ç•Œ<br>é”™è¯¯è¾¹ç•Œæ˜¯ä¸€ç§ React ç»„ä»¶ï¼Œè¿™ç§ç»„ä»¶å¯ä»¥æ•è·å¹¶æ‰“å°å‘ç”Ÿåœ¨å…¶å­ç»„ä»¶æ ‘ä»»ä½•ä½ç½®çš„ JavaScript é”™è¯¯ï¼Œå¹¶ä¸”ï¼Œå®ƒä¼šæ¸²æŸ“å‡ºå¤‡ç”¨ UIï¼Œå¦‚ä¸‹ React å®˜æ–¹æ‰€ç»™çš„ç¤ºä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ErrorBoundary</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">Â  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">Â  Â  <span class="keyword">super</span>(props);</span><br><span class="line">Â  Â  <span class="keyword">this</span>.state = &#123; <span class="attr">hasError</span>: <span class="literal">false</span> &#125;;</span><br><span class="line">Â  &#125;</span><br><span class="line">Â  <span class="keyword">static</span> getDerivedStateFromError(error) &#123;</span><br><span class="line">Â  Â  <span class="comment">// æ›´æ–° state ä½¿ä¸‹ä¸€æ¬¡æ¸²æŸ“èƒ½å¤Ÿæ˜¾ç¤ºé™çº§åçš„ UI</span></span><br><span class="line">Â  Â  <span class="keyword">return</span> &#123; <span class="attr">hasError</span>: <span class="literal">true</span> &#125;;</span><br><span class="line">Â  &#125;</span><br><span class="line">Â  componentDidCatch(error, errorInfo) &#123;</span><br><span class="line">Â  Â  <span class="comment">// ä½ åŒæ ·å¯ä»¥å°†é”™è¯¯æ—¥å¿—ä¸ŠæŠ¥ç»™æœåŠ¡å™¨</span></span><br><span class="line">Â  Â  logErrorToMyService(error, errorInfo);</span><br><span class="line">Â  &#125;</span><br><span class="line">Â  render() &#123;</span><br><span class="line">Â  Â  <span class="keyword">if</span> (<span class="keyword">this</span>.state.hasError) &#123;</span><br><span class="line">Â  Â  Â  <span class="comment">// ä½ å¯ä»¥è‡ªå®šä¹‰é™çº§åçš„ UI å¹¶æ¸²æŸ“</span></span><br><span class="line">Â  Â  Â  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Something went wrong.<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">Â  Â  &#125;</span><br><span class="line">Â  Â  <span class="keyword">return</span> <span class="keyword">this</span>.props.children;Â </span><br><span class="line">Â  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ— è®ºæ˜¯ Reactï¼Œè¿˜æ˜¯ React Nativeï¼Œå¦‚æœæ²¡æœ‰é”™è¯¯è¾¹ç•Œï¼Œåœ¨ç”¨æˆ·ä¾§çœ‹åˆ°çš„ç°è±¡ä¼šæ˜¯è¿™æ ·çš„ï¼šåœ¨æ‰§è¡ŒæŸä¸ªæ“ä½œæ—¶ï¼Œè§¦å‘äº† Bugï¼Œå¼•å‘äº†å´©æºƒï¼Œé¡µé¢çªç„¶ç™½å±ã€‚<br>ä½†æ¸²æŸ“æ—¶çš„æŠ¥é”™ï¼Œåªèƒ½é€šè¿‡ componentDidCatch æ•è·ã€‚è¿™æ˜¯åœ¨åšçº¿ä¸Šé¡µé¢æŠ¥é”™ç›‘æ§æ—¶ï¼Œæå…¶å®¹æ˜“å¿½ç•¥çš„ç‚¹å„¿ã€‚</p></li></ul><h4 id="å‘"><a href="#å‘" class="headerlink" title="å‘"></a>å‘</h4><ul><li>åœ¨ä¸æ°å½“çš„æ—¶æœºè°ƒç”¨ä¸åˆé€‚çš„ä»£ç </li><li>åœ¨éœ€è¦è°ƒç”¨æ—¶ï¼Œå¿˜è®°äº†è°ƒç”¨</li></ul><p>ä»¥ä¸‹æƒ…å†µå®¹æ˜“é€ æˆç”Ÿå‘½å‘¨æœŸçš„å‘</p><ol><li><p>getDerivedStateFromProps å®¹æ˜“ç¼–å†™åæ¨¡å¼ä»£ç ï¼Œä½¿å—æ§ç»„ä»¶ä¸éå—æ§ç»„ä»¶åŒºåˆ†æ¨¡ç³Šã€‚</p></li><li><p>componentWillMount åœ¨ React ä¸­å·²è¢«æ ‡è®°å¼ƒç”¨ï¼Œä¸æ¨èä½¿ç”¨ï¼Œä¸»è¦åŸå› æ˜¯æ–°çš„å¼‚æ­¥æ¸²æŸ“æ¶æ„ä¼šå¯¼è‡´å®ƒè¢«å¤šæ¬¡è°ƒç”¨ã€‚æ‰€ä»¥ç½‘ç»œè¯·æ±‚åŠäº‹ä»¶ç»‘å®šä»£ç åº”ç§»è‡³ componentDidMount ä¸­ã€‚</p></li><li><p>componentWillReceiveProps åŒæ ·è¢«æ ‡è®°å¼ƒç”¨ï¼Œè¢« getDerivedStateFromProps æ‰€å–ä»£ï¼Œä¸»è¦åŸå› æ˜¯æ€§èƒ½é—®é¢˜ã€‚</p></li><li><p>shouldComponentUpdate é€šè¿‡è¿”å› true æˆ–è€… false æ¥ç¡®å®šæ˜¯å¦éœ€è¦è§¦å‘æ–°çš„æ¸²æŸ“ã€‚ä¸»è¦ç”¨äºæ€§èƒ½ä¼˜åŒ–ã€‚</p></li><li><p>componentWillUpdate åŒæ ·æ˜¯ç”±äºæ–°çš„å¼‚æ­¥æ¸²æŸ“æœºåˆ¶ï¼Œè€Œè¢«æ ‡è®°åºŸå¼ƒï¼Œä¸æ¨èä½¿ç”¨ï¼ŒåŸå…ˆçš„é€»è¾‘å¯ç»“åˆ getSnapshotBeforeUpdate ä¸ componentDidUpdate æ”¹é€ ä½¿ç”¨ã€‚</p></li><li><p>å¦‚æœåœ¨ componentWillUnmount å‡½æ•°ä¸­å¿˜è®°è§£é™¤äº‹ä»¶ç»‘å®šï¼Œå–æ¶ˆå®šæ—¶å™¨ç­‰æ¸…ç†æ“ä½œï¼Œå®¹æ˜“å¼•å‘ bugã€‚</p></li><li><p>å¦‚æœæ²¡æœ‰æ·»åŠ é”™è¯¯è¾¹ç•Œå¤„ç†ï¼Œå½“æ¸²æŸ“å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œç”¨æˆ·å°†ä¼šçœ‹åˆ°ä¸€ä¸ªæ— æ³•æ“ä½œçš„ç™½å±ï¼Œæ‰€ä»¥ä¸€å®šè¦æ·»åŠ ã€‚</p></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ç”±äºå‡½æ•°å¼ç»„ä»¶ä¼šä»å¤´æ‰§è¡Œåˆ°å°¾ï¼Œæ‰€ä»¥ç”Ÿå‘½å‘¨æœŸä¸€å®šæ˜¯åœ¨è°ˆè®ºç±»ç»„ä»¶&lt;/p&gt;
&lt;h3 id=&quot;æ¢³ç†ç”Ÿå‘½å‘¨æœŸçš„æ—¶æœºå’ŒèŒè´£ï¼Œå»ºç«‹æ—¶æœºä¸æ“ä½œçš„å¯¹åº”å…³ç³»&quot;&gt;&lt;a href=&quot;#æ¢³ç†ç”Ÿå‘½å‘¨æœŸçš„æ—¶æœºå’ŒèŒè´£ï¼Œå»ºç«‹æ—¶æœºä¸æ“ä½œçš„å¯¹åº”å…³ç³»&quot; class=&quot;headerlink&quot; title=&quot;æ¢³ç†ç”Ÿå‘½
      
    
    </summary>
    
    
      <category term="react" scheme="https://feidom-up.github.io/categories/react/"/>
    
    
      <category term="react" scheme="https://feidom-up.github.io/tags/react/"/>
    
  </entry>
  
  <entry>
    <title>ä½ å¯èƒ½ä¸éœ€è¦ä½¿ç”¨æ´¾ç”Ÿstate</title>
    <link href="https://feidom-up.github.io/2020/12/28/%E4%BD%A0%E5%8F%AF%E8%83%BD%E4%B8%8D%E9%9C%80%E8%A6%81%E4%BD%BF%E7%94%A8%E6%B4%BE%E7%94%9Fstate/"/>
    <id>https://feidom-up.github.io/2020/12/28/%E4%BD%A0%E5%8F%AF%E8%83%BD%E4%B8%8D%E9%9C%80%E8%A6%81%E4%BD%BF%E7%94%A8%E6%B4%BE%E7%94%9Fstate/</id>
    <published>2020-12-28T09:14:17.000Z</published>
    <updated>2021-05-06T02:46:51.789Z</updated>
    
    <content type="html"><![CDATA[<p><a class="link"   href="https://zh-hans.reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html"  target="_blank" rel="noopener">ä½ å¯èƒ½ä¸éœ€è¦ä½¿ç”¨æ´¾ç”Ÿstate<i class="fas fa-external-link-alt"></i></a></p><p>æ–‡ä¸­åˆ—ä¸¾äº†ä¸¤ç§åæ¨¡å¼çš„ä½¿ç”¨æ–¹å¼</p><ul><li>ç›´æ¥å¤åˆ¶propåˆ°state</li><li>åœ¨propså˜åŒ–åä¿®æ”¹state</li></ul><p>è¿™ä¸¤ç§ä½¿ç”¨æ–¹å¼é™¤äº†å¢åŠ ä»£ç çš„ç»´æŠ¤æˆæœ¬å¤–ï¼Œæ²¡æœ‰ä»»ä½•çš„å¥½å¤„</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a class=&quot;link&quot;   href=&quot;https://zh-hans.reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html&quot;  target=&quot;_blank&quot; rel=&quot;noop
      
    
    </summary>
    
    
      <category term="react" scheme="https://feidom-up.github.io/categories/react/"/>
    
    
      <category term="react" scheme="https://feidom-up.github.io/tags/react/"/>
    
  </entry>
  
</feed>
